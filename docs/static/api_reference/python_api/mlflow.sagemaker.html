

<!DOCTYPE html>
<!-- source: docs/source/python_api/mlflow.sagemaker.rst -->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mlflow.sagemaker</title>
  
   
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="canonical" href="https://mlflow.org/docs/latest/python_api/mlflow.sagemaker.html">
  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    

    

  
    

  

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/cards.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/grids.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/mobile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/simple-cards.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/tabs.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MLflow 2.17.1.dev0 documentation" href="../index.html"/>
        <link rel="up" title="Python API" href="index.html"/>
        <link rel="next" title="mlflow.sentence_transformers" href="/mlflow.sentence_transformers.html"/>
        <link rel="prev" title="mlflow.recipes" href="/mlflow.recipes.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>
<script type="text/javascript" src="../_static/jquery.js"></script>
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="../_static/languagesections.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script type="text/javascript" src="../_static/runllm.js"></script>

<body class="wy-body-for-nav" role="document">
  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <ul>
  <li class="menu-toggle">
    <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
    <a href="../index.html" class="wy-nav-top-logo"
      ><img src="../_static/MLflow-logo-final-black.png" alt="MLflow"
    /></a>
    <span class="version">2.17.1.dev0</span>
  </li>
</ul>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side relative">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
  </form>
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home"><img src="../_static/icons/nav-home.svg"> MLflow</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mlflow.html">mlflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.html#mlflow-tracing-apis">MLflow Tracing APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.artifacts.html">mlflow.artifacts</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.autogen.html">mlflow.autogen</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.catboost.html">mlflow.catboost</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.client.html">mlflow.client</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.config.html">mlflow.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.data.html">mlflow.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.deployments.html">mlflow.deployments</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.diviner.html">mlflow.diviner</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.dspy.html">mlflow.dspy</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.entities.html">mlflow.entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.environment_variables.html">mlflow.environment_variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.fastai.html">mlflow.fastai</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.gateway.html">mlflow.gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.gluon.html">mlflow.gluon</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.h2o.html">mlflow.h2o</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.johnsnowlabs.html">mlflow.johnsnowlabs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.keras.html">mlflow.keras</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.langchain.html">mlflow.langchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.lightgbm.html">mlflow.lightgbm</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.llama_index.html">mlflow.llama_index</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.metrics.html">mlflow.metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.mleap.html">mlflow.mleap</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.models.html">mlflow.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.onnx.html">mlflow.onnx</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.openai.html">mlflow.openai</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.paddle.html">mlflow.paddle</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pmdarima.html">mlflow.pmdarima</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.projects.html">mlflow.projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.promptflow.html">mlflow.promptflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.prophet.html">mlflow.prophet</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pyfunc.html">mlflow.pyfunc</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pyspark.ml.html">mlflow.pyspark.ml</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pytorch.html">mlflow.pytorch</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.recipes.html">mlflow.recipes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">mlflow.sagemaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sentence_transformers.html">mlflow.sentence_transformers</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.server.html">mlflow.server</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.shap.html">mlflow.shap</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sklearn.html">mlflow.sklearn</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.spacy.html">mlflow.spacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.spark.html">mlflow.spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.statsmodels.html">mlflow.statsmodels</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.system_metrics.html">mlflow.system_metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tensorflow.html">mlflow.tensorflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tracing.html">mlflow.tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.transformers.html">mlflow.transformers</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.types.html">mlflow.types</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.utils.html">mlflow.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.xgboost.html">mlflow.xgboost</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#log-levels">Log Levels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../R-api.html">R API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java_api/index.html">Java API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest-api.html">REST API</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
        <li><a href="index.html">Python API</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>mlflow.sagemaker</li>
    
    
    <!-- <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/mlflow/mlflow/blob/master/docs/source/python_api/mlflow.sagemaker.rst" class="fa fa-github"> Edit on GitHub</a>
    </li> -->
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="module-mlflow.sagemaker">
<span id="mlflow-sagemaker"></span><h1>mlflow.sagemaker<a class="headerlink" href="#module-mlflow.sagemaker" title="Permalink to this headline"> </a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker</span></code> module provides an API for deploying MLflow models to Amazon SageMaker.</p>
<dl class="py class">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.sagemaker.</span></code><code class="sig-name descname"><span class="pre">SageMakerDeploymentClient</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_uri</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.deployments.base.BaseDeploymentClient</span></code></p>
<p>Initialize a deployment client for SageMaker. The default region and assumed role ARN will
be set according to the value of the <cite>target_uri</cite>.</p>
<p>This class is meant to supercede the other <code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker</span></code> real-time serving API’s.
It is also designed to be used through the <a class="reference internal" href="mlflow.deployments.html#module-mlflow.deployments" title="mlflow.deployments"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.deployments</span></code></a> module.
This means that you can deploy to SageMaker using the
<a class="reference external" href="https://www.mlflow.org/docs/latest/cli.html#mlflow-deployments">mlflow deployments CLI</a> and
get a client through the <a class="reference internal" href="mlflow.deployments.html#mlflow.deployments.get_deploy_client" title="mlflow.deployments.get_deploy_client"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.deployments.get_deploy_client</span></code></a> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>target_uri</strong> – <p>A URI that follows one of the following formats:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sagemaker</span></code>: This will set the default region to <cite>us-west-2</cite> and
the default assumed role ARN to <cite>None</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sagemaker:/region_name</span></code>: This will set the default region to
<cite>region_name</cite> and the default assumed role ARN to <cite>None</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sagemaker:/region_name/assumed_role_arn</span></code>: This will set the default
region to <cite>region_name</cite> and the default assumed role ARN to
<cite>assumed_role_arn</cite>.</p></li>
</ul>
<p>When an <cite>assumed_role_arn</cite> is provided without a <cite>region_name</cite>,
an MlflowException will be raised.</p>
</p>
</dd>
</dl>
<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.create_deployment">
<code class="sig-name descname"><span class="pre">create_deployment</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.create_deployment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.create_deployment" title="Permalink to this definition"> </a></dt>
<dd><p>Deploy an MLflow model on AWS SageMaker.
The currently active AWS account must have correct permissions set up.</p>
<p>This function creates a SageMaker endpoint. For more information about the input data
formats accepted by this endpoint, see the
<span class="xref std std-ref">MLflow deployment tools documentation</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the deployed application.</p></li>
<li><p><strong>model_uri</strong> – <p>The location, in URI format, of the MLflow model to deploy to SageMaker.
For example:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/Users/me/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relative/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3://my_bucket/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runs:/&lt;mlflow_run_id&gt;/run-relative/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;model_version&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;stage&gt;</span></code></p></li>
</ul>
<p>For more information about supported URI schemes, see
<a class="reference external" href="https://www.mlflow.org/docs/latest/concepts.html#artifact-locations">Referencing Artifacts</a>.</p>
</p></li>
<li><p><strong>flavor</strong> – The name of the flavor of the model to use for deployment. Must be either
<code class="docutils literal notranslate"><span class="pre">None</span></code> or one of mlflow.sagemaker.SUPPORTED_DEPLOYMENT_FLAVORS.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, a flavor is automatically selected from the model’s available
flavors. If the specified flavor is not present or not supported for
deployment, an exception will be thrown.</p></li>
<li><p><strong>config</strong> – <p>Configuration parameters. The supported parameters are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">assume_role_arn</span></code>: The name of an IAM cross-account role to be assumed
to deploy SageMaker to another AWS account. If this parameter is not
specified, the role given in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code> will be used. If the
role is not given in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code>, defaults to <code class="docutils literal notranslate"><span class="pre">us-west-2</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">execution_role_arn</span></code>: The name of an IAM role granting the SageMaker
service permissions to access the specified Docker image and S3 bucket
containing MLflow model artifacts. If unspecified, the currently-assumed
role will be used. This execution role is passed to the SageMaker service
when creating a SageMaker model from the specified MLflow model. It is
passed as the <code class="docutils literal notranslate"><span class="pre">ExecutionRoleArn</span></code> parameter of the <a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_CreateModel.html">SageMaker
CreateModel API call</a>. This role is <em>not</em> assumed for any other
call. For more information about SageMaker execution roles for model
creation, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html">https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bucket</span></code>: S3 bucket where model artifacts will be stored. Defaults to a
SageMaker-compatible bucket name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">image_url</span></code>: URL of the ECR-hosted Docker image the model should be
deployed into, produced by <code class="docutils literal notranslate"><span class="pre">mlflow</span> <span class="pre">sagemaker</span> <span class="pre">build-and-push-container</span></code>.
This parameter can also be specified by the environment variable
<code class="docutils literal notranslate"><span class="pre">MLFLOW_SAGEMAKER_DEPLOY_IMG_URL</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">region_name</span></code>: Name of the AWS region to which to deploy the application.
If unspecified, use the region name given in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code>.
If it is also not specified in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code>,
defaults to <code class="docutils literal notranslate"><span class="pre">us-west-2</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">archive</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, any pre-existing SageMaker application resources
that become inactive (i.e. as a result of deploying in
<code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker.DEPLOYMENT_MODE_REPLACE</span></code> mode) are preserved.
These resources may include unused SageMaker models and endpoint
configurations that were associated with a prior version of the
application endpoint. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, these resources are deleted.
In order to use <code class="docutils literal notranslate"><span class="pre">archive=False</span></code>, <code class="docutils literal notranslate"><span class="pre">create_deployment()</span></code> must be executed
synchronously with <code class="docutils literal notranslate"><span class="pre">synchronous=True</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instance_type</span></code>: The type of SageMaker ML instance on which to deploy the
model. For a list of supported instance types, see
<a class="reference external" href="https://aws.amazon.com/sagemaker/pricing/instance-types/">https://aws.amazon.com/sagemaker/pricing/instance-types/</a>.
Defaults to <code class="docutils literal notranslate"><span class="pre">ml.m4.xlarge</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instance_count</span></code>: The number of SageMaker ML instances on which to deploy
the model. Defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">synchronous</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, this function will block until the deployment
process succeeds or encounters an irrecoverable failure. If <code class="docutils literal notranslate"><span class="pre">False</span></code>,
this function will return immediately after starting the deployment
process. It will not wait for the deployment process to complete;
in this case, the caller is responsible for monitoring the health and
status of the pending deployment via native SageMaker APIs or the AWS
console. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code>: If <code class="docutils literal notranslate"><span class="pre">synchronous</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the deployment process
will return after the specified number of seconds if no definitive result
(success or failure) is achieved. Once the function returns, the caller is
responsible for monitoring the health and status of the pending
deployment using native SageMaker APIs or the AWS console. If
<code class="docutils literal notranslate"><span class="pre">synchronous</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, this parameter is ignored.
Defaults to <code class="docutils literal notranslate"><span class="pre">300</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vpc_config</span></code>: A dictionary specifying the VPC configuration to use when
creating the new SageMaker model associated with this application.
The acceptable values for this parameter are identical to those of the
<code class="docutils literal notranslate"><span class="pre">VpcConfig</span></code> parameter in the <a class="reference external" href="https://boto3.readthedocs.io/en/latest/reference/services/sagemaker.html#SageMaker.Client.create_model">SageMaker boto3 client’s create_model
method</a>. For more information, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html">https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html</a>.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_capture_config</span></code>: A dictionary specifying the data capture
configuration to use when creating the new SageMaker model associated with
this application.
For more information, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DataCaptureConfig.html">https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DataCaptureConfig.html</a>.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">variant_name</span></code>: A string specifying the desired name when creating a production
variant.  Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async_inference_config</span></code>: A dictionary specifying the
async_inference_configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">serverless_config</span></code>: A dictionary specifying the serverless_configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env</span></code>: A dictionary specifying environment variables as key-value
pairs to be set for the deployed model. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code>: A dictionary of key-value pairs representing additional
tags to be set for the deployed model. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</p></li>
<li><p><strong>endpoint</strong> – (optional) Endpoint to create the deployment under. Currently unsupported</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Python example</span><a class="headerlink" href="#id11" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.deployments</span> <span class="kn">import</span> <span class="n">get_deploy_client</span>

<span class="n">vpc_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;SecurityGroupIds&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;sg-123456abc&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Subnets&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;subnet-123456abc&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>
<span class="n">config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">assume_role_arn</span><span class="o">=</span><span class="s2">&quot;arn:aws:123:role/assumed_role&quot;</span><span class="p">,</span>
    <span class="n">execution_role_arn</span><span class="o">=</span><span class="s2">&quot;arn:aws:456:role/execution_role&quot;</span><span class="p">,</span>
    <span class="n">bucket_name</span><span class="o">=</span><span class="s2">&quot;my-s3-bucket&quot;</span><span class="p">,</span>
    <span class="n">image_url</span><span class="o">=</span><span class="s2">&quot;1234.dkr.ecr.us-east-1.amazonaws.com/mlflow-test:1.23.1&quot;</span><span class="p">,</span>
    <span class="n">region_name</span><span class="o">=</span><span class="s2">&quot;us-east-1&quot;</span><span class="p">,</span>
    <span class="n">archive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">instance_type</span><span class="o">=</span><span class="s2">&quot;ml.m5.4xlarge&quot;</span><span class="p">,</span>
    <span class="n">instance_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">synchronous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">vpc_config</span><span class="o">=</span><span class="n">vpc_config</span><span class="p">,</span>
    <span class="n">variant_name</span><span class="o">=</span><span class="s2">&quot;prod-variant-1&quot;</span><span class="p">,</span>
    <span class="n">env</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;DISABLE_NGINX&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;GUNICORN_CMD_ARGS&quot;</span><span class="p">:</span> <span class="s1">&#39;&quot;--timeout 60&quot;&#39;</span><span class="p">},</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;training_timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-11-01T05:12:26&quot;</span><span class="p">},</span>
<span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">get_deploy_client</span><span class="p">(</span><span class="s2">&quot;sagemaker&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">create_deployment</span><span class="p">(</span>
    <span class="s2">&quot;my-deployment&quot;</span><span class="p">,</span>
    <span class="n">model_uri</span><span class="o">=</span><span class="s2">&quot;/mlruns/0/abc/model&quot;</span><span class="p">,</span>
    <span class="n">flavor</span><span class="o">=</span><span class="s2">&quot;python_function&quot;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Command-line example</span><a class="headerlink" href="#id12" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlflow<span class="w"> </span>deployments<span class="w"> </span>create<span class="w"> </span>--target<span class="w"> </span>sagemaker:/us-east-1/arn:aws:123:role/assumed_role<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--name<span class="w"> </span>my-deployment<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--model-uri<span class="w"> </span>/mlruns/0/abc/model<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--flavor<span class="w"> </span>python_function<span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">execution_role_arn</span><span class="o">=</span>arn:aws:456:role/execution_role<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">bucket_name</span><span class="o">=</span>my-s3-bucket<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">image_url</span><span class="o">=</span><span class="m">1234</span>.dkr.ecr.us-east-1.amazonaws.com/mlflow-test:1.23.1<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">region_name</span><span class="o">=</span>us-east-1<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">archive</span><span class="o">=</span>False<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">instance_type</span><span class="o">=</span>ml.m5.4xlarge<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">instance_count</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">synchronous</span><span class="o">=</span>True<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">timeout_seconds</span><span class="o">=</span><span class="m">300</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">variant_name</span><span class="o">=</span>prod-variant-1<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">vpc_config</span><span class="o">=</span><span class="s1">&#39;{&quot;SecurityGroupIds&quot;: [&quot;sg-123456abc&quot;], \</span>
<span class="s1">        &quot;Subnets&quot;: [&quot;subnet-123456abc&quot;]}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">data_capture_config</span><span class="o">=</span><span class="s1">&#39;{&quot;EnableCapture&quot;: True, \</span>
<span class="s1">        &#39;</span>InitalSamplingPercentage<span class="s1">&#39;: 100, &#39;</span>DestinationS3Uri<span class="s2">&quot;: &#39;s3://my-bucket/path&#39;, \</span>
<span class="s2">        &#39;CaptureOptions&#39;: [{&#39;CaptureMode&#39;: &#39;Output&#39;}]}&#39;</span>
<span class="s2">        -C env=&#39;{&quot;</span>DISABLE_NGINX<span class="s2">&quot;: &quot;</span>true<span class="s2">&quot;, &quot;</span>GUNICORN_CMD_ARGS<span class="s2">&quot;: &quot;&quot;--timeout 60&quot;&quot;}&#39; \</span>
<span class="s2">        -C tags=&#39;{&quot;</span>training_timestamp<span class="s2">&quot;: &quot;</span><span class="m">2022</span>-11-01T05:12:26<span class="s2">&quot;}&#39; \</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.create_endpoint">
<code class="sig-name descname"><span class="pre">create_endpoint</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.create_endpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.create_endpoint" title="Permalink to this definition"> </a></dt>
<dd><p>Create an endpoint with the specified target. By default, this method should block until
creation completes (i.e. until it’s possible to create a deployment within the endpoint).
In the case of conflicts (e.g. if it’s not possible to create the specified endpoint
due to conflict with an existing endpoint), raises a
<a class="reference internal" href="exceptions/mlflow.exceptions.html#mlflow.exceptions.MlflowException" title="mlflow.exceptions.MlflowException"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.exceptions.MlflowException</span></code></a>. See target-specific plugin documentation
for additional detail on support for asynchronous creation and other configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Unique name to use for endpoint. If another endpoint exists with the same
name, raises a <a class="reference internal" href="exceptions/mlflow.exceptions.html#mlflow.exceptions.MlflowException" title="mlflow.exceptions.MlflowException"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.exceptions.MlflowException</span></code></a>.</p></li>
<li><p><strong>config</strong> – (optional) Dict containing target-specific configuration for the endpoint.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dict corresponding to created endpoint, which must contain the ‘name’ key.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.delete_deployment">
<code class="sig-name descname"><span class="pre">delete_deployment</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.delete_deployment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.delete_deployment" title="Permalink to this definition"> </a></dt>
<dd><p>Delete a SageMaker application.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the deployed application.</p></li>
<li><p><strong>config</strong> – <p>Configuration parameters. The supported parameters are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">assume_role_arn</span></code>: The name of an IAM role to be assumed to delete
the SageMaker deployment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">region_name</span></code>: Name of the AWS region in which the application
is deployed. Defaults to <code class="docutils literal notranslate"><span class="pre">us-west-2</span></code> or the region provided in
the <cite>target_uri</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">archive</span></code>: If <cite>True</cite>, resources associated with the specified
application, such as its associated models and endpoint configuration,
are preserved. If <cite>False</cite>, these resources are deleted. In order to use
<code class="docutils literal notranslate"><span class="pre">archive=False</span></code>, <code class="docutils literal notranslate"><span class="pre">delete()</span></code> must be executed synchronously with
<code class="docutils literal notranslate"><span class="pre">synchronous=True</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">synchronous</span></code>: If <cite>True</cite>, this function blocks until the deletion process
succeeds or encounters an irrecoverable failure. If <cite>False</cite>, this function
returns immediately after starting the deletion process. It will not wait
for the deletion process to complete; in this case, the caller is
responsible for monitoring the status of the deletion process via native
SageMaker APIs or the AWS console. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code>: If <cite>synchronous</cite> is <cite>True</cite>, the deletion process
returns after the specified number of seconds if no definitive result
(success or failure) is achieved. Once the function returns, the caller
is responsible for monitoring the status of the deletion process via native
SageMaker APIs or the AWS console. If <cite>synchronous</cite> is False, this
parameter is ignored. Defaults to <code class="docutils literal notranslate"><span class="pre">300</span></code>.</p></li>
</ul>
</p></li>
<li><p><strong>endpoint</strong> – (optional) Endpoint containing the deployment to delete. Currently unsupported</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Python example</span><a class="headerlink" href="#id13" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.deployments</span> <span class="kn">import</span> <span class="n">get_deploy_client</span>

<span class="n">config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">assume_role_arn</span><span class="o">=</span><span class="s2">&quot;arn:aws:123:role/assumed_role&quot;</span><span class="p">,</span>
    <span class="n">region_name</span><span class="o">=</span><span class="s2">&quot;us-east-1&quot;</span><span class="p">,</span>
    <span class="n">archive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">synchronous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">get_deploy_client</span><span class="p">(</span><span class="s2">&quot;sagemaker&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">delete_deployment</span><span class="p">(</span><span class="s2">&quot;my-deployment&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Command-line example</span><a class="headerlink" href="#id14" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlflow<span class="w"> </span>deployments<span class="w"> </span>delete<span class="w"> </span>--target<span class="w"> </span>sagemaker<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--name<span class="w"> </span>my-deployment<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">assume_role_arn</span><span class="o">=</span>arn:aws:123:role/assumed_role<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">region_name</span><span class="o">=</span>us-east-1<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">archive</span><span class="o">=</span>False<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">synchronous</span><span class="o">=</span>True<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">timeout_seconds</span><span class="o">=</span><span class="m">300</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.delete_endpoint">
<code class="sig-name descname"><span class="pre">delete_endpoint</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.delete_endpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.delete_endpoint" title="Permalink to this definition"> </a></dt>
<dd><p>Delete the endpoint from the specified target. Deletion should be idempotent (i.e. deletion
should not fail if retried on a non-existent deployment).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>endpoint</strong> – Name of endpoint to delete</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.explain">
<code class="sig-name descname"><span class="pre">explain</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deployment_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.explain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.explain" title="Permalink to this definition"> </a></dt>
<dd><p><em>This function has not been implemented and will be coming in the future.</em></p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.get_deployment">
<code class="sig-name descname"><span class="pre">get_deployment</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.get_deployment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.get_deployment" title="Permalink to this definition"> </a></dt>
<dd><p>Returns a dictionary describing the specified deployment.</p>
<p>If a region name needs to be specified, the plugin must be initialized
with the AWS region in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code> such as <code class="docutils literal notranslate"><span class="pre">sagemaker:/us-east-1</span></code>.</p>
<p>To assume an IAM role, the plugin must be initialized
with the AWS region and the role ARN in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code> such as
<code class="docutils literal notranslate"><span class="pre">sagemaker:/us-east-1/arn:aws:1234:role/assumed_role</span></code>.</p>
<p>A <a class="reference internal" href="exceptions/mlflow.exceptions.html#mlflow.exceptions.MlflowException" title="mlflow.exceptions.MlflowException"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.exceptions.MlflowException</span></code></a> will also be thrown when an error occurs
while retrieving the deployment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of deployment to retrieve</p></li>
<li><p><strong>endpoint</strong> – (optional) Endpoint containing the deployment to get. Currently unsupported</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary that describes the specified deployment</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Python example</span><a class="headerlink" href="#id15" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.deployments</span> <span class="kn">import</span> <span class="n">get_deploy_client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">get_deploy_client</span><span class="p">(</span><span class="s2">&quot;sagemaker:/us-east-1/arn:aws:123:role/assumed_role&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">get_deployment</span><span class="p">(</span><span class="s2">&quot;my-deployment&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Command-line example</span><a class="headerlink" href="#id16" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlflow<span class="w"> </span>deployments<span class="w"> </span>get<span class="w"> </span>--target<span class="w"> </span>sagemaker:/us-east-1/arn:aws:1234:role/assumed_role<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--name<span class="w"> </span>my-deployment
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.get_endpoint">
<code class="sig-name descname"><span class="pre">get_endpoint</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.get_endpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.get_endpoint" title="Permalink to this definition"> </a></dt>
<dd><p>Returns a dictionary describing the specified endpoint, throwing a
py:class:<cite>mlflow.exception.MlflowException</cite> if no endpoint exists with the provided
name.
The dict is guaranteed to contain an ‘name’ key containing the endpoint name.
The other fields of the returned dictionary and their types may vary across targets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>endpoint</strong> – Name of endpoint to fetch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.list_deployments">
<code class="sig-name descname"><span class="pre">list_deployments</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.list_deployments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.list_deployments" title="Permalink to this definition"> </a></dt>
<dd><p>List deployments. This method returns a list of dictionaries that describes each deployment.</p>
<p>If a region name needs to be specified, the plugin must be initialized
with the AWS region in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code> such as <code class="docutils literal notranslate"><span class="pre">sagemaker:/us-east-1</span></code>.</p>
<p>To assume an IAM role, the plugin must be initialized
with the AWS region and the role ARN in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code> such as
<code class="docutils literal notranslate"><span class="pre">sagemaker:/us-east-1/arn:aws:1234:role/assumed_role</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>endpoint</strong> – (optional) List deployments in the specified endpoint. Currently unsupported</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of dictionaries corresponding to deployments.</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">Python example</span><a class="headerlink" href="#id17" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.deployments</span> <span class="kn">import</span> <span class="n">get_deploy_client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">get_deploy_client</span><span class="p">(</span><span class="s2">&quot;sagemaker:/us-east-1/arn:aws:123:role/assumed_role&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">list_deployments</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">Command-line example</span><a class="headerlink" href="#id18" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlflow<span class="w"> </span>deployments<span class="w"> </span>list<span class="w"> </span>--target<span class="w"> </span>sagemaker:/us-east-1/arn:aws:1234:role/assumed_role
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.list_endpoints">
<code class="sig-name descname"><span class="pre">list_endpoints</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.list_endpoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.list_endpoints" title="Permalink to this definition"> </a></dt>
<dd><p>List endpoints in the specified target. This method is expected to return an
unpaginated list of all endpoints (an alternative would be to return a dict with
an ‘endpoints’ field containing the actual endpoints, with plugins able to specify
other fields, e.g. a next_page_token field, in the returned dictionary for pagination,
and to accept a <cite>pagination_args</cite> argument to this method for passing
pagination-related args).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of dicts corresponding to endpoints. Each dict is guaranteed to
contain a ‘name’ key containing the endpoint name. The other fields of
the returned dictionary and their types may vary across targets.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.predict">
<code class="sig-name descname"><span class="pre">predict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deployment_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.predict" title="Permalink to this definition"> </a></dt>
<dd><p>Compute predictions from the specified deployment using the provided PyFunc input.</p>
<p>The input/output types of this method match the <a class="reference internal" href="mlflow.pyfunc.html#pyfunc-inference-api"><span class="std std-ref">MLflow PyFunc prediction
interface</span></a>.</p>
<p>If a region name needs to be specified, the plugin must be initialized
with the AWS region in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code> such as <code class="docutils literal notranslate"><span class="pre">sagemaker:/us-east-1</span></code>.</p>
<p>To assume an IAM role, the plugin must be initialized
with the AWS region and the role ARN in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code> such as
<code class="docutils literal notranslate"><span class="pre">sagemaker:/us-east-1/arn:aws:1234:role/assumed_role</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deployment_name</strong> – Name of the deployment to predict against.</p></li>
<li><p><strong>inputs</strong> – Input data (or arguments) to pass to the deployment or model endpoint for
inference. For a complete list of supported input types, see
<a class="reference internal" href="mlflow.pyfunc.html#pyfunc-inference-api"><span class="std std-ref">Inference API</span></a>.</p></li>
<li><p><strong>endpoint</strong> – Endpoint to predict against. Currently unsupported</p></li>
<li><p><strong>params</strong> – Optional parameters to invoke the endpoint with.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A PyFunc output, such as a Pandas DataFrame, Pandas Series, or NumPy array.
For a complete list of supported output types, see <a class="reference internal" href="mlflow.pyfunc.html#pyfunc-inference-api"><span class="std std-ref">Inference API</span></a>.</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">Python example</span><a class="headerlink" href="#id19" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">mlflow.deployments</span> <span class="kn">import</span> <span class="n">get_deploy_client</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;feat1&quot;</span><span class="p">,</span> <span class="s2">&quot;feat2&quot;</span><span class="p">,</span> <span class="s2">&quot;feat3&quot;</span><span class="p">])</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">get_deploy_client</span><span class="p">(</span><span class="s2">&quot;sagemaker:/us-east-1/arn:aws:123:role/assumed_role&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="s2">&quot;my-deployment&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">Command-line example</span><a class="headerlink" href="#id20" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>&gt;<span class="w"> </span>./input.json<span class="w"> </span><span class="s">&lt;&lt;- input</span>
<span class="s">{&quot;feat1&quot;: {&quot;0&quot;: 1}, &quot;feat2&quot;: {&quot;0&quot;: 2}, &quot;feat3&quot;: {&quot;0&quot;: 3}}</span>
<span class="s">input</span>

mlflow<span class="w"> </span>deployments<span class="w"> </span>predict<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--target<span class="w"> </span>sagemaker:/us-east-1/arn:aws:1234:role/assumed_role<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--name<span class="w"> </span>my-deployment<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input-path<span class="w"> </span>./input.json
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.update_deployment">
<code class="sig-name descname"><span class="pre">update_deployment</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.update_deployment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.update_deployment" title="Permalink to this definition"> </a></dt>
<dd><p>Update a deployment on AWS SageMaker. This function can replace or add a new model to
an existing SageMaker endpoint. By default, this function replaces the existing model
with the new one. The currently active AWS account must have correct permissions set up.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the deployed application.</p></li>
<li><p><strong>model_uri</strong> – <p>The location, in URI format, of the MLflow model to deploy to SageMaker.
For example:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/Users/me/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relative/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3://my_bucket/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runs:/&lt;mlflow_run_id&gt;/run-relative/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;model_version&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;stage&gt;</span></code></p></li>
</ul>
<p>For more information about supported URI schemes, see
<a class="reference external" href="https://www.mlflow.org/docs/latest/concepts.html#artifact-locations">Referencing Artifacts</a>.</p>
</p></li>
<li><p><strong>flavor</strong> – The name of the flavor of the model to use for deployment. Must be either
<code class="docutils literal notranslate"><span class="pre">None</span></code> or one of mlflow.sagemaker.SUPPORTED_DEPLOYMENT_FLAVORS.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, a flavor is automatically selected from the model’s available
flavors. If the specified flavor is not present or not supported for
deployment, an exception will be thrown.</p></li>
<li><p><strong>config</strong> – <p>Configuration parameters. The supported parameters are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">assume_role_arn</span></code>: The name of an IAM cross-account role to be assumed
to deploy SageMaker to another AWS account. If this parameter is not
specified, the role given in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code> will be used. If the
role is not given in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code>, defaults to <code class="docutils literal notranslate"><span class="pre">us-west-2</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">execution_role_arn</span></code>: The name of an IAM role granting the SageMaker
service permissions to access the specified Docker image and S3 bucket
containing MLflow model artifacts. If unspecified, the currently-assumed
role will be used. This execution role is passed to the SageMaker service
when creating a SageMaker model from the specified MLflow model. It is
passed as the <code class="docutils literal notranslate"><span class="pre">ExecutionRoleArn</span></code> parameter of the <a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_CreateModel.html">SageMaker
CreateModel API call</a>. This role is <em>not</em> assumed for any other
call. For more information about SageMaker execution roles for model
creation, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html">https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bucket</span></code>: S3 bucket where model artifacts will be stored. Defaults to a
SageMaker-compatible bucket name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">image_url</span></code>: URL of the ECR-hosted Docker image the model should be
deployed into, produced by <code class="docutils literal notranslate"><span class="pre">mlflow</span> <span class="pre">sagemaker</span> <span class="pre">build-and-push-container</span></code>.
This parameter can also be specified by the environment variable
<code class="docutils literal notranslate"><span class="pre">MLFLOW_SAGEMAKER_DEPLOY_IMG_URL</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">region_name</span></code>: Name of the AWS region to which to deploy the application.
If unspecified, use the region name given in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code>.
If it is also not specified in the <code class="docutils literal notranslate"><span class="pre">target_uri</span></code>,
defaults to <code class="docutils literal notranslate"><span class="pre">us-west-2</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mode</span></code>: The mode in which to deploy the application.
Must be one of the following:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker.DEPLOYMENT_MODE_REPLACE</span></code></dt><dd><p>If an application of the specified name exists, its model(s) is
replaced with the specified model. If no such application exists,
it is created with the specified name and model.
This is the default mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker.DEPLOYMENT_MODE_ADD</span></code></dt><dd><p>Add the specified model to a pre-existing application with the
specified name, if one exists. If the application does not exist,
a new application is created with the specified name and model.
NOTE: If the application <strong>already exists</strong>, the specified model is
added to the application’s corresponding SageMaker endpoint with an
initial weight of zero (0). To route traffic to the model,
update the application’s associated endpoint configuration using
either the AWS console or the <code class="docutils literal notranslate"><span class="pre">UpdateEndpointWeightsAndCapacities</span></code>
function defined in <a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_UpdateEndpointWeightsAndCapacities.html">https://docs.aws.amazon.com/sagemaker/latest/dg/API_UpdateEndpointWeightsAndCapacities.html</a>.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">archive</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, any pre-existing SageMaker application resources
that become inactive (i.e. as a result of deploying in
<code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker.DEPLOYMENT_MODE_REPLACE</span></code> mode) are preserved.
These resources may include unused SageMaker models and endpoint
configurations that were associated with a prior version of the
application endpoint. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, these resources are deleted.
In order to use <code class="docutils literal notranslate"><span class="pre">archive=False</span></code>, <code class="docutils literal notranslate"><span class="pre">update_deployment()</span></code> must be executed
synchronously with <code class="docutils literal notranslate"><span class="pre">synchronous=True</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instance_type</span></code>: The type of SageMaker ML instance on which to deploy the
model. For a list of supported instance types, see
<a class="reference external" href="https://aws.amazon.com/sagemaker/pricing/instance-types/">https://aws.amazon.com/sagemaker/pricing/instance-types/</a>.
Defaults to <code class="docutils literal notranslate"><span class="pre">ml.m4.xlarge</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instance_count</span></code>: The number of SageMaker ML instances on which to deploy
the model. Defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">synchronous</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, this function will block until the deployment
process succeeds or encounters an irrecoverable failure. If <code class="docutils literal notranslate"><span class="pre">False</span></code>,
this function will return immediately after starting the deployment
process. It will not wait for the deployment process to complete;
in this case, the caller is responsible for monitoring the health and
status of the pending deployment via native SageMaker APIs or the AWS
console. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code>: If <code class="docutils literal notranslate"><span class="pre">synchronous</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the deployment process
will return after the specified number of seconds if no definitive result
(success or failure) is achieved. Once the function returns, the caller is
responsible for monitoring the health and status of the pending
deployment using native SageMaker APIs or the AWS console. If
<code class="docutils literal notranslate"><span class="pre">synchronous</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, this parameter is ignored.
Defaults to <code class="docutils literal notranslate"><span class="pre">300</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">variant_name</span></code>: A string specifying the desired name when creating a
production variant.  Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vpc_config</span></code>: A dictionary specifying the VPC configuration to use when
creating the new SageMaker model associated with this application.
The acceptable values for this parameter are identical to those of the
<code class="docutils literal notranslate"><span class="pre">VpcConfig</span></code> parameter in the <a class="reference external" href="https://boto3.readthedocs.io/en/latest/reference/services/sagemaker.html#SageMaker.Client.create_model">SageMaker boto3 client’s create_model
method</a>. For more information, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html">https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html</a>.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_capture_config</span></code>: A dictionary specifying the data capture
configuration to use when creating the new SageMaker model associated with
this application.
For more information, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DataCaptureConfig.html">https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_DataCaptureConfig.html</a>.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async_inference_config</span></code>: A dictionary specifying the async config
configuration. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env</span></code>: A dictionary specifying environment variables as key-value pairs
to be set for the deployed model. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code>: A dictionary of key-value pairs representing additional tags
to be set for the deployed model. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</p></li>
<li><p><strong>endpoint</strong> – (optional) Endpoint containing the deployment to update. Currently unsupported</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">Python example</span><a class="headerlink" href="#id21" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.deployments</span> <span class="kn">import</span> <span class="n">get_deploy_client</span>

<span class="n">vpc_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;SecurityGroupIds&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;sg-123456abc&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Subnets&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;subnet-123456abc&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>
<span class="n">data_capture_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;EnableCapture&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;InitalSamplingPercentage&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">&quot;DestinationS3Uri&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://my-bucket/path&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CaptureOptions&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;CaptureMode&quot;</span><span class="p">:</span> <span class="s2">&quot;Output&quot;</span><span class="p">}],</span>
<span class="p">}</span>
<span class="n">config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">assume_role_arn</span><span class="o">=</span><span class="s2">&quot;arn:aws:123:role/assumed_role&quot;</span><span class="p">,</span>
    <span class="n">execution_role_arn</span><span class="o">=</span><span class="s2">&quot;arn:aws:456:role/execution_role&quot;</span><span class="p">,</span>
    <span class="n">bucket_name</span><span class="o">=</span><span class="s2">&quot;my-s3-bucket&quot;</span><span class="p">,</span>
    <span class="n">image_url</span><span class="o">=</span><span class="s2">&quot;1234.dkr.ecr.us-east-1.amazonaws.com/mlflow-test:1.23.1&quot;</span><span class="p">,</span>
    <span class="n">region_name</span><span class="o">=</span><span class="s2">&quot;us-east-1&quot;</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span>
    <span class="n">archive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">instance_type</span><span class="o">=</span><span class="s2">&quot;ml.m5.4xlarge&quot;</span><span class="p">,</span>
    <span class="n">instance_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">synchronous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">variant_name</span><span class="o">=</span><span class="s2">&quot;prod-variant-1&quot;</span><span class="p">,</span>
    <span class="n">vpc_config</span><span class="o">=</span><span class="n">vpc_config</span><span class="p">,</span>
    <span class="n">data_capture_config</span><span class="o">=</span><span class="n">data_capture_config</span><span class="p">,</span>
    <span class="n">env</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;DISABLE_NGINX&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;GUNICORN_CMD_ARGS&quot;</span><span class="p">:</span> <span class="s1">&#39;&quot;--timeout 60&quot;&#39;</span><span class="p">},</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;training_timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-11-01T05:12:26&quot;</span><span class="p">},</span>
<span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">get_deploy_client</span><span class="p">(</span><span class="s2">&quot;sagemaker&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">update_deployment</span><span class="p">(</span>
    <span class="s2">&quot;my-deployment&quot;</span><span class="p">,</span>
    <span class="n">model_uri</span><span class="o">=</span><span class="s2">&quot;/mlruns/0/abc/model&quot;</span><span class="p">,</span>
    <span class="n">flavor</span><span class="o">=</span><span class="s2">&quot;python_function&quot;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">Command-line example</span><a class="headerlink" href="#id22" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlflow<span class="w"> </span>deployments<span class="w"> </span>update<span class="w"> </span>--target<span class="w"> </span>sagemaker:/us-east-1/arn:aws:123:role/assumed_role<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--name<span class="w"> </span>my-deployment<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--model-uri<span class="w"> </span>/mlruns/0/abc/model<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--flavor<span class="w"> </span>python_function<span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">execution_role_arn</span><span class="o">=</span>arn:aws:456:role/execution_role<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">bucket_name</span><span class="o">=</span>my-s3-bucket<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">image_url</span><span class="o">=</span><span class="m">1234</span>.dkr.ecr.us-east-1.amazonaws.com/mlflow-test:1.23.1<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">region_name</span><span class="o">=</span>us-east-1<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">mode</span><span class="o">=</span>replace<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">archive</span><span class="o">=</span>False<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">instance_type</span><span class="o">=</span>ml.m5.4xlarge<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">instance_count</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">synchronous</span><span class="o">=</span>True<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">timeout_seconds</span><span class="o">=</span><span class="m">300</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">variant_name</span><span class="o">=</span>prod-variant-1<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">vpc_config</span><span class="o">=</span><span class="s1">&#39;{&quot;SecurityGroupIds&quot;: [&quot;sg-123456abc&quot;], \</span>
<span class="s1">        &quot;Subnets&quot;: [&quot;subnet-123456abc&quot;]}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">data_capture_config</span><span class="o">=</span><span class="s1">&#39;{&quot;EnableCapture&quot;: True, \</span>
<span class="s1">        &quot;InitalSamplingPercentage&quot;: 100, &quot;DestinationS3Uri&quot;: &quot;s3://my-bucket/path&quot;, \</span>
<span class="s1">        &quot;CaptureOptions&quot;: [{&quot;CaptureMode&quot;: &quot;Output&quot;}]}&#39;</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">env</span><span class="o">=</span><span class="s1">&#39;{&quot;DISABLE_NGINX&quot;: &quot;true&quot;, &quot;GUNICORN_CMD_ARGS&quot;: &quot;&quot;--timeout 60&quot;&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">tags</span><span class="o">=</span><span class="s1">&#39;{&quot;training_timestamp&quot;: &quot;2022-11-01T05:12:26&quot;}&#39;</span><span class="w"> </span><span class="se">\</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.sagemaker.SageMakerDeploymentClient.update_endpoint">
<code class="sig-name descname"><span class="pre">update_endpoint</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#SageMakerDeploymentClient.update_endpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.SageMakerDeploymentClient.update_endpoint" title="Permalink to this definition"> </a></dt>
<dd><p>Update the endpoint with the specified name. You can update any target-specific attributes
of the endpoint (via <cite>config</cite>). By default, this method should block until the update
completes (i.e. until it’s possible to create a deployment within the endpoint). See
target-specific plugin documentation for additional detail on support for asynchronous
update and other configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint</strong> – Unique name of endpoint to update</p></li>
<li><p><strong>config</strong> – (optional) dict containing target-specific configuration for the endpoint</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mlflow.sagemaker.deploy_transform_job">
<code class="sig-prename descclassname"><span class="pre">mlflow.sagemaker.</span></code><code class="sig-name descname"><span class="pre">deploy_transform_job</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s3_input_data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s3_input_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s3_output_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Line'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accept</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'text/csv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assemble_with</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Line'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'$'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'$'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">join_resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_role_arn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assume_role_arn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'us-west-2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ml.m4.xlarge'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vpc_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">archive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">synchronous</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1200</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#deploy_transform_job"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.deploy_transform_job" title="Permalink to this definition"> </a></dt>
<dd><p>Deploy an MLflow model on AWS SageMaker and create the corresponding batch transform job.
The currently active AWS account must have correct permissions set up.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_name</strong> – Name of the deployed Sagemaker batch transform job.</p></li>
<li><p><strong>model_uri</strong> – <p>The location, in URI format, of the MLflow model to deploy to SageMaker.
For example:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/Users/me/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relative/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3://my_bucket/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runs:/&lt;mlflow_run_id&gt;/run-relative/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;model_version&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;stage&gt;</span></code></p></li>
</ul>
<p>For more information about supported URI schemes, see
<a class="reference external" href="https://www.mlflow.org/docs/latest/concepts.html#artifact-locations">Referencing Artifacts</a>.</p>
</p></li>
<li><p><strong>s3_input_data_type</strong> – Input data type for the transform job.</p></li>
<li><p><strong>s3_input_uri</strong> – S3 key name prefix or a manifest of the input data.</p></li>
<li><p><strong>content_type</strong> – The multipurpose internet mail extension (MIME) type of the data.</p></li>
<li><p><strong>s3_output_path</strong> – The S3 path to store the output results of the Sagemaker transform job.</p></li>
<li><p><strong>compression_type</strong> – The compression type of the transform data.</p></li>
<li><p><strong>split_type</strong> – The method to split the transform job’s data files into smaller batches.</p></li>
<li><p><strong>accept</strong> – The multipurpose internet mail extension (MIME) type of the output data.</p></li>
<li><p><strong>assemble_with</strong> – The method to assemble the results of the transform job as
a single S3 object.</p></li>
<li><p><strong>input_filter</strong> – A JSONPath expression used to select a portion of the input data for
the transform job.</p></li>
<li><p><strong>output_filter</strong> – A JSONPath expression used to select a portion of the output data from
the transform job.</p></li>
<li><p><strong>join_resource</strong> – The source of the data to join with the transformed data.</p></li>
<li><p><strong>execution_role_arn</strong> – <p>The name of an IAM role granting the SageMaker service permissions to
access the specified Docker image and S3 bucket containing MLflow
model artifacts. If unspecified, the currently-assumed role will be
used. This execution role is passed to the SageMaker service when
creating a SageMaker model from the specified MLflow model. It is
passed as the <code class="docutils literal notranslate"><span class="pre">ExecutionRoleArn</span></code> parameter of the <a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_CreateModel.html">SageMaker
CreateModel API call</a>. This role is <em>not</em> assumed for any other
call. For more information about SageMaker execution roles for model
creation, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html">https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html</a>.</p>
</p></li>
<li><p><strong>assume_role_arn</strong> – The name of an IAM cross-account role to be assumed to deploy SageMaker
to another AWS account. If unspecified, SageMaker will be deployed to
the the currently active AWS account.</p></li>
<li><p><strong>bucket</strong> – S3 bucket where model artifacts will be stored. Defaults to a
SageMaker-compatible bucket name.</p></li>
<li><p><strong>image_url</strong> – URL of the ECR-hosted Docker image the model should be deployed into, produced
by <code class="docutils literal notranslate"><span class="pre">mlflow</span> <span class="pre">sagemaker</span> <span class="pre">build-and-push-container</span></code>. This parameter can also
be specified by the environment variable <code class="docutils literal notranslate"><span class="pre">MLFLOW_SAGEMAKER_DEPLOY_IMG_URL</span></code>.</p></li>
<li><p><strong>region_name</strong> – Name of the AWS region to which to deploy the application.</p></li>
<li><p><strong>instance_type</strong> – The type of SageMaker ML instance on which to deploy the model. For a list
of supported instance types, see
<a class="reference external" href="https://aws.amazon.com/sagemaker/pricing/instance-types/">https://aws.amazon.com/sagemaker/pricing/instance-types/</a>.</p></li>
<li><p><strong>instance_count</strong> – The number of SageMaker ML instances on which to deploy the model.</p></li>
<li><p><strong>vpc_config</strong> – <p>A dictionary specifying the VPC configuration to use when creating the
new SageMaker model associated with this batch transform job. The acceptable
values for this parameter are identical to those of the <code class="docutils literal notranslate"><span class="pre">VpcConfig</span></code>
parameter in the <a class="reference external" href="https://boto3.readthedocs.io/en/latest/reference/services/sagemaker.html#SageMaker.Client.create_model">SageMaker boto3 client’s create_model method</a>. For more information, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html">https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html</a>.</p>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id23" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow.sagemaker</span> <span class="k">as</span> <span class="nn">mfs</span>

<span class="n">vpc_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;SecurityGroupIds&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;sg-123456abc&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Subnets&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;subnet-123456abc&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>
<span class="n">mfs</span><span class="o">.</span><span class="n">deploy_transform_job</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">vpc_config</span><span class="o">=</span><span class="n">vpc_config</span><span class="p">)</span>
</pre></div>
</div>
</div>
</p></li>
<li><p><strong>flavor</strong> – The name of the flavor of the model to use for deployment. Must be either
<code class="docutils literal notranslate"><span class="pre">None</span></code> or one of mlflow.sagemaker.SUPPORTED_DEPLOYMENT_FLAVORS. If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
a flavor is automatically selected from the model’s available flavors. If the
specified flavor is not present or not supported for deployment, an exception
will be thrown.</p></li>
<li><p><strong>archive</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, resources like Sagemaker models and model artifacts in S3 are
preserved after the finished batch transform job. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, these resources
are deleted. In order to use <code class="docutils literal notranslate"><span class="pre">archive=False</span></code>, <code class="docutils literal notranslate"><span class="pre">deploy_transform_job()</span></code> must
be executed synchronously with <code class="docutils literal notranslate"><span class="pre">synchronous=True</span></code>.</p></li>
<li><p><strong>synchronous</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, this function will block until the deployment process succeeds
or encounters an irrecoverable failure. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, this function will
return immediately after starting the deployment process. It will not wait
for the deployment process to complete; in this case, the caller is
responsible for monitoring the health and status of the pending deployment
via native SageMaker APIs or the AWS console.</p></li>
<li><p><strong>timeout_seconds</strong> – If <code class="docutils literal notranslate"><span class="pre">synchronous</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the deployment process will return after
the specified number of seconds if no definitive result (success or
failure) is achieved. Once the function returns, the caller is
responsible for monitoring the health and status of the pending
deployment using native SageMaker APIs or the AWS console. If
<code class="docutils literal notranslate"><span class="pre">synchronous</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, this parameter is ignored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.sagemaker.push_image_to_ecr">
<code class="sig-prename descclassname"><span class="pre">mlflow.sagemaker.</span></code><code class="sig-name descname"><span class="pre">push_image_to_ecr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mlflow-pyfunc'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#push_image_to_ecr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.push_image_to_ecr" title="Permalink to this definition"> </a></dt>
<dd><p>Push local Docker image to AWS ECR.</p>
<p>The image is pushed under currently active AWS account and to the currently active AWS region.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> – Docker image name.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.sagemaker.push_model_to_sagemaker">
<code class="sig-prename descclassname"><span class="pre">mlflow.sagemaker.</span></code><code class="sig-name descname"><span class="pre">push_model_to_sagemaker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_role_arn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assume_role_arn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'us-west-2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vpc_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#push_model_to_sagemaker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.push_model_to_sagemaker" title="Permalink to this definition"> </a></dt>
<dd><p>Create a SageMaker Model from an MLflow model artifact.
The currently active AWS account must have correct permissions set up.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> – Name of the Sagemaker model.</p></li>
<li><p><strong>model_uri</strong> – <p>The location, in URI format, of the MLflow model to deploy to SageMaker.
For example:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/Users/me/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relative/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3://my_bucket/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runs:/&lt;mlflow_run_id&gt;/run-relative/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;model_version&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;stage&gt;</span></code></p></li>
</ul>
<p>For more information about supported URI schemes, see
<a class="reference external" href="https://www.mlflow.org/docs/latest/concepts.html#artifact-locations">Referencing Artifacts</a>.</p>
</p></li>
<li><p><strong>execution_role_arn</strong> – <p>The name of an IAM role granting the SageMaker service permissions to
access the specified Docker image and S3 bucket containing MLflow
model artifacts. If unspecified, the currently-assumed role will be
used. This execution role is passed to the SageMaker service when
creating a SageMaker model from the specified MLflow model. It is
passed as the <code class="docutils literal notranslate"><span class="pre">ExecutionRoleArn</span></code> parameter of the <a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_CreateModel.html">SageMaker
CreateModel API call</a>. This role is <em>not</em> assumed for any other
call. For more information about SageMaker execution roles for model
creation, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html">https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html</a>.</p>
</p></li>
<li><p><strong>assume_role_arn</strong> – The name of an IAM cross-account role to be assumed to deploy SageMaker
to another AWS account. If unspecified, SageMaker will be deployed to
the the currently active AWS account.</p></li>
<li><p><strong>bucket</strong> – S3 bucket where model artifacts will be stored. Defaults to a
SageMaker-compatible bucket name.</p></li>
<li><p><strong>image_url</strong> – URL of the ECR-hosted Docker image the model should be deployed into, produced
by <code class="docutils literal notranslate"><span class="pre">mlflow</span> <span class="pre">sagemaker</span> <span class="pre">build-and-push-container</span></code>. This parameter can also
be specified by the environment variable <code class="docutils literal notranslate"><span class="pre">MLFLOW_SAGEMAKER_DEPLOY_IMG_URL</span></code>.</p></li>
<li><p><strong>region_name</strong> – Name of the AWS region to which to deploy the application.</p></li>
<li><p><strong>vpc_config</strong> – <p>A dictionary specifying the VPC configuration to use when creating the
new SageMaker model. The acceptable values for this parameter are identical
to those of the <code class="docutils literal notranslate"><span class="pre">VpcConfig</span></code> parameter in the <a class="reference external" href="https://boto3.readthedocs.io/en/latest/reference/services/sagemaker.html#SageMaker.Client.create_model">SageMaker boto3 client’s
create_model method</a>. For more information, see
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html">https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html</a>.</p>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id24" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow.sagemaker</span> <span class="k">as</span> <span class="nn">mfs</span>

<span class="n">vpc_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;SecurityGroupIds&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;sg-123456abc&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s2">&quot;Subnets&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;subnet-123456abc&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">}</span>
<span class="n">mfs</span><span class="o">.</span><span class="n">push_model_to_sagemaker</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">vpc_config</span><span class="o">=</span><span class="n">vpc_config</span><span class="p">)</span>
</pre></div>
</div>
</div>
</p></li>
<li><p><strong>flavor</strong> – The name of the flavor of the model to use for deployment. Must be either
<code class="docutils literal notranslate"><span class="pre">None</span></code> or one of mlflow.sagemaker.SUPPORTED_DEPLOYMENT_FLAVORS. If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
a flavor is automatically selected from the model’s available flavors. If the
specified flavor is not present or not supported for deployment, an exception
will be thrown.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.sagemaker.run_local">
<code class="sig-prename descclassname"><span class="pre">mlflow.sagemaker.</span></code><code class="sig-name descname"><span class="pre">run_local</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#run_local"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.run_local" title="Permalink to this definition"> </a></dt>
<dd><p>Serve the model locally in a SageMaker compatible Docker container.</p>
<p>Note that models deployed locally cannot be managed by other deployment APIs
(e.g. <code class="docutils literal notranslate"><span class="pre">update_deployment</span></code>, <code class="docutils literal notranslate"><span class="pre">delete_deployment</span></code>, etc).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the local serving application.</p></li>
<li><p><strong>model_uri</strong> – <p>The location, in URI format, of the MLflow model to deploy locally.
For example:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/Users/me/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relative/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3://my_bucket/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runs:/&lt;mlflow_run_id&gt;/run-relative/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;model_version&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;stage&gt;</span></code></p></li>
</ul>
<p>For more information about supported URI schemes, see
<a class="reference external" href="https://www.mlflow.org/docs/latest/concepts.html#artifact-locations">Referencing Artifacts</a>.</p>
</p></li>
<li><p><strong>flavor</strong> – The name of the flavor of the model to use for deployment. Must be either
<code class="docutils literal notranslate"><span class="pre">None</span></code> or one of mlflow.sagemaker.SUPPORTED_DEPLOYMENT_FLAVORS.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, a flavor is automatically selected from the model’s available
flavors. If the specified flavor is not present or not supported for
deployment, an exception will be thrown.</p></li>
<li><p><strong>config</strong> – <p>Configuration parameters. The supported parameters are:</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">image</span></code>: The name of the Docker image to use for model serving. Defaults</dt><dd><p>to <code class="docutils literal notranslate"><span class="pre">&quot;mlflow-pyfunc&quot;</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code>: The port at which to expose the model server on the local host.</dt><dd><p>Defaults to <code class="docutils literal notranslate"><span class="pre">5000</span></code>.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">Python example</span><a class="headerlink" href="#id25" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.models</span> <span class="kn">import</span> <span class="n">build_docker</span>
<span class="kn">from</span> <span class="nn">mlflow.deployments</span> <span class="kn">import</span> <span class="n">get_deploy_client</span>

<span class="n">build_docker</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mlflow-pyfunc&quot;</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">get_deploy_client</span><span class="p">(</span><span class="s2">&quot;sagemaker&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">run_local</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-local-deployment&quot;</span><span class="p">,</span>
    <span class="n">model_uri</span><span class="o">=</span><span class="s2">&quot;/mlruns/0/abc/model&quot;</span><span class="p">,</span>
    <span class="n">flavor</span><span class="o">=</span><span class="s2">&quot;python_function&quot;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;mlflow-pyfunc&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">Command-line example</span><a class="headerlink" href="#id26" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlflow<span class="w"> </span>models<span class="w"> </span>build-docker<span class="w"> </span>--name<span class="w"> </span><span class="s2">&quot;mlflow-pyfunc&quot;</span>
mlflow<span class="w"> </span>deployments<span class="w"> </span>run-local<span class="w"> </span>--target<span class="w"> </span>sagemaker<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--name<span class="w"> </span>my-local-deployment<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--model-uri<span class="w"> </span><span class="s2">&quot;/mlruns/0/abc/model&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--flavor<span class="w"> </span>python_function<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">port</span><span class="o">=</span><span class="m">5000</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-C<span class="w"> </span><span class="nv">image</span><span class="o">=</span><span class="s2">&quot;mlflow-pyfunc&quot;</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mlflow.sagemaker.target_help">
<code class="sig-prename descclassname"><span class="pre">mlflow.sagemaker.</span></code><code class="sig-name descname"><span class="pre">target_help</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#target_help"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.target_help" title="Permalink to this definition"> </a></dt>
<dd><p>Provide help information for the SageMaker deployment client.</p>
</dd></dl>

<dl class="py function">
<dt id="mlflow.sagemaker.terminate_transform_job">
<code class="sig-prename descclassname"><span class="pre">mlflow.sagemaker.</span></code><code class="sig-name descname"><span class="pre">terminate_transform_job</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'us-west-2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assume_role_arn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">archive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">synchronous</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/sagemaker.html#terminate_transform_job"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.sagemaker.terminate_transform_job" title="Permalink to this definition"> </a></dt>
<dd><p>Terminate a SageMaker batch transform job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_name</strong> – Name of the deployed Sagemaker batch transform job.</p></li>
<li><p><strong>region_name</strong> – Name of the AWS region in which the batch transform job is deployed.</p></li>
<li><p><strong>assume_role_arn</strong> – The name of an IAM cross-account role to be assumed to deploy SageMaker
to another AWS account. If unspecified, SageMaker will be deployed to
the the currently active AWS account.</p></li>
<li><p><strong>archive</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, resources associated with the specified batch transform job,
such as its associated models and model artifacts, are preserved.
If <code class="docutils literal notranslate"><span class="pre">False</span></code>, these resources are deleted. In order to use <code class="docutils literal notranslate"><span class="pre">archive=False</span></code>,
<code class="docutils literal notranslate"><span class="pre">terminate_transform_job()</span></code> must be executed synchronously
with <code class="docutils literal notranslate"><span class="pre">synchronous=True</span></code>.</p></li>
<li><p><strong>synchronous</strong> – If <cite>True</cite>, this function blocks until the termination process succeeds
or encounters an irrecoverable failure. If <cite>False</cite>, this function
returns immediately after starting the termination process. It will not
wait for the termination process to complete; in this case, the caller is
responsible for monitoring the status of the termination process via native
SageMaker APIs or the AWS console.</p></li>
<li><p><strong>timeout_seconds</strong> – If <cite>synchronous</cite> is <cite>True</cite>, the termination process returns after the
specified number of seconds if no definitive result (success or failure)
is achieved. Once the function returns, the caller is responsible
for monitoring the status of the termination process via native
SageMaker APIs or the AWS console. If <cite>synchronous</cite> is False, this
parameter is ignored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mlflow.recipes.html" class="btn btn-neutral" title="mlflow.recipes" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="mlflow.sentence_transformers.html" class="btn btn-neutral" title="mlflow.sentence_transformers" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; MLflow Project, a Series of LF Projects, LLC. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'../',
      VERSION:'2.17.1.dev0',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      LINK_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "../_static/clippy.svg";</script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  

  
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
        // Get the code block designator class entries
        const allHighlights = document.querySelectorAll('.highlight');
        // Disable copyable links for notebook cell numbering and for cell outputs
        const highlights = Array.from(allHighlights).filter(highlight => !highlight.closest('.highlight-none') && 
            !highlight.closest('.nboutput'));
    
        highlights.forEach(function(highlight) {
            const copyIcon = document.createElement('span');
            copyIcon.classList.add('copy-icon');
            copyIcon.innerHTML = '&#xf0ea;';

            copyIcon.addEventListener('click', function() {
                const code = highlight.querySelector('pre').textContent;
                copyToClipboard(code);

                // Flash effect on click
                this.style.color = '#0194E2';
                setTimeout(() => {
                    this.style.color = ''; 
                }, 100);

                // Display "Code copied to clipboard" near the clicked icon
                const message = document.createElement('span');
                message.textContent = "Copied!";
                message.classList.add('copy-message'); 

                // Append the message to the icon
                this.appendChild(message);

                setTimeout(() => {
                    this.removeChild(message);
                }, 500);
            });

            highlight.appendChild(copyIcon);
        });
    });
  </script>


<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        // Force download for notebook-download-btn
        const downloadButtons = document.querySelectorAll('.notebook-download-btn');
        downloadButtons.forEach(function(button) {
            button.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default behavior

                // Fetch the raw content of the notebook from GitHub
                fetch(button.href)
                    .then(response => response.blob())
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.style.display = 'none';
                        link.href = url;
                        const filename = button.href.split('/').pop();
                        link.download = filename; 

                        document.body.appendChild(link);
                        link.click();

                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(link);
                    })
                    .catch(err => console.error('Error fetching the notebook:', err));
            });
        });
    });
</script> 
</body>
</html>