

<!DOCTYPE html>
<!-- source: docs/source/python_api/mlflow.models.rst -->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mlflow.models</title>
  
   
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="canonical" href="https://mlflow.org/docs/latest/python_api/mlflow.models.html">
  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    

    

  
    

  

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/cards.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/grids.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/mobile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/simple-cards.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/tabs.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MLflow 2.17.1.dev0 documentation" href="../index.html"/>
        <link rel="up" title="Python API" href="index.html"/>
        <link rel="next" title="mlflow.onnx" href="/mlflow.onnx.html"/>
        <link rel="prev" title="mlflow.mleap" href="/mlflow.mleap.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>
<script type="text/javascript" src="../_static/jquery.js"></script>
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="../_static/languagesections.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script type="text/javascript" src="../_static/runllm.js"></script>

<body class="wy-body-for-nav" role="document">
  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <ul>
  <li class="menu-toggle">
    <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
    <a href="../index.html" class="wy-nav-top-logo"
      ><img src="../_static/MLflow-logo-final-black.png" alt="MLflow"
    /></a>
    <span class="version">2.17.1.dev0</span>
  </li>
</ul>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side relative">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
  </form>
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home"><img src="../_static/icons/nav-home.svg"> MLflow</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mlflow.html">mlflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.html#mlflow-tracing-apis">MLflow Tracing APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.artifacts.html">mlflow.artifacts</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.autogen.html">mlflow.autogen</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.catboost.html">mlflow.catboost</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.client.html">mlflow.client</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.config.html">mlflow.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.data.html">mlflow.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.deployments.html">mlflow.deployments</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.diviner.html">mlflow.diviner</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.dspy.html">mlflow.dspy</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.entities.html">mlflow.entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.environment_variables.html">mlflow.environment_variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.fastai.html">mlflow.fastai</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.gateway.html">mlflow.gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.gluon.html">mlflow.gluon</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.h2o.html">mlflow.h2o</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.johnsnowlabs.html">mlflow.johnsnowlabs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.keras.html">mlflow.keras</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.langchain.html">mlflow.langchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.lightgbm.html">mlflow.lightgbm</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.llama_index.html">mlflow.llama_index</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.metrics.html">mlflow.metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.mleap.html">mlflow.mleap</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">mlflow.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.onnx.html">mlflow.onnx</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.openai.html">mlflow.openai</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.paddle.html">mlflow.paddle</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pmdarima.html">mlflow.pmdarima</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.projects.html">mlflow.projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.promptflow.html">mlflow.promptflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.prophet.html">mlflow.prophet</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pyfunc.html">mlflow.pyfunc</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pyspark.ml.html">mlflow.pyspark.ml</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pytorch.html">mlflow.pytorch</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.recipes.html">mlflow.recipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sagemaker.html">mlflow.sagemaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sentence_transformers.html">mlflow.sentence_transformers</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.server.html">mlflow.server</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.shap.html">mlflow.shap</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sklearn.html">mlflow.sklearn</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.spacy.html">mlflow.spacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.spark.html">mlflow.spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.statsmodels.html">mlflow.statsmodels</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.system_metrics.html">mlflow.system_metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tensorflow.html">mlflow.tensorflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tracing.html">mlflow.tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.transformers.html">mlflow.transformers</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.types.html">mlflow.types</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.utils.html">mlflow.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.xgboost.html">mlflow.xgboost</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#log-levels">Log Levels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../R-api.html">R API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java_api/index.html">Java API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest-api.html">REST API</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
        <li><a href="index.html">Python API</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>mlflow.models</li>
    
    
    <!-- <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/mlflow/mlflow/blob/master/docs/source/python_api/mlflow.models.rst" class="fa fa-github"> Edit on GitHub</a>
    </li> -->
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="module-mlflow.models">
<span id="mlflow-models"></span><h1>mlflow.models<a class="headerlink" href="#module-mlflow.models" title="Permalink to this headline"> </a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">mlflow.models</span></code> module provides an API for saving machine learning models in
“flavors” that can be understood by different downstream tools.</p>
<p>The built-in flavors are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="mlflow.catboost.html#module-mlflow.catboost" title="mlflow.catboost"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.catboost</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.diviner.html#module-mlflow.diviner" title="mlflow.diviner"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.diviner</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.fastai.html#module-mlflow.fastai" title="mlflow.fastai"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.fastai</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.gluon.html#module-mlflow.gluon" title="mlflow.gluon"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.gluon</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.h2o.html#module-mlflow.h2o" title="mlflow.h2o"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.h2o</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.langchain.html#module-mlflow.langchain" title="mlflow.langchain"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.langchain</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.lightgbm.html#module-mlflow.lightgbm" title="mlflow.lightgbm"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.lightgbm</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.mleap.html#module-mlflow.mleap" title="mlflow.mleap"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.mleap</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.onnx.html#module-mlflow.onnx" title="mlflow.onnx"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.onnx</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.openai.html#module-mlflow.openai" title="mlflow.openai"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.openai</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.paddle.html#module-mlflow.paddle" title="mlflow.paddle"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.paddle</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.pmdarima.html#module-mlflow.pmdarima" title="mlflow.pmdarima"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.pmdarima</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.prophet.html#module-mlflow.prophet" title="mlflow.prophet"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.prophet</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.pyfunc.html#module-mlflow.pyfunc" title="mlflow.pyfunc"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.pyfunc</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.pyspark.ml.html#module-mlflow.pyspark.ml" title="mlflow.pyspark.ml"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.pyspark.ml</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.pytorch.html#module-mlflow.pytorch" title="mlflow.pytorch"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.pytorch</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.sklearn.html#module-mlflow.sklearn" title="mlflow.sklearn"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.sklearn</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.spacy.html#module-mlflow.spacy" title="mlflow.spacy"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.spacy</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.spark.html#module-mlflow.spark" title="mlflow.spark"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.spark</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.statsmodels.html#module-mlflow.statsmodels" title="mlflow.statsmodels"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.statsmodels</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.tensorflow.html#module-mlflow.tensorflow" title="mlflow.tensorflow"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.tensorflow</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.transformers.html#module-mlflow.transformers" title="mlflow.transformers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.transformers</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.xgboost.html#module-mlflow.xgboost" title="mlflow.xgboost"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.xgboost</span></code></a></p></li>
</ul>
<p>For details, see <a class="reference external" href="../models.html">MLflow Models</a>.</p>
<dl class="py class">
<dt id="mlflow.models.EvaluationArtifact">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">EvaluationArtifact</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/base.html#EvaluationArtifact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.EvaluationArtifact" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A model evaluation artifact containing an artifact uri and content.</p>
<dl class="py method">
<dt id="mlflow.models.EvaluationArtifact.content">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">content</span></code><a class="headerlink" href="#mlflow.models.EvaluationArtifact.content" title="Permalink to this definition"> </a></dt>
<dd><p>The content of the artifact (representation varies)</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.EvaluationArtifact.uri">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">uri</span></code><a class="headerlink" href="#mlflow.models.EvaluationArtifact.uri" title="Permalink to this definition"> </a></dt>
<dd><p>The URI of the artifact</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mlflow.models.EvaluationMetric">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">EvaluationMetric</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eval_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">greater_is_better</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genai_metric_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/base.html#EvaluationMetric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.EvaluationMetric" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An evaluation metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eval_fn</strong> – <p>A function that computes the metric with the following signature:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">eval_fn</span><span class="p">(</span>
    <span class="n">predictions</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">targets</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">metrics</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetricValue</span><span class="p">],</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">MetricValue</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        predictions: A pandas Series containing the predictions made by the model.</span>
<span class="sd">        targets: (Optional) A pandas Series containing the corresponding labels</span>
<span class="sd">            for the predictions made on that input.</span>
<span class="sd">        metrics: (Optional) A dictionary containing the metrics calculated by the</span>
<span class="sd">            default evaluator.  The keys are the names of the metrics and the values</span>
<span class="sd">            are the metric values.  To access the MetricValue for the metrics</span>
<span class="sd">            calculated by the system, make sure to specify the type hint for this</span>
<span class="sd">            parameter as Dict[str, MetricValue].  Refer to the DefaultEvaluator</span>
<span class="sd">            behavior section for what metrics will be returned based on the type of</span>
<span class="sd">            model (i.e. classifier or regressor).</span>
<span class="sd">        kwargs: Includes a list of args that are used to compute the metric. These</span>
<span class="sd">            args could be information coming from input data, model outputs,</span>
<span class="sd">            other metrics, or parameters specified in the `evaluator_config`</span>
<span class="sd">            argument of the `mlflow.evaluate` API.</span>

<span class="sd">    Returns: MetricValue with per-row scores, per-row justifications, and aggregate</span>
<span class="sd">        results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
</p></li>
<li><p><strong>name</strong> – The name of the metric.</p></li>
<li><p><strong>greater_is_better</strong> – Whether a higher value of the metric is better.</p></li>
<li><p><strong>long_name</strong> – (Optional) The long name of the metric. For example,
<code class="docutils literal notranslate"><span class="pre">&quot;root_mean_squared_error&quot;</span></code> for <code class="docutils literal notranslate"><span class="pre">&quot;mse&quot;</span></code>.</p></li>
<li><p><strong>version</strong> – (Optional) The metric version. For example <code class="docutils literal notranslate"><span class="pre">v1</span></code>.</p></li>
<li><p><strong>metric_details</strong> – (Optional) A description of the metric and how it is calculated.</p></li>
<li><p><strong>metric_metadata</strong> – (Optional) A dictionary containing metadata for the metric.</p></li>
<li><p><strong>genai_metric_args</strong> – (Optional) A dictionary containing arguments specified by users
when calling make_genai_metric or make_genai_metric_from_prompt. Those args
are persisted so that we can deserialize the same metric object later.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="mlflow.models.EvaluationResult">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">EvaluationResult</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metrics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">artifacts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/base.html#EvaluationResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.EvaluationResult" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents the model evaluation outputs of a <cite>mlflow.evaluate()</cite> API call, containing
both scalar metrics and output artifacts such as performance plots.</p>
<dl class="py method">
<dt id="mlflow.models.EvaluationResult.artifacts">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">artifacts</span></code><a class="headerlink" href="#mlflow.models.EvaluationResult.artifacts" title="Permalink to this definition"> </a></dt>
<dd><p>A dictionary mapping standardized artifact names (e.g. “roc_data”) to
artifact content and location information</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.EvaluationResult.load">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">load</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/base.html#EvaluationResult.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.EvaluationResult.load" title="Permalink to this definition"> </a></dt>
<dd><p>Load the evaluation results from the specified local filesystem path</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.EvaluationResult.metrics">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">metrics</span></code><a class="headerlink" href="#mlflow.models.EvaluationResult.metrics" title="Permalink to this definition"> </a></dt>
<dd><p>A dictionary mapping scalar metric names to scalar metric values</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.EvaluationResult.save">
<code class="sig-name descname"><span class="pre">save</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/base.html#EvaluationResult.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.EvaluationResult.save" title="Permalink to this definition"> </a></dt>
<dd><p>Write the evaluation results to the specified local filesystem path</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.EvaluationResult.tables">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">tables</span></code><a class="headerlink" href="#mlflow.models.EvaluationResult.tables" title="Permalink to this definition"> </a></dt>
<dd><p>A dictionary mapping standardized artifact names (e.g. “eval_results_table”) to
corresponding table content as pandas DataFrame.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This property may change or be removed in a future release without warning.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mlflow.models.FlavorBackend">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">FlavorBackend</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/flavor_backend.html#FlavorBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.FlavorBackend" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Abstract class for Flavor Backend.
This class defines the API interface for local model deployment of MLflow model flavors.</p>
<dl class="py method">
<dt id="mlflow.models.FlavorBackend.build_image">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">build_image</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">install_mlflow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlflow_home</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_mlserver</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/flavor_backend.html#FlavorBackend.build_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.FlavorBackend.build_image" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mlflow.models.FlavorBackend.can_build_image">
<code class="sig-name descname"><span class="pre">can_build_image</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/flavor_backend.html#FlavorBackend.can_build_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.FlavorBackend.can_build_image" title="Permalink to this definition"> </a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if this flavor has a <cite>build_image</cite> method defined for building a docker
container capable of serving the model, False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.FlavorBackend.can_score_model">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">can_score_model</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/flavor_backend.html#FlavorBackend.can_score_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.FlavorBackend.can_score_model" title="Permalink to this definition"> </a></dt>
<dd><p>Check whether this flavor backend can be deployed in the current environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if this flavor backend can be applied in the current environment.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.FlavorBackend.generate_dockerfile">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">generate_dockerfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">install_mlflow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlflow_home</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_mlserver</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/flavor_backend.html#FlavorBackend.generate_dockerfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.FlavorBackend.generate_dockerfile" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mlflow.models.FlavorBackend.predict">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">predict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/flavor_backend.html#FlavorBackend.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.FlavorBackend.predict" title="Permalink to this definition"> </a></dt>
<dd><p>Generate predictions using a saved MLflow model referenced by the given URI.
Input and output are read from and written to a file or stdin / stdout.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_uri</strong> – URI pointing to the MLflow model to be used for scoring.</p></li>
<li><p><strong>input_path</strong> – Path to the file with input data. If not specified, data is read from
stdin.</p></li>
<li><p><strong>output_path</strong> – Path to the file with output predictions. If not specified, data is
written to stdout.</p></li>
<li><p><strong>content_type</strong> – Specifies the input format. Can be one of {<code class="docutils literal notranslate"><span class="pre">json</span></code>, <code class="docutils literal notranslate"><span class="pre">csv</span></code>}</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.FlavorBackend.prepare_env">
<code class="sig-name descname"><span class="pre">prepare_env</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/flavor_backend.html#FlavorBackend.prepare_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.FlavorBackend.prepare_env" title="Permalink to this definition"> </a></dt>
<dd><p>Performs any preparation necessary to predict or serve the model, for example
downloading dependencies or initializing a conda environment. After preparation,
calling predict or serve should be fast.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.FlavorBackend.serve">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">serve</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_mlserver</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">synchronous</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stderr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/flavor_backend.html#FlavorBackend.serve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.FlavorBackend.serve" title="Permalink to this definition"> </a></dt>
<dd><p>Serve the specified MLflow model locally.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_uri</strong> – URI pointing to the MLflow model to be used for scoring.</p></li>
<li><p><strong>port</strong> – Port to use for the model deployment.</p></li>
<li><p><strong>host</strong> – Host to use for the model deployment. Defaults to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>.</p></li>
<li><p><strong>timeout</strong> – Timeout in seconds to serve a request. Defaults to 60.</p></li>
<li><p><strong>enable_mlserver</strong> – Whether to use MLServer or the local scoring server.</p></li>
<li><p><strong>synchronous</strong> – If True, wait until server process exit and return 0, if process exit
with non-zero return code, raise exception.
If False, return the server process <cite>Popen</cite> instance immediately.</p></li>
<li><p><strong>stdout</strong> – Redirect server stdout</p></li>
<li><p><strong>stderr</strong> – Redirect server stderr</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mlflow.models.MetricThreshold">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">MetricThreshold</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_absolute_change</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_relative_change</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">greater_is_better</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">higher_is_better</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/validation.html#MetricThreshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.MetricThreshold" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class allows you to define metric thresholds for model validation.
Allowed thresholds are: threshold, min_absolute_change, min_relative_change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threshold</strong> – <p>(Optional) A number representing the value threshold for the metric.</p>
<ul>
<li><p>If higher is better for the metric, the metric value has to be
&gt;= threshold to pass validation.</p></li>
<li><p>Otherwise, the metric value has to be &lt;= threshold to pass the validation.</p></li>
</ul>
</p></li>
<li><p><strong>min_absolute_change</strong> – <p>(Optional) A positive number representing the minimum absolute
change required for candidate model to pass validation with
the baseline model.</p>
<ul>
<li><p>If higher is better for the metric, metric value has to be
&gt;= baseline model metric value + min_absolute_change to pass the validation.</p></li>
<li><p>Otherwise, metric value has to be &lt;= baseline model metric value - min_absolute_change
to pass the validation.</p></li>
</ul>
</p></li>
<li><p><strong>min_relative_change</strong> – <p>(Optional) A floating point number between 0 and 1 representing
the minimum relative change (in percentage of
baseline model metric value) for candidate model
to pass the comparison with the baseline model.</p>
<ul>
<li><p>If higher is better for the metric, metric value has to be
&gt;= baseline model metric value * (1 + min_relative_change)</p></li>
<li><p>Otherwise, metric value has to be
&lt;= baseline model metric value * (1 - min_relative_change)</p></li>
<li><p>Note that if the baseline model metric value is equal to 0, the
threshold falls back performing a simple verification that the
candidate metric value is better than the baseline metric value,
i.e. metric value &gt;= baseline model metric value + 1e-10 if higher
is better; metric value &lt;= baseline model metric value - 1e-10 if
lower is better.</p></li>
</ul>
</p></li>
<li><p><strong>greater_is_better</strong> – A required boolean representing whether higher value is
better for the metric.</p></li>
<li><p><strong>higher_is_better</strong> – <div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.3.0: </span>Use <code class="docutils literal notranslate"><span class="pre">greater_is_better</span></code> instead.</p>
</div>
<p>A required boolean representing whether higher value is better for the metric.</p>
</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mlflow.models.MetricThreshold.greater_is_better">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">greater_is_better</span></code><a class="headerlink" href="#mlflow.models.MetricThreshold.greater_is_better" title="Permalink to this definition"> </a></dt>
<dd><p>Boolean value representing whether higher value is better for the metric.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.MetricThreshold.higher_is_better">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">higher_is_better</span></code><a class="headerlink" href="#mlflow.models.MetricThreshold.higher_is_better" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">mlflow.models.evaluation.validation.MetricThreshold.higher_is_better</span></code> is deprecated. This method will be removed in a future release. Use <code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">attribute</span> <span class="pre">`higher_is_better`</span> <span class="pre">is</span> <span class="pre">deprecated.</span> <span class="pre">Use</span> <span class="pre">`greater_is_better`</span> <span class="pre">instead.</span></code> instead.</p>
</div>
<p>Boolean value representing whether higher value is better for the metric.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.MetricThreshold.min_absolute_change">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">min_absolute_change</span></code><a class="headerlink" href="#mlflow.models.MetricThreshold.min_absolute_change" title="Permalink to this definition"> </a></dt>
<dd><p>Value of the minimum absolute change required to pass model comparison with baseline model.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.MetricThreshold.min_relative_change">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">min_relative_change</span></code><a class="headerlink" href="#mlflow.models.MetricThreshold.min_relative_change" title="Permalink to this definition"> </a></dt>
<dd><p>Float value of the minimum relative change required to pass model comparison with
baseline model.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.MetricThreshold.threshold">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">threshold</span></code><a class="headerlink" href="#mlflow.models.MetricThreshold.threshold" title="Permalink to this definition"> </a></dt>
<dd><p>Value of the threshold.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mlflow.models.Model">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">Model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">artifact_path=None</span></em>, <em class="sig-param"><span class="pre">run_id=None</span></em>, <em class="sig-param"><span class="pre">utc_time_created=None</span></em>, <em class="sig-param"><span class="pre">flavors=None</span></em>, <em class="sig-param"><span class="pre">signature=None</span></em>, <em class="sig-param"><span class="pre">saved_input_example_info:</span> <span class="pre">Optional[Dict[str</span></em>, <em class="sig-param"><span class="pre">Any]]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">model_uuid:</span> <span class="pre">Optional[Union[str</span></em>, <em class="sig-param"><span class="pre">Callable]]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">Model.&lt;lambda&gt;&gt;</span></em>, <em class="sig-param"><span class="pre">mlflow_version:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">'2.17.1.dev0'</span></em>, <em class="sig-param"><span class="pre">metadata:</span> <span class="pre">Optional[Dict[str</span></em>, <em class="sig-param"><span class="pre">Any]]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">model_size_bytes:</span> <span class="pre">Optional[int]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">resources:</span> <span class="pre">Optional[Union[str</span></em>, <em class="sig-param"><span class="pre">List[mlflow.models.resources.Resource]]]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">**kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An MLflow Model that can support multiple model flavors. Provides APIs for implementing
new Model flavors.</p>
<dl class="py method">
<dt id="mlflow.models.Model.add_flavor">
<code class="sig-name descname"><span class="pre">add_flavor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.add_flavor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.add_flavor" title="Permalink to this definition"> </a></dt>
<dd><p>Add an entry for how to serve the model in a given format.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.from_dict" title="Permalink to this definition"> </a></dt>
<dd><p>Load a model from its YAML representation.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.get_input_schema">
<code class="sig-name descname"><span class="pre">get_input_schema</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.get_input_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.get_input_schema" title="Permalink to this definition"> </a></dt>
<dd><p>Retrieves the input schema of the Model iff the model was saved with a schema definition.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.get_model_info">
<code class="sig-name descname"><span class="pre">get_model_info</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.get_model_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.get_model_info" title="Permalink to this definition"> </a></dt>
<dd><p>Create a <a class="reference internal" href="#mlflow.models.model.ModelInfo" title="mlflow.models.model.ModelInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInfo</span></code></a> instance that contains the
model metadata.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.get_output_schema">
<code class="sig-name descname"><span class="pre">get_output_schema</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.get_output_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.get_output_schema" title="Permalink to this definition"> </a></dt>
<dd><p>Retrieves the output schema of the Model iff the model was saved with a schema definition.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.get_params_schema">
<code class="sig-name descname"><span class="pre">get_params_schema</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.get_params_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.get_params_schema" title="Permalink to this definition"> </a></dt>
<dd><p>Retrieves the parameters schema of the Model iff the model was saved with a schema
definition.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.get_serving_input">
<code class="sig-name descname"><span class="pre">get_serving_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.get_serving_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.get_serving_input" title="Permalink to this definition"> </a></dt>
<dd><p>Load serving input example from a model directory. Returns None if there is no serving input
example.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – Path to the model directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Serving input example or None if the model has no serving input example.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.get_tags_dict">
<code class="sig-name descname"><span class="pre">get_tags_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.get_tags_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.get_tags_dict" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.load">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">load</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.load" title="Permalink to this definition"> </a></dt>
<dd><p>Load a model from its YAML representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – A local filesystem path or URI referring to the MLmodel YAML file
representation of the Model object or to the directory containing
the MLmodel YAML file representation.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of Model.</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">example</span><a class="headerlink" href="#id17" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.models</span> <span class="kn">import</span> <span class="n">Model</span>

<span class="c1"># Load the Model object from a local MLmodel file</span>
<span class="n">model1</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;~/path/to/my/MLmodel&quot;</span><span class="p">)</span>

<span class="c1"># Load the Model object from a remote model directory</span>
<span class="n">model2</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;s3://mybucket/path/to/my/model&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.load_input_example">
<code class="sig-name descname"><span class="pre">load_input_example</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.load_input_example"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.load_input_example" title="Permalink to this definition"> </a></dt>
<dd><p>Load the input example saved along a model. Returns None if there is no example metadata
(i.e. the model was saved without example). Raises FileNotFoundError if there is model
metadata but the example file is missing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – Path to the model directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Input example (NumPy ndarray, SciPy csc_matrix, SciPy csr_matrix,
pandas DataFrame, dict) or None if the model has no example.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.load_input_example_params">
<code class="sig-name descname"><span class="pre">load_input_example_params</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.load_input_example_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.load_input_example_params" title="Permalink to this definition"> </a></dt>
<dd><p>Load the params of input example saved along a model. Returns None if there are no params in
the input_example.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – Path to the model directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>params (dict) or None if the model has no params.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.log">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">log</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">artifact_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">await_registration_for</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.log" title="Permalink to this definition"> </a></dt>
<dd><p>Log model using supplied flavor module. If no run is active, this method will create a new
active run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>artifact_path</strong> – Run relative path identifying the model.</p></li>
<li><p><strong>flavor</strong> – Flavor module to save the model with. The module must have
the <code class="docutils literal notranslate"><span class="pre">save_model</span></code> function that will persist the model as a valid
MLflow model.</p></li>
<li><p><strong>registered_model_name</strong> – If given, create a model version under
<code class="docutils literal notranslate"><span class="pre">registered_model_name</span></code>, also creating a registered model if
one with the given name does not exist.</p></li>
<li><p><strong>await_registration_for</strong> – Number of seconds to wait for the model version to finish
being created and is in <code class="docutils literal notranslate"><span class="pre">READY</span></code> status. By default, the
function waits for five minutes. Specify 0 or None to skip
waiting.</p></li>
<li><p><strong>metadata</strong> – {{ metadata }}</p></li>
<li><p><strong>run_id</strong> – The run ID to associate with this model. If not provided,
a new run will be started.</p></li>
<li><p><strong>resources</strong> – {{ resources }}</p></li>
<li><p><strong>kwargs</strong> – Extra args passed to the model flavor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#mlflow.models.model.ModelInfo" title="mlflow.models.model.ModelInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInfo</span></code></a> instance that contains the
metadata of the logged model.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.metadata">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">metadata</span></code><a class="headerlink" href="#mlflow.models.Model.metadata" title="Permalink to this definition"> </a></dt>
<dd><p>Custom metadata dictionary passed to the model and stored in the MLmodel file.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Retrieves custom metadata that have been applied to a model instance.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Sets a dictionary of custom keys and values to be included with the model instance</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Dict[str, Any]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Dictionary of user-defined metadata iff defined.</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id18" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create and log a model with metadata to the Model Registry</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">from</span> <span class="nn">mlflow.models</span> <span class="kn">import</span> <span class="n">infer_signature</span>

<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">iris</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_iris</span><span class="p">()</span>
    <span class="n">clf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">()</span>
    <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">infer_signature</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span>
        <span class="n">clf</span><span class="p">,</span>
        <span class="s2">&quot;iris_rf&quot;</span><span class="p">,</span>
        <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span>
        <span class="n">registered_model_name</span><span class="o">=</span><span class="s2">&quot;model-with-metadata&quot;</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;metadata_key&quot;</span><span class="p">:</span> <span class="s2">&quot;metadata_value&quot;</span><span class="p">},</span>
    <span class="p">)</span>

<span class="c1"># model uri for the above model</span>
<span class="n">model_uri</span> <span class="o">=</span> <span class="s2">&quot;models:/model-with-metadata/1&quot;</span>

<span class="c1"># Load the model and access the custom metadata</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">model_uri</span><span class="o">=</span><span class="n">model_uri</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;metadata_key&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;metadata_value&quot;</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This property may change or be removed in a future release without warning.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.model_size_bytes">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">model_size_bytes</span></code><a class="headerlink" href="#mlflow.models.Model.model_size_bytes" title="Permalink to this definition"> </a></dt>
<dd><p>An optional integer that represents the model size in bytes</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Retrieves the model size if it’s calculated when the model is saved</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Sets the model size to a model instance</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.resources">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">resources</span></code><a class="headerlink" href="#mlflow.models.Model.resources" title="Permalink to this definition"> </a></dt>
<dd><p>An optional dictionary that contains the resources required to serve the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Retrieves the resources required to serve the model</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Sets the resources required to serve the model</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[str, Dict[<a class="reference internal" href="#mlflow.models.ResourceType" title="mlflow.models.ResourceType">ResourceType</a>, List[Dict]]]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This property may change or be removed in a future release without warning.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.save">
<code class="sig-name descname"><span class="pre">save</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.save" title="Permalink to this definition"> </a></dt>
<dd><p>Write the model as a local YAML file.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.saved_input_example_info">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">saved_input_example_info</span></code><a class="headerlink" href="#mlflow.models.Model.saved_input_example_info" title="Permalink to this definition"> </a></dt>
<dd><p>A dictionary that contains the metadata of the saved input example, e.g.,
<code class="docutils literal notranslate"><span class="pre">{&quot;artifact_path&quot;:</span> <span class="pre">&quot;input_example.json&quot;,</span> <span class="pre">&quot;type&quot;:</span> <span class="pre">&quot;dataframe&quot;,</span> <span class="pre">&quot;pandas_orient&quot;:</span> <span class="pre">&quot;split&quot;}</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.signature">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">signature</span></code><a class="headerlink" href="#mlflow.models.Model.signature" title="Permalink to this definition"> </a></dt>
<dd><p>An optional definition of the expected inputs to and outputs from a model object, defined
with both field names and data types. Signatures support both column-based and tensor-based
inputs and outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Retrieves the signature of a model instance iff the model was saved with a
signature definition.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Sets a signature to a model instance.</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#mlflow.models.ModelSignature" title="mlflow.models.ModelSignature">ModelSignature</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.to_dict">
<code class="sig-name descname"><span class="pre">to_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.to_dict" title="Permalink to this definition"> </a></dt>
<dd><p>Serialize the model to a dictionary.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.to_json">
<code class="sig-name descname"><span class="pre">to_json</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.to_json" title="Permalink to this definition"> </a></dt>
<dd><p>Write the model as json.</p>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.Model.to_yaml">
<code class="sig-name descname"><span class="pre">to_yaml</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#Model.to_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Model.to_yaml" title="Permalink to this definition"> </a></dt>
<dd><p>Write the model as yaml string.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mlflow.models.ModelConfig">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">ModelConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">development_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model_config.html#ModelConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.ModelConfig" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>ModelConfig used in code to read a YAML configuration file, and this configuration file can be
overridden when logging a model.</p>
<dl class="py method">
<dt id="mlflow.models.ModelConfig.get">
<code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model_config.html#ModelConfig.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.ModelConfig.get" title="Permalink to this definition"> </a></dt>
<dd><p>Gets the value of a top-level parameter in the configuration.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mlflow.models.ModelSignature">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">ModelSignature</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">mlflow.types.schema.Schema</span><span class="p"><span class="pre">,</span> </span><span class="pre">dataclasses.dataclass</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">mlflow.types.schema.Schema</span><span class="p"><span class="pre">,</span> </span><span class="pre">dataclasses.dataclass</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">mlflow.types.schema.ParamSchema</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/signature.html#ModelSignature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.ModelSignature" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>ModelSignature specifies schema of model’s inputs, outputs and params.</p>
<p>ModelSignature can be <a class="reference internal" href="#mlflow.models.infer_signature" title="mlflow.models.infer_signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inferred</span></code></a> from training
dataset, model predictions using and params for inference, or constructed by hand by
passing an input and output <a class="reference internal" href="mlflow.types.html#mlflow.types.Schema" title="mlflow.types.Schema"><code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code></a>, and params
<a class="reference internal" href="mlflow.types.html#mlflow.types.ParamSchema" title="mlflow.types.ParamSchema"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParamSchema</span></code></a>.</p>
<dl class="py method">
<dt id="mlflow.models.ModelSignature.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signature_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/signature.html#ModelSignature.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.ModelSignature.from_dict" title="Permalink to this definition"> </a></dt>
<dd><p>Deserialize from dictionary representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>signature_dict</strong> – Dictionary representation of model signature.
Expected dictionary format:
<cite>{‘inputs’: &lt;json string&gt;,
‘outputs’: &lt;json string&gt;,
‘params’: &lt;json string&gt;” }</cite></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ModelSignature populated with the data form the dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.ModelSignature.to_dict">
<code class="sig-name descname"><span class="pre">to_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/mlflow/models/signature.html#ModelSignature.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.ModelSignature.to_dict" title="Permalink to this definition"> </a></dt>
<dd><p>Serialize into a ‘jsonable’ dictionary.</p>
<p>Input and output schema are represented as json strings. This is so that the
representation is compact when embedded in an MLmodel yaml file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dictionary representation with input and output schema represented as json strings.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mlflow.models.Resource">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">Resource</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">mlflow.models.resources.ResourceType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/resources.html#Resource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Resource" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Base class for defining the resources needed to serve a model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type</strong> (<a class="reference internal" href="#mlflow.models.ResourceType" title="mlflow.models.ResourceType"><em>ResourceType</em></a>) – The resource type.</p></li>
<li><p><strong>target_uri</strong> (<em>str</em>) – The target URI where these resources are hosted.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mlflow.models.Resource.from_dict">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_dict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/resources.html#Resource.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Resource.from_dict" title="Permalink to this definition"> </a></dt>
<dd><p>Convert the dictionary to a Resource.
Subclasses must implement this method.</p>
</dd></dl>

<dl class="py attribute">
<dt id="mlflow.models.Resource.target_uri">
<code class="sig-name descname"><span class="pre">target_uri</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.models.Resource.target_uri" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mlflow.models.Resource.to_dict">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">to_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/resources.html#Resource.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.Resource.to_dict" title="Permalink to this definition"> </a></dt>
<dd><p>Convert the resource to a dictionary.
Subclasses must implement this method.</p>
</dd></dl>

<dl class="py attribute">
<dt id="mlflow.models.Resource.type">
<code class="sig-name descname"><span class="pre">type</span></code><em class="property"><span class="pre">:</span> <span class="pre">mlflow.models.resources.ResourceType</span></em><a class="headerlink" href="#mlflow.models.Resource.type" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mlflow.models.ResourceType">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">ResourceType</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/resources.html#ResourceType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.ResourceType" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Enum to define the different types of resources needed to serve a model.</p>
<dl class="py attribute">
<dt id="mlflow.models.ResourceType.FUNCTION">
<code class="sig-name descname"><span class="pre">FUNCTION</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'function'</span></em><a class="headerlink" href="#mlflow.models.ResourceType.FUNCTION" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="mlflow.models.ResourceType.SERVING_ENDPOINT">
<code class="sig-name descname"><span class="pre">SERVING_ENDPOINT</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'serving_endpoint'</span></em><a class="headerlink" href="#mlflow.models.ResourceType.SERVING_ENDPOINT" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="mlflow.models.ResourceType.SQL_WAREHOUSE">
<code class="sig-name descname"><span class="pre">SQL_WAREHOUSE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'sql_warehouse'</span></em><a class="headerlink" href="#mlflow.models.ResourceType.SQL_WAREHOUSE" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="mlflow.models.ResourceType.VECTOR_SEARCH_INDEX">
<code class="sig-name descname"><span class="pre">VECTOR_SEARCH_INDEX</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'vector_search_index'</span></em><a class="headerlink" href="#mlflow.models.ResourceType.VECTOR_SEARCH_INDEX" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mlflow.models.add_libraries_to_model">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">add_libraries_to_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/utils.html#add_libraries_to_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.add_libraries_to_model" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Given a registered model_uri (e.g. models:/&lt;model_name&gt;/&lt;model_version&gt;), this utility
re-logs the model along with all the required model libraries back to the Model Registry.
The required model libraries are stored along with the model as model artifacts. In
addition, supporting files to the model (e.g. conda.yaml, requirements.txt) are modified
to use the added libraries.</p>
<p>By default, this utility creates a new model version under the same registered model specified
by <code class="docutils literal notranslate"><span class="pre">model_uri</span></code>. This behavior can be overridden by specifying the <code class="docutils literal notranslate"><span class="pre">registered_model_name</span></code>
argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_uri</strong> – A registered model uri in the Model Registry of the form
models:/&lt;model_name&gt;/&lt;model_version/stage/latest&gt;</p></li>
<li><p><strong>run_id</strong> – The ID of the run to which the model with libraries is logged. If None, the model
with libraries is logged to the source run corresponding to model version
specified by <code class="docutils literal notranslate"><span class="pre">model_uri</span></code>; if the model version does not have a source run, a
new run created.</p></li>
<li><p><strong>registered_model_name</strong> – The new model version (model with its libraries) is
registered under the inputted registered_model_name. If None, a
new version is logged to the existing model in the Model Registry.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This utility only operates on a model that has been registered to the Model Registry.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The libraries are only compatible with the platform on which they are added. Cross platform
libraries are not supported.</p>
</div>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id19" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create and log a model to the Model Registry</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">import</span> <span class="nn">mlflow.sklearn</span>
<span class="kn">from</span> <span class="nn">mlflow.models</span> <span class="kn">import</span> <span class="n">infer_signature</span>

<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">iris</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_iris</span><span class="p">()</span>
    <span class="n">iris_train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">iris</span><span class="o">.</span><span class="n">feature_names</span><span class="p">)</span>
    <span class="n">clf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">iris_train</span><span class="p">,</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">infer_signature</span><span class="p">(</span><span class="n">iris_train</span><span class="p">,</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">iris_train</span><span class="p">))</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span>
        <span class="n">clf</span><span class="p">,</span> <span class="s2">&quot;iris_rf&quot;</span><span class="p">,</span> <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span> <span class="n">registered_model_name</span><span class="o">=</span><span class="s2">&quot;model-with-libs&quot;</span>
    <span class="p">)</span>

<span class="c1"># model uri for the above model</span>
<span class="n">model_uri</span> <span class="o">=</span> <span class="s2">&quot;models:/model-with-libs/1&quot;</span>

<span class="c1"># Import utility</span>
<span class="kn">from</span> <span class="nn">mlflow.models.utils</span> <span class="kn">import</span> <span class="n">add_libraries_to_model</span>

<span class="c1"># Log libraries to the original run of the model</span>
<span class="n">add_libraries_to_model</span><span class="p">(</span><span class="n">model_uri</span><span class="p">)</span>

<span class="c1"># Log libraries to some run_id</span>
<span class="n">existing_run_id</span> <span class="o">=</span> <span class="s2">&quot;21df94e6bdef4631a9d9cb56f211767f&quot;</span>
<span class="n">add_libraries_to_model</span><span class="p">(</span><span class="n">model_uri</span><span class="p">,</span> <span class="n">run_id</span><span class="o">=</span><span class="n">existing_run_id</span><span class="p">)</span>

<span class="c1"># Log libraries to a new run</span>
<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">add_libraries_to_model</span><span class="p">(</span><span class="n">model_uri</span><span class="p">)</span>

<span class="c1"># Log libraries to a new registered model named &#39;new-model&#39;</span>
<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">add_libraries_to_model</span><span class="p">(</span><span class="n">model_uri</span><span class="p">,</span> <span class="n">registered_model_name</span><span class="o">=</span><span class="s2">&quot;new-model&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.build_docker">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">build_docker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mlflow-pyfunc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'virtualenv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlflow_home</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">install_java</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">install_mlflow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_mlserver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/python_api.html#build_docker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.build_docker" title="Permalink to this definition"> </a></dt>
<dd><p>Builds a Docker image whose default entrypoint serves an MLflow model at port 8080, using the
python_function flavor. The container serves the model referenced by <code class="docutils literal notranslate"><span class="pre">model_uri</span></code>, if
specified. If <code class="docutils literal notranslate"><span class="pre">model_uri</span></code> is not specified, an MLflow Model directory must be mounted as a
volume into the /opt/ml/model directory in the container.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Since MLflow 2.10.1, the Docker image built with <code class="docutils literal notranslate"><span class="pre">--model-uri</span></code> does <strong>not install Java</strong>
for improved performance, unless the model flavor is one of <code class="docutils literal notranslate"><span class="pre">[&quot;johnsnowlabs&quot;,</span> <span class="pre">&quot;h2o&quot;,</span>
<span class="pre">&quot;mleap&quot;,</span> <span class="pre">&quot;spark&quot;]</span></code>. If you need to install Java for other flavors, e.g. custom Python model
that uses SparkML, please specify <code class="docutils literal notranslate"><span class="pre">install-java=True</span></code> to enforce Java installation.
For earlier versions, Java is always installed to the image.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If <code class="docutils literal notranslate"><span class="pre">model_uri</span></code> is unspecified, the resulting image doesn’t support serving models with
the RFunc or Java MLeap model servers.</p>
</div>
<p>NB: by default, the container will start nginx and gunicorn processes. If you don’t need the
nginx process to be started (for instance if you deploy your container to Google Cloud Run),
you can disable it via the DISABLE_NGINX environment variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">5001</span>:8080<span class="w"> </span>-e<span class="w"> </span><span class="nv">DISABLE_NGINX</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="s2">&quot;my-image-name&quot;</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://www.mlflow.org/docs/latest/python_api/mlflow.pyfunc.html">https://www.mlflow.org/docs/latest/python_api/mlflow.pyfunc.html</a> for more information on the
‘python_function’ flavor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_uri</strong> – URI to the model. A local path, a ‘runs:/’ URI, or a remote storage URI (e.g.,
an ‘s3://’ URI). For more information about supported remote URIs for model artifacts,
see https://mlflow.org/docs/latest/tracking.html#artifact-stores”</p></li>
<li><p><strong>name</strong> – Name of the Docker image to build. Defaults to ‘mlflow-pyfunc’.</p></li>
<li><p><strong>env_manager</strong> – If specified, create an environment for MLmodel using the specified environment
manager. The following values are supported: (1) virtualenv (default): use virtualenv
and pyenv for Python version management (2) conda: use conda (3) local: use the local
environment without creating a new one.</p></li>
<li><p><strong>mlflow_home</strong> – Path to local clone of MLflow project. Use for development only.</p></li>
<li><p><strong>install_java</strong> – If specified, install Java in the image. Default is False in order to
reduce both the image size and the build time. Model flavors requiring Java will enable
this setting automatically, such as the Spark flavor. (This argument is only available
in MLflow 2.10.1 and later. In earlier versions, Java is always installed to the image.)</p></li>
<li><p><strong>install_mlflow</strong> – If specified and there is a conda or virtualenv environment to be activated
mlflow will be installed into the environment after it has been activated.
The version of installed mlflow will be the same as the one used to invoke this command.</p></li>
<li><p><strong>enable_mlserver</strong> – If specified, the image will be built with the Seldon MLserver as backend.</p></li>
<li><p><strong>base_image</strong> – Base image for the Docker image. If not specified, the default image is either
UBUNTU_BASE_IMAGE = “ubuntu:20.04” or PYTHON_SLIM_BASE_IMAGE = “python:{version}-slim”
Note: If custom image is used, there are no guarantees that the image will work. You
may find greater compatibility by building your image on top of the ubuntu images. In
addition, you must install Java and virtualenv to have the image work properly.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.convert_input_example_to_serving_input">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">convert_input_example_to_serving_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_example</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/mlflow/models/utils.html#convert_input_example_to_serving_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.convert_input_example_to_serving_input" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Helper function to convert a model’s input example to a serving input example that
can be used for model inference in the scoring server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_example</strong> – model input example. Supported types are pandas.DataFrame, numpy.ndarray,
dictionary of (name -&gt; numpy.ndarray), list, scalars and dicts with json serializable
values.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>serving input example as a json string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.evaluate">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">evaluate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evaluator_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_artifacts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_thresholds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'local'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inference_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/base.html#evaluate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.evaluate" title="Permalink to this definition"> </a></dt>
<dd><p>Evaluate the model performance on given data and selected metrics.</p>
<p>This function evaluates a PyFunc model or custom callable on the specified dataset using
specified <code class="docutils literal notranslate"><span class="pre">evaluators</span></code>, and logs resulting metrics &amp; artifacts to MLflow tracking server.
Users can also skip setting <code class="docutils literal notranslate"><span class="pre">model</span></code> and put the model outputs in <code class="docutils literal notranslate"><span class="pre">data</span></code> directly for
evaluation. For detailed information, please read
<span class="xref std std-ref">the Model Evaluation documentation</span>.</p>
<dl class="simple">
<dt>Default Evaluator behavior:</dt><dd><ul class="simple">
<li><p>The default evaluator, which can be invoked with <code class="docutils literal notranslate"><span class="pre">evaluators=&quot;default&quot;</span></code> or
<code class="docutils literal notranslate"><span class="pre">evaluators=None</span></code>, supports model types listed below. For each pre-defined model type, the
default evaluator evaluates your model on a selected set of metrics and generate artifacts
like plots. Please find more details below.</p></li>
<li><p>For both the <code class="docutils literal notranslate"><span class="pre">&quot;regressor&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;classifier&quot;</span></code> model types, the default evaluator
generates model summary plots and feature importance plots using
<a class="reference external" href="https://shap.readthedocs.io/en/latest/index.html">SHAP</a>.</p></li>
<li><dl class="simple">
<dt>For regressor models, the default evaluator additionally logs:</dt><dd><ul>
<li><p><strong>metrics</strong>: example_count, mean_absolute_error, mean_squared_error,
root_mean_squared_error, sum_on_target, mean_on_target, r2_score, max_error,
mean_absolute_percentage_error.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>For binary classifiers, the default evaluator additionally logs:</dt><dd><ul>
<li><p><strong>metrics</strong>: true_negatives, false_positives, false_negatives, true_positives, recall,
precision, f1_score, accuracy_score, example_count, log_loss, roc_auc,
precision_recall_auc.</p></li>
<li><p><strong>artifacts</strong>: lift curve plot, precision-recall plot, ROC plot.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>For multiclass classifiers, the default evaluator additionally logs:</dt><dd><ul>
<li><p><strong>metrics</strong>: accuracy_score, example_count, f1_score_micro, f1_score_macro, log_loss</p></li>
<li><p><strong>artifacts</strong>: A CSV file for “per_class_metrics” (per-class metrics includes
true_negatives/false_positives/false_negatives/true_positives/recall/precision/roc_auc,
precision_recall_auc), precision-recall merged curves plot, ROC merged curves plot.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>For question-answering models, the default evaluator logs:</dt><dd><ul>
<li><p><strong>metrics</strong>: <code class="docutils literal notranslate"><span class="pre">exact_match</span></code>, <code class="docutils literal notranslate"><span class="pre">token_count</span></code>, <a class="reference external" href="https://huggingface.co/spaces/evaluate-measurement/toxicity">toxicity</a> (requires <a class="reference external" href="https://pypi.org/project/evaluate">evaluate</a>,
<a class="reference external" href="https://pytorch.org/get-started/locally/">torch</a>, <a class="reference external" href="https://en.wikipedia.org/wiki/Flesch%E2%80%93Kincaid_readability_tests#Flesch%E2%80%93Kincaid_grade_level">flesch_kincaid_grade_level</a> (requires <a class="reference external" href="https://pypi.org/project/textstat">textstat</a>) and <a class="reference external" href="https://en.wikipedia.org/wiki/Automated_readability_index">ari_grade_level</a>.</p></li>
<li><p><strong>artifacts</strong>: A JSON file containing the inputs, outputs, targets (if the <code class="docutils literal notranslate"><span class="pre">targets</span></code>
argument is supplied), and per-row metrics of the model in tabular format.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>For text-summarization models, the default evaluator logs:</dt><dd><ul>
<li><p><strong>metrics</strong>: <code class="docutils literal notranslate"><span class="pre">token_count</span></code>, <a class="reference external" href="https://huggingface.co/spaces/evaluate-metric/rouge">ROUGE</a> (requires <a class="reference external" href="https://pypi.org/project/evaluate">evaluate</a>, <a class="reference external" href="https://pypi.org/project/nltk">nltk</a>, and
<a class="reference external" href="https://pypi.org/project/rouge-score">rouge_score</a> to be installed), <a class="reference external" href="https://huggingface.co/spaces/evaluate-measurement/toxicity">toxicity</a> (requires <a class="reference external" href="https://pypi.org/project/evaluate">evaluate</a>, <a class="reference external" href="https://pytorch.org/get-started/locally/">torch</a>,
<a class="reference external" href="https://huggingface.co/docs/transformers/installation">transformers</a>), <a class="reference external" href="https://en.wikipedia.org/wiki/Automated_readability_index">ari_grade_level</a> (requires <a class="reference external" href="https://pypi.org/project/textstat">textstat</a>),
<a class="reference external" href="https://en.wikipedia.org/wiki/Flesch%E2%80%93Kincaid_readability_tests#Flesch%E2%80%93Kincaid_grade_level">flesch_kincaid_grade_level</a> (requires <a class="reference external" href="https://pypi.org/project/textstat">textstat</a>).</p></li>
<li><p><strong>artifacts</strong>: A JSON file containing the inputs, outputs, targets (if the <code class="docutils literal notranslate"><span class="pre">targets</span></code>
argument is supplied), and per-row metrics of the model in the tabular format.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>For text models, the default evaluator logs:</dt><dd><ul>
<li><p><strong>metrics</strong>: <code class="docutils literal notranslate"><span class="pre">token_count</span></code>, <a class="reference external" href="https://huggingface.co/spaces/evaluate-measurement/toxicity">toxicity</a> (requires <a class="reference external" href="https://pypi.org/project/evaluate">evaluate</a>, <a class="reference external" href="https://pytorch.org/get-started/locally/">torch</a>,
<a class="reference external" href="https://huggingface.co/docs/transformers/installation">transformers</a>), <a class="reference external" href="https://en.wikipedia.org/wiki/Automated_readability_index">ari_grade_level</a> (requires <a class="reference external" href="https://pypi.org/project/textstat">textstat</a>),
<a class="reference external" href="https://en.wikipedia.org/wiki/Flesch%E2%80%93Kincaid_readability_tests#Flesch%E2%80%93Kincaid_grade_level">flesch_kincaid_grade_level</a> (requires <a class="reference external" href="https://pypi.org/project/textstat">textstat</a>).</p></li>
<li><p><strong>artifacts</strong>: A JSON file containing the inputs, outputs, targets (if the <code class="docutils literal notranslate"><span class="pre">targets</span></code>
argument is supplied), and per-row metrics of the model in tabular format.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>For retriever models, the default evaluator logs:</dt><dd><ul>
<li><p><strong>metrics</strong>: <a class="reference internal" href="mlflow.metrics.html#mlflow.metrics.precision_at_k" title="mlflow.metrics.precision_at_k"><code class="xref py py-mod docutils literal notranslate"><span class="pre">precision_at_k(k)</span></code></a>,
<a class="reference internal" href="mlflow.metrics.html#mlflow.metrics.recall_at_k" title="mlflow.metrics.recall_at_k"><code class="xref py py-mod docutils literal notranslate"><span class="pre">recall_at_k(k)</span></code></a> and
<a class="reference internal" href="mlflow.metrics.html#mlflow.metrics.ndcg_at_k" title="mlflow.metrics.ndcg_at_k"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndcg_at_k(k)</span></code></a> - all have a default value of
<code class="docutils literal notranslate"><span class="pre">retriever_k</span></code> = 3.</p></li>
<li><p><strong>artifacts</strong>: A JSON file containing the inputs, outputs, targets, and per-row metrics
of the model in tabular format.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>For sklearn models, the default evaluator additionally logs the model’s evaluation criterion
(e.g. mean accuracy for a classifier) computed by <cite>model.score</cite> method.</p></li>
<li><p>The metrics/artifacts listed above are logged to the active MLflow run.
If no active run exists, a new MLflow run is created for logging these metrics and
artifacts.</p></li>
<li><p>Additionally, information about the specified dataset - hash, name (if specified), path
(if specified), and the UUID of the model that evaluated it - is logged to the
<code class="docutils literal notranslate"><span class="pre">mlflow.datasets</span></code> tag.</p></li>
<li><dl class="simple">
<dt>The available <code class="docutils literal notranslate"><span class="pre">evaluator_config</span></code> options for the default evaluator include:</dt><dd><ul>
<li><p><strong>log_model_explainability</strong>: A boolean value specifying whether or not to log model
explainability insights, default value is True.</p></li>
<li><p><strong>explainability_algorithm</strong>: A string to specify the SHAP Explainer algorithm for model
explainability. Supported algorithm includes: ‘exact’, ‘permutation’, ‘partition’,
‘kernel’.
If not set, <code class="docutils literal notranslate"><span class="pre">shap.Explainer</span></code> is used with the “auto” algorithm, which chooses the best
Explainer based on the model.</p></li>
<li><p><strong>explainability_nsamples</strong>: The number of sample rows to use for computing model
explainability insights. Default value is 2000.</p></li>
<li><p><strong>explainability_kernel_link</strong>: The kernel link function used by shap kernal explainer.
Available values are “identity” and “logit”. Default value is “identity”.</p></li>
<li><p><strong>max_classes_for_multiclass_roc_pr</strong>:
For multiclass classification tasks, the maximum number of classes for which to log
the per-class ROC curve and Precision-Recall curve. If the number of classes is
larger than the configured maximum, these curves are not logged.</p></li>
<li><p><strong>metric_prefix</strong>: An optional prefix to prepend to the name of each metric and artifact
produced during evaluation.</p></li>
<li><p><strong>log_metrics_with_dataset_info</strong>: A boolean value specifying whether or not to include
information about the evaluation dataset in the name of each metric logged to MLflow
Tracking during evaluation, default value is True.</p></li>
<li><p><strong>pos_label</strong>: If specified, the positive label to use when computing classification
metrics such as precision, recall, f1, etc. for binary classification models. For
multiclass classification and regression models, this parameter will be ignored.</p></li>
<li><p><strong>average</strong>: The averaging method to use when computing classification metrics such as
precision, recall, f1, etc. for multiclass classification models
(default: <code class="docutils literal notranslate"><span class="pre">'weighted'</span></code>). For binary classification and regression models, this
parameter will be ignored.</p></li>
<li><p><strong>sample_weights</strong>: Weights for each sample to apply when computing model performance
metrics.</p></li>
<li><p><strong>col_mapping</strong>: A dictionary mapping column names in the input dataset or output
predictions to column names used when invoking the evaluation functions.</p></li>
<li><p><strong>retriever_k</strong>: A parameter used when <code class="docutils literal notranslate"><span class="pre">model_type=&quot;retriever&quot;</span></code> as the number of
top-ranked retrieved documents to use when computing the built-in metric
<a class="reference internal" href="mlflow.metrics.html#mlflow.metrics.precision_at_k" title="mlflow.metrics.precision_at_k"><code class="xref py py-mod docutils literal notranslate"><span class="pre">precision_at_k(k)</span></code></a>,
<a class="reference internal" href="mlflow.metrics.html#mlflow.metrics.recall_at_k" title="mlflow.metrics.recall_at_k"><code class="xref py py-mod docutils literal notranslate"><span class="pre">recall_at_k(k)</span></code></a> and
<a class="reference internal" href="mlflow.metrics.html#mlflow.metrics.ndcg_at_k" title="mlflow.metrics.ndcg_at_k"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndcg_at_k(k)</span></code></a>. Default value is 3. For all other
model types, this parameter will be ignored.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Limitations of evaluation dataset:</dt><dd><ul>
<li><p>For classification tasks, dataset labels are used to infer the total number of classes.</p></li>
<li><p>For binary classification tasks, the negative label value must be 0 or -1 or False, and
the positive label value must be 1 or True.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Limitations of metrics/artifacts computation:</dt><dd><ul>
<li><p>For classification tasks, some metric and artifact computations require the model to
output class probabilities. Currently, for scikit-learn models, the default evaluator
calls the <code class="docutils literal notranslate"><span class="pre">predict_proba</span></code> method on the underlying model to obtain probabilities. For
other model types, the default evaluator does not compute metrics/artifacts that require
probability outputs.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Limitations of default evaluator logging model explainability insights:</dt><dd><ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">shap.Explainer</span></code> <code class="docutils literal notranslate"><span class="pre">auto</span></code> algorithm uses the <code class="docutils literal notranslate"><span class="pre">Linear</span></code> explainer for linear models
and the <code class="docutils literal notranslate"><span class="pre">Tree</span></code> explainer for tree models. Because SHAP’s <code class="docutils literal notranslate"><span class="pre">Linear</span></code> and <code class="docutils literal notranslate"><span class="pre">Tree</span></code>
explainers do not support multi-class classification, the default evaluator falls back to
using the <code class="docutils literal notranslate"><span class="pre">Exact</span></code> or <code class="docutils literal notranslate"><span class="pre">Permutation</span></code> explainers for multi-class classification tasks.</p></li>
<li><p>Logging model explainability insights is not currently supported for PySpark models.</p></li>
<li><p>The evaluation dataset label values must be numeric or boolean, all feature values
must be numeric, and each feature column must only contain scalar values.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Limitations when environment restoration is enabled:</dt><dd><ul>
<li><p>When environment restoration is enabled for the evaluated model (i.e. a non-local
<code class="docutils literal notranslate"><span class="pre">env_manager</span></code> is specified), the model is loaded as a client that invokes a MLflow
Model Scoring Server process in an independent Python environment with the model’s
training time dependencies installed. As such, methods like <code class="docutils literal notranslate"><span class="pre">predict_proba</span></code> (for
probability outputs) or <code class="docutils literal notranslate"><span class="pre">score</span></code> (computes the evaluation criterian for sklearn models)
of the model become inaccessible and the default evaluator does not compute metrics or
artifacts that require those methods.</p></li>
<li><p>Because the model is an MLflow Model Server process, SHAP explanations are slower to
compute. As such, model explainaibility is disabled when a non-local <code class="docutils literal notranslate"><span class="pre">env_manager</span></code>
specified, unless the <code class="docutils literal notranslate"><span class="pre">evaluator_config</span></code> option <strong>log_model_explainability</strong> is
explicitly set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – <p>Optional. If specified, it should be one of the following:</p>
<ul>
<li><p>A pyfunc model instance</p></li>
<li><p>A URI referring to a pyfunc model</p></li>
<li><p>A URI referring to an MLflow Deployments endpoint e.g. <code class="docutils literal notranslate"><span class="pre">&quot;endpoints:/my-chat&quot;</span></code></p></li>
<li><p>A callable function: This function should be able to take in model input and
return predictions. It should follow the signature of the
<a class="reference internal" href="mlflow.pyfunc.html#mlflow.pyfunc.PyFuncModel.predict" title="mlflow.pyfunc.PyFuncModel.predict"><code class="xref py py-func docutils literal notranslate"><span class="pre">predict</span></code></a> method. Here’s an example
of a valid function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">model_uri</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">fn</span><span class="p">(</span><span class="n">model_input</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">model_input</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>If omitted, it indicates a static dataset will be used for evaluation instead of a
model.  In this case, the <code class="docutils literal notranslate"><span class="pre">data</span></code> argument must be a Pandas DataFrame or an mlflow
PandasDataset that contains model outputs, and the <code class="docutils literal notranslate"><span class="pre">predictions</span></code> argument must be the
name of the column in <code class="docutils literal notranslate"><span class="pre">data</span></code> that contains model outputs.</p>
</p></li>
<li><p><strong>data</strong> – <p>One of the
following:</p>
<ul>
<li><p>A numpy array or list of evaluation features, excluding labels.</p></li>
<li><dl class="simple">
<dt>A Pandas DataFrame containing evaluation features, labels, and optionally model</dt><dd><p>outputs. Model outputs are required to be provided when model is unspecified.
If <code class="docutils literal notranslate"><span class="pre">feature_names</span></code> argument not specified, all columns except for the label
column and model_output column are regarded as feature columns. Otherwise,
only column names present in <code class="docutils literal notranslate"><span class="pre">feature_names</span></code> are regarded as feature columns.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>A Spark DataFrame containing evaluation features and labels. If</dt><dd><p><code class="docutils literal notranslate"><span class="pre">feature_names</span></code> argument not specified, all columns except for the label
column are regarded as feature columns. Otherwise, only column names present in
<code class="docutils literal notranslate"><span class="pre">feature_names</span></code> are regarded as feature columns. Only the first 10000 rows in
the Spark DataFrame will be used as evaluation data.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>A <a class="reference internal" href="mlflow.data.html#mlflow.data.dataset.Dataset" title="mlflow.data.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.data.dataset.Dataset</span></code></a> instance containing evaluation</dt><dd><p>features, labels, and optionally model outputs. Model outputs are only supported
with a PandasDataset. Model outputs are required when model is unspecified, and
should be specified via the <code class="docutils literal notranslate"><span class="pre">predictions</span></code> prerty of the PandasDataset.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>model_type</strong> – <p>(Optional) A string describing the model type. The default evaluator
supports the following model types:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'classifier'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'regressor'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'question-answering'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'text-summarization'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'text'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'retriever'</span></code></p></li>
</ul>
<p>If no <code class="docutils literal notranslate"><span class="pre">model_type</span></code> is specified, then you must provide a a list of
metrics to compute via the <code class="docutils literal notranslate"><span class="pre">extra_metrics</span></code> param.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">'question-answering'</span></code>, <code class="docutils literal notranslate"><span class="pre">'text-summarization'</span></code>, <code class="docutils literal notranslate"><span class="pre">'text'</span></code>, and
<code class="docutils literal notranslate"><span class="pre">'retriever'</span></code> are experimental and may be changed or removed in a
future release.</p>
</div>
</p></li>
<li><p><strong>targets</strong> – If <code class="docutils literal notranslate"><span class="pre">data</span></code> is a numpy array or list, a numpy array or list of evaluation
labels. If <code class="docutils literal notranslate"><span class="pre">data</span></code> is a DataFrame, the string name of a column from <code class="docutils literal notranslate"><span class="pre">data</span></code>
that contains evaluation labels. Required for classifier and regressor models,
but optional for question-answering, text-summarization, and text models. If
<code class="docutils literal notranslate"><span class="pre">data</span></code> is a <a class="reference internal" href="mlflow.data.html#mlflow.data.dataset.Dataset" title="mlflow.data.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.data.dataset.Dataset</span></code></a> that defines targets,
then <code class="docutils literal notranslate"><span class="pre">targets</span></code> is optional.</p></li>
<li><p><strong>predictions</strong> – <p>Optional. The name of the column that contains model outputs.</p>
<ul>
<li><p>When <code class="docutils literal notranslate"><span class="pre">model</span></code> is specified and outputs multiple columns, <code class="docutils literal notranslate"><span class="pre">predictions</span></code> can be used
to specify the name of the column that will be used to store model outputs for
evaluation.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">model</span></code> is not specified and <code class="docutils literal notranslate"><span class="pre">data</span></code> is a pandas dataframe,
<code class="docutils literal notranslate"><span class="pre">predictions</span></code> can be used to specify the name of the column in <code class="docutils literal notranslate"><span class="pre">data</span></code> that
contains model outputs.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">Example usage of predictions</span><a class="headerlink" href="#id20" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Evaluate a model that outputs multiple columns</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">]})</span>


<span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="n">inputs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;answer&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;baz&quot;</span><span class="p">]})</span>


<span class="n">results</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">predictions</span><span class="o">=</span><span class="s2">&quot;answer&quot;</span><span class="p">,</span>
    <span class="c1"># other arguments if needed</span>
<span class="p">)</span>

<span class="c1"># Evaluate a static dataset</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">],</span> <span class="s2">&quot;answer&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;baz&quot;</span><span class="p">]})</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">predictions</span><span class="o">=</span><span class="s2">&quot;answer&quot;</span><span class="p">,</span>
    <span class="c1"># other arguments if needed</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</p></li>
<li><p><strong>dataset_path</strong> – (Optional) The path where the data is stored. Must not contain double
quotes (<code class="docutils literal notranslate"><span class="pre">“</span></code>). If specified, the path is logged to the <code class="docutils literal notranslate"><span class="pre">mlflow.datasets</span></code>
tag for lineage tracking purposes.</p></li>
<li><p><strong>feature_names</strong> – (Optional) A list. If the <code class="docutils literal notranslate"><span class="pre">data</span></code> argument is a numpy array or list,
<code class="docutils literal notranslate"><span class="pre">feature_names</span></code> is a list of the feature names for each feature. If
<code class="docutils literal notranslate"><span class="pre">feature_names=None</span></code>, then the <code class="docutils literal notranslate"><span class="pre">feature_names</span></code> are generated using the
format <code class="docutils literal notranslate"><span class="pre">feature_{feature_index}</span></code>. If the <code class="docutils literal notranslate"><span class="pre">data</span></code> argument is a Pandas
DataFrame or a Spark DataFrame, <code class="docutils literal notranslate"><span class="pre">feature_names</span></code> is a list of the names
of the feature columns in the DataFrame. If <code class="docutils literal notranslate"><span class="pre">feature_names=None</span></code>, then
all columns except the label column and the predictions column are
regarded as feature columns.</p></li>
<li><p><strong>evaluators</strong> – The name of the evaluator to use for model evaluation, or a list of
evaluator names. If unspecified, all evaluators capable of evaluating the
specified model on the specified dataset are used. The default evaluator
can be referred to by the name <code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code>. To see all available
evaluators, call <a class="reference internal" href="#mlflow.models.list_evaluators" title="mlflow.models.list_evaluators"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.models.list_evaluators()</span></code></a>.</p></li>
<li><p><strong>evaluator_config</strong> – A dictionary of additional configurations to supply to the evaluator.
If multiple evaluators are specified, each configuration should be
supplied as a nested dictionary whose key is the evaluator name.</p></li>
<li><p><strong>custom_metrics</strong> – Deprecated. Use <code class="docutils literal notranslate"><span class="pre">extra_metrics</span></code> instead.</p></li>
<li><p><strong>extra_metrics</strong> – <p>(Optional) A list of <a class="reference internal" href="#mlflow.models.EvaluationMetric" title="mlflow.models.EvaluationMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvaluationMetric</span></code></a>
objects.  These metrics are computed in addition to the default metrics associated with
pre-defined <cite>model_type</cite>, and setting <cite>model_type=None</cite> will only compute the metrics
specified in <cite>extra_metrics</cite>. See the <cite>mlflow.metrics</cite> module for more information about
the builtin metrics and how to define extra metrics.</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">Example usage of extra metrics</span><a class="headerlink" href="#id21" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">def</span> <span class="nf">root_mean_squared_error</span><span class="p">(</span><span class="n">eval_df</span><span class="p">,</span> <span class="n">_builtin_metrics</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">eval_df</span><span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">eval_df</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>


<span class="n">rmse_metric</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">make_metric</span><span class="p">(</span>
    <span class="n">eval_fn</span><span class="o">=</span><span class="n">root_mean_squared_error</span><span class="p">,</span>
    <span class="n">greater_is_better</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">extra_metrics</span><span class="o">=</span><span class="p">[</span><span class="n">rmse_metric</span><span class="p">])</span>
</pre></div>
</div>
</div>
</p></li>
<li><p><strong>custom_artifacts</strong> – <p>(Optional) A list of custom artifact functions with the following signature:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">custom_artifact</span><span class="p">(</span>
    <span class="n">eval_df</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pandas</span><span class="o">.</span><span class="n">Dataframe</span><span class="p">,</span> <span class="n">pyspark</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">],</span>
    <span class="n">builtin_metrics</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">artifacts_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        eval_df:</span>
<span class="sd">            A Pandas or Spark DataFrame containing ``prediction`` and ``target``</span>
<span class="sd">            column.  The ``prediction`` column contains the predictions made by the</span>
<span class="sd">            model.  The ``target`` column contains the corresponding labels to the</span>
<span class="sd">            predictions made on that row.</span>
<span class="sd">        builtin_metrics:</span>
<span class="sd">            A dictionary containing the metrics calculated by the default evaluator.</span>
<span class="sd">            The keys are the names of the metrics and the values are the scalar</span>
<span class="sd">            values of the metrics. Refer to the DefaultEvaluator behavior section</span>
<span class="sd">            for what metrics will be returned based on the type of model (i.e.</span>
<span class="sd">            classifier or regressor).</span>
<span class="sd">        artifacts_dir:</span>
<span class="sd">            A temporary directory path that can be used by the custom artifacts</span>
<span class="sd">            function to temporarily store produced artifacts. The directory will be</span>
<span class="sd">            deleted after the artifacts are logged.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary that maps artifact names to artifact objects</span>
<span class="sd">        (e.g. a Matplotlib Figure) or to artifact paths within ``artifacts_dir``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Object types that artifacts can be represented as:</p>
<blockquote>
<div><ul>
<li><p>A string uri representing the file path to the artifact. MLflow will infer the
type of the artifact based on the file extension.</p></li>
<li><p>A string representation of a JSON object. This will be saved as a .json artifact.</p></li>
<li><p>Pandas DataFrame. This will be resolved as a CSV artifact.</p></li>
<li><p>Numpy array. This will be saved as a .npy artifact.</p></li>
<li><p>Matplotlib Figure. This will be saved as an image artifact. Note that
<code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot.savefig</span></code> is called behind the scene with default
configurations.
To customize, either save the figure with the desired configurations and return
its file path or define customizations through environment variables in
<code class="docutils literal notranslate"><span class="pre">matplotlib.rcParams</span></code>.</p></li>
<li><p>Other objects will be attempted to be pickled with the default protocol.</p></li>
</ul>
</div></blockquote>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">Example usage of custom artifacts</span><a class="headerlink" href="#id22" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="k">def</span> <span class="nf">scatter_plot</span><span class="p">(</span><span class="n">eval_df</span><span class="p">,</span> <span class="n">builtin_metrics</span><span class="p">,</span> <span class="n">artifacts_dir</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">eval_df</span><span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">],</span> <span class="n">eval_df</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Targets&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Predictions&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Targets vs. Predictions&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">artifacts_dir</span><span class="p">,</span> <span class="s2">&quot;example.png&quot;</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pred_target_scatter&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">artifacts_dir</span><span class="p">,</span> <span class="s2">&quot;example.png&quot;</span><span class="p">)}</span>


<span class="k">def</span> <span class="nf">pred_sample</span><span class="p">(</span><span class="n">eval_df</span><span class="p">,</span> <span class="n">_builtin_metrics</span><span class="p">,</span> <span class="n">_artifacts_dir</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pred_sample&quot;</span><span class="p">:</span> <span class="n">pred_sample</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span>


<span class="n">mlflow</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">custom_artifacts</span><span class="o">=</span><span class="p">[</span><span class="n">scatter_plot</span><span class="p">,</span> <span class="n">pred_sample</span><span class="p">])</span>
</pre></div>
</div>
</div>
</p></li>
<li><p><strong>validation_thresholds</strong> – DEPRECATED. Please use <a class="reference internal" href="mlflow.html#mlflow.validate_evaluation_results" title="mlflow.validate_evaluation_results"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.validate_evaluation_results()</span></code></a>
API instead for running model validation against baseline.</p></li>
<li><p><strong>baseline_model</strong> – DEPRECATED. Please use <a class="reference internal" href="mlflow.html#mlflow.validate_evaluation_results" title="mlflow.validate_evaluation_results"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.validate_evaluation_results()</span></code></a>
API instead for running model validation against baseline.</p></li>
<li><p><strong>env_manager</strong> – <p>Specify an environment manager to load the candidate <code class="docutils literal notranslate"><span class="pre">model</span></code> in
isolated Python environments and restore their
dependencies. Default value is <code class="docutils literal notranslate"><span class="pre">local</span></code>, and the following values are
supported:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>: (Recommended) Use virtualenv to restore the python
environment that was used to train the model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conda</span></code>:  Use Conda to restore the software environment that was used
to train the model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">local</span></code>: Use the current Python environment for model inference, which
may differ from the environment used to train the model and may lead to
errors or invalid predictions.</p></li>
</ul>
</p></li>
<li><p><strong>model_config</strong> – the model configuration to use for loading the model with pyfunc. Inspect
the model’s pyfunc flavor to know which keys are supported for your
specific model. If not indicated, the default model configuration
from the model is used (if any).</p></li>
<li><p><strong>baseline_config</strong> – DEPRECATED. Please use <a class="reference internal" href="mlflow.html#mlflow.validate_evaluation_results" title="mlflow.validate_evaluation_results"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.validate_evaluation_results()</span></code></a>
API instead for running model validation against baseline.</p></li>
<li><p><strong>inference_params</strong> – (Optional) A dictionary of inference parameters to be passed to the model
when making predictions, such as <code class="docutils literal notranslate"><span class="pre">{&quot;max_tokens&quot;:</span> <span class="pre">100}</span></code>. This is only used when
the <code class="docutils literal notranslate"><span class="pre">model</span></code> is an MLflow Deployments endpoint URI e.g. <code class="docutils literal notranslate"><span class="pre">&quot;endpoints:/my-chat&quot;</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <a class="reference internal" href="#mlflow.models.EvaluationResult" title="mlflow.models.EvaluationResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.models.EvaluationResult</span></code></a> instance containing
metrics of evaluating the model with the given dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.get_model_info">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">get_model_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#mlflow.models.model.ModelInfo" title="mlflow.models.model.ModelInfo"><span class="pre">mlflow.models.model.ModelInfo</span></a><a class="reference internal" href="../_modules/mlflow/models/model.html#get_model_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.get_model_info" title="Permalink to this definition"> </a></dt>
<dd><p>Get metadata for the specified model, such as its input/output signature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_uri</strong> – <p>The location, in URI format, of the MLflow model. For example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/Users/me/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relative/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3://my_bucket/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runs:/&lt;mlflow_run_id&gt;/run-relative/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;model_version&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models:/&lt;model_name&gt;/&lt;stage&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mlflow-artifacts:/path/to/model</span></code></p></li>
</ul>
<p>For more information about supported URI schemes, see
<a class="reference external" href="https://www.mlflow.org/docs/latest/concepts.html#artifact-locations">Referencing Artifacts</a>.</p>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#mlflow.models.model.ModelInfo" title="mlflow.models.model.ModelInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInfo</span></code></a> instance that contains the
metadata of the logged model.</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">Example usage of get_model_info</span><a class="headerlink" href="#id23" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow.models</span>
<span class="kn">import</span> <span class="nn">mlflow.sklearn</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>

<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">()</span> <span class="k">as</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;n_estimators&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;random_state&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}</span>
    <span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">infer_signature</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">rfr</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_params</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span><span class="n">rfr</span><span class="p">,</span> <span class="n">artifact_path</span><span class="o">=</span><span class="s2">&quot;sklearn-model&quot;</span><span class="p">,</span> <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">)</span>

<span class="n">model_uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;runs:/</span><span class="si">{</span><span class="n">run</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_id</span><span class="si">}</span><span class="s2">/sklearn-model&quot;</span>
<span class="c1"># Get model info with model_uri</span>
<span class="n">model_info</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">get_model_info</span><span class="p">(</span><span class="n">model_uri</span><span class="p">)</span>
<span class="c1"># Get model signature directly</span>
<span class="n">model_signature</span> <span class="o">=</span> <span class="n">model_info</span><span class="o">.</span><span class="n">signature</span>
<span class="k">assert</span> <span class="n">model_signature</span> <span class="o">==</span> <span class="n">signature</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.infer_pip_requirements">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">infer_pip_requirements</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fallback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/utils/environment.html#infer_pip_requirements"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.infer_pip_requirements" title="Permalink to this definition"> </a></dt>
<dd><p>Infers the pip requirements of the specified model by creating a subprocess and loading
the model in it to determine which packages are imported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_uri</strong> – The URI of the model.</p></li>
<li><p><strong>flavor</strong> – The flavor name of the model.</p></li>
<li><p><strong>fallback</strong> – If provided, an unexpected error during the inference procedure is swallowed
and the value of <code class="docutils literal notranslate"><span class="pre">fallback</span></code> is returned. Otherwise, the error is raised.</p></li>
<li><p><strong>timeout</strong> – If specified, the inference operation is bound by the timeout (in seconds).</p></li>
<li><p><strong>extra_env_vars</strong> – A dictionary of extra environment variables to pass to the subprocess.
Default to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of inferred pip requirements (e.g. <code class="docutils literal notranslate"><span class="pre">[&quot;scikit-learn==0.24.2&quot;,</span> <span class="pre">...]</span></code>).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.infer_signature">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">infer_signature</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_output</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">MlflowInferableDataset</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">mlflow.models.signature.ModelSignature</span><a class="reference internal" href="../_modules/mlflow/models/signature.html#infer_signature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.infer_signature" title="Permalink to this definition"> </a></dt>
<dd><p>Infer an MLflow model signature from the training data (input), model predictions (output)
and parameters (for inference).</p>
<p>The signature represents model input and output as data frames with (optionally) named columns
and data type specified as one of types defined in <a class="reference internal" href="mlflow.types.html#mlflow.types.DataType" title="mlflow.types.DataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.types.DataType</span></code></a>. It also
includes parameters schema for inference, .
This method will raise an exception if the user data contains incompatible types or is not
passed in one of the supported formats listed below.</p>
<dl class="simple">
<dt>The input should be one of these:</dt><dd><ul class="simple">
<li><p>pandas.DataFrame</p></li>
<li><p>pandas.Series</p></li>
<li><p>dictionary of { name -&gt; numpy.ndarray}</p></li>
<li><p>numpy.ndarray</p></li>
<li><p>pyspark.sql.DataFrame</p></li>
<li><p>scipy.sparse.csr_matrix</p></li>
<li><p>scipy.sparse.csc_matrix</p></li>
<li><p>dictionary / list of dictionaries of JSON-convertible types</p></li>
</ul>
</dd>
</dl>
<p>The element types should be mappable to one of <a class="reference internal" href="mlflow.types.html#mlflow.types.DataType" title="mlflow.types.DataType"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.types.DataType</span></code></a>.</p>
<p>For pyspark.sql.DataFrame inputs, columns of type DateType and TimestampType are both inferred
as type <a class="reference internal" href="mlflow.types.html#mlflow.types.DataType.datetime" title="mlflow.types.DataType.datetime"><code class="xref py py-data docutils literal notranslate"><span class="pre">datetime</span></code></a>, which is coerced to
TimestampType at inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_input</strong> – Valid input to the model. E.g. (a subset of) the training dataset.</p></li>
<li><p><strong>model_output</strong> – Valid model output. E.g. Model predictions for the (subset of) training
dataset.</p></li>
<li><p><strong>params</strong> – <p>Valid parameters for inference. It should be a dictionary of parameters
that can be set on the model during inference by passing <cite>params</cite> to pyfunc
<cite>predict</cite> method.</p>
<p>An example of valid parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.models</span> <span class="kn">import</span> <span class="n">infer_signature</span>
<span class="kn">from</span> <span class="nn">mlflow.transformers</span> <span class="kn">import</span> <span class="n">generate_signature_output</span>

<span class="c1"># Define parameters for inference</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;num_beams&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s2">&quot;do_sample&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;remove_invalid_values&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># Infer the signature including parameters</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">infer_signature</span><span class="p">(</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">generate_signature_output</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">data</span><span class="p">),</span>
    <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Saving model with model signature</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">transformers</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span>
    <span class="n">model</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="n">model_path</span><span class="p">,</span>
    <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">pyfunc_loaded</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>

<span class="c1"># Passing params to `predict` function directly</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">pyfunc_loaded</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ModelSignature</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.list_evaluators">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">list_evaluators</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/base.html#list_evaluators"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.list_evaluators" title="Permalink to this definition"> </a></dt>
<dd><p>Return a name list for all available Evaluators.</p>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.make_metric">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">make_metric</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">greater_is_better</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genai_metric_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/evaluation/base.html#make_metric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.make_metric" title="Permalink to this definition"> </a></dt>
<dd><p>A factory function to create an <a class="reference internal" href="#mlflow.models.EvaluationMetric" title="mlflow.models.EvaluationMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">EvaluationMetric</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eval_fn</strong> – <p>A function that computes the metric with the following signature:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">eval_fn</span><span class="p">(</span>
    <span class="n">predictions</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">targets</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">metrics</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetricValue</span><span class="p">],</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">MetricValue</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        predictions: A pandas Series containing the predictions made by the model.</span>
<span class="sd">        targets: (Optional) A pandas Series containing the corresponding labels</span>
<span class="sd">            for the predictions made on that input.</span>
<span class="sd">        metrics: (Optional) A dictionary containing the metrics calculated by the</span>
<span class="sd">            default evaluator.  The keys are the names of the metrics and the values</span>
<span class="sd">            are the metric values.  To access the MetricValue for the metrics</span>
<span class="sd">            calculated by the system, make sure to specify the type hint for this</span>
<span class="sd">            parameter as Dict[str, MetricValue].  Refer to the DefaultEvaluator</span>
<span class="sd">            behavior section for what metrics will be returned based on the type of</span>
<span class="sd">            model (i.e. classifier or regressor).  kwargs: Includes a list of args</span>
<span class="sd">            that are used to compute the metric. These args could information coming</span>
<span class="sd">            from input data, model outputs or parameters specified in the</span>
<span class="sd">            `evaluator_config` argument of the `mlflow.evaluate` API.</span>
<span class="sd">        kwargs: Includes a list of args that are used to compute the metric. These</span>
<span class="sd">            args could be information coming from input data, model outputs,</span>
<span class="sd">            other metrics, or parameters specified in the `evaluator_config`</span>
<span class="sd">            argument of the `mlflow.evaluate` API.</span>

<span class="sd">    Returns: MetricValue with per-row scores, per-row justifications, and aggregate</span>
<span class="sd">        results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
</p></li>
<li><p><strong>greater_is_better</strong> – Whether a higher value of the metric is better.</p></li>
<li><p><strong>name</strong> – The name of the metric. This argument must be specified if <code class="docutils literal notranslate"><span class="pre">eval_fn</span></code> is a lambda
function or the <code class="docutils literal notranslate"><span class="pre">eval_fn.__name__</span></code> attribute is not available.</p></li>
<li><p><strong>long_name</strong> – (Optional) The long name of the metric. For example, <code class="docutils literal notranslate"><span class="pre">&quot;mean_squared_error&quot;</span></code>
for <code class="docutils literal notranslate"><span class="pre">&quot;mse&quot;</span></code>.</p></li>
<li><p><strong>version</strong> – (Optional) The metric version. For example <code class="docutils literal notranslate"><span class="pre">v1</span></code>.</p></li>
<li><p><strong>metric_details</strong> – (Optional) A description of the metric and how it is calculated.</p></li>
<li><p><strong>metric_metadata</strong> – (Optional) A dictionary containing metadata for the metric.</p></li>
<li><p><strong>genai_metric_args</strong> – (Optional) A dictionary containing arguments specified by users
when calling make_genai_metric or make_genai_metric_from_prompt. Those args
are persisted so that we can deserialize the same metric object later.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="#mlflow.models.EvaluationMetric" title="mlflow.models.EvaluationMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.models.EvaluationMetric</span></code></a></p></li>
<li><p><a class="reference internal" href="mlflow.html#mlflow.evaluate" title="mlflow.evaluate"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.evaluate()</span></code></a></p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.predict">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">predict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_manager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'virtualenv'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">install_mlflow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pip_requirements_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/python_api.html#predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.predict" title="Permalink to this definition"> </a></dt>
<dd><p>Generate predictions in json format using a saved MLflow model. For information about the input
data formats accepted by this function, see the following documentation:
<a class="reference external" href="https://www.mlflow.org/docs/latest/models.html#built-in-deployment-tools">https://www.mlflow.org/docs/latest/models.html#built-in-deployment-tools</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_uri</strong> – URI to the model. A local path, a local or remote URI e.g. runs:/, s3://.</p></li>
<li><p><strong>input_data</strong> – Input data for prediction. Must be valid input for the PyFunc model. Refer
to the <a class="reference internal" href="mlflow.pyfunc.html#mlflow.pyfunc.PyFuncModel.predict" title="mlflow.pyfunc.PyFuncModel.predict"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.pyfunc.PyFuncModel.predict()</span></code></a> for the supported input types.</p></li>
<li><p><strong>input_path</strong> – Path to a file containing input data. If provided, ‘input_data’ must be None.</p></li>
<li><p><strong>content_type</strong> – Content type of the input data. Can be one of {‘json’, ‘csv’}.</p></li>
<li><p><strong>output_path</strong> – File to output results to as json. If not provided, output to stdout.</p></li>
<li><p><strong>env_manager</strong> – <p>Specify a way to create an environment for MLmodel inference:</p>
<ul>
<li><p>”virtualenv” (default): use virtualenv (and pyenv for Python version management)</p></li>
<li><p>”local”: use the local environment</p></li>
<li><p>”conda”: use conda</p></li>
</ul>
</p></li>
<li><p><strong>install_mlflow</strong> – If specified and there is a conda or virtualenv environment to be activated
mlflow will be installed into the environment after it has been activated. The version
of installed mlflow will be the same as the one used to invoke this command.</p></li>
<li><p><strong>pip_requirements_override</strong> – If specified, install the specified python dependencies to the
model inference environment. This is particularly useful when you want to add extra
dependencies or try different versions of the dependencies defined in the logged model.</p></li>
</ul>
</dd>
</dl>
<p>Code example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>

<span class="n">run_id</span> <span class="o">=</span> <span class="s2">&quot;...&quot;</span>

<span class="n">mlflow</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
    <span class="n">model_uri</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;runs:/</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">/model&quot;</span><span class="p">,</span>
    <span class="n">input_data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="n">content_type</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Run prediction with additional pip dependencies</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
    <span class="n">model_uri</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;runs:/</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">/model&quot;</span><span class="p">,</span>
    <span class="n">input_data</span><span class="o">=</span><span class="s1">&#39;{&quot;x&quot;: 1, &quot;y&quot;: 2}&#39;</span><span class="p">,</span>
    <span class="n">content_type</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="n">pip_requirements_override</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;scikit-learn==0.23.2&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.set_model">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">set_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#set_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.set_model" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>When logging model as code, this function can be used to set the model object
to be logged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model</strong> – <p>The model object to be logged. Supported model types are:</p>
<ul class="simple">
<li><p>A Python function or callable object.</p></li>
<li><p>A Langchain model or path to a Langchain model.</p></li>
<li><p>A Llama Index model or path to a Llama Index model.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.set_retriever_schema">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">set_retriever_schema</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_column</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'retriever'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/dependencies_schemas.html#set_retriever_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.set_retriever_schema" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>After defining your vector store in a Python file or notebook, call
set_retriever_schema() so that, when MLflow retrieves documents during
model inference, MLflow can interpret the fields in each retrieved document and
determine which fields correspond to the document text, document URI, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>primary_key</strong> – The primary key of the retriever or vector index.</p></li>
<li><p><strong>text_column</strong> – The name of the text column to use for the embeddings.</p></li>
<li><p><strong>doc_uri</strong> – The name of the column that contains the document URI.</p></li>
<li><p><strong>other_columns</strong> – A list of other columns that are part of the vector index
that need to be retrieved during trace logging.</p></li>
<li><p><strong>name</strong> – The name of the retriever tool or vector store index.</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id24" title="Permalink to this code"> </a></div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.models</span> <span class="kn">import</span> <span class="n">set_retriever_schema</span>

<span class="n">set_retriever_schema</span><span class="p">(</span>
    <span class="n">primary_key</span><span class="o">=</span><span class="s2">&quot;chunk_id&quot;</span><span class="p">,</span>
    <span class="n">text_column</span><span class="o">=</span><span class="s2">&quot;chunk_text&quot;</span><span class="p">,</span>
    <span class="n">doc_uri</span><span class="o">=</span><span class="s2">&quot;doc_uri&quot;</span><span class="p">,</span>
    <span class="n">other_columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.set_signature">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">set_signature</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signature</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">mlflow.models.signature.ModelSignature</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/signature.html#set_signature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.set_signature" title="Permalink to this definition"> </a></dt>
<dd><p>Sets the model signature for specified model artifacts.</p>
<p>The process involves downloading the MLmodel file in the model artifacts (if it’s non-local),
updating its model signature, and then overwriting the existing MLmodel file. Should the
artifact repository associated with the model artifacts disallow overwriting, this function will
fail.</p>
<p>Furthermore, as model registry artifacts are read-only, model artifacts located in the
model registry and represented by <code class="docutils literal notranslate"><span class="pre">models:/</span></code> URI schemes are not compatible with this API.
To set a signature on a model version, first set the signature on the source model artifacts.
Following this, generate a new model version using the updated model artifacts. For more
information about setting signatures on model versions, see
<a class="reference external" href="https://www.mlflow.org/docs/latest/models.html#set-signature-on-mv">this doc section</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_uri</strong> – <p>The location, in URI format, of the MLflow model. For example:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/Users/me/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relative/path/to/local/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3://my_bucket/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runs:/&lt;mlflow_run_id&gt;/run-relative/path/to/model</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mlflow-artifacts:/path/to/model</span></code></p></li>
</ul>
<p>For more information about supported URI schemes, see
<a class="reference external" href="https://www.mlflow.org/docs/latest/concepts.html#artifact-locations">Referencing Artifacts</a>.</p>
<p>Please note that model URIs with the <code class="docutils literal notranslate"><span class="pre">models:/</span></code> scheme are not supported.</p>
</p></li>
<li><p><strong>signature</strong> – ModelSignature to set on the model.</p></li>
</ul>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id25" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">from</span> <span class="nn">mlflow.models</span> <span class="kn">import</span> <span class="n">set_signature</span><span class="p">,</span> <span class="n">infer_signature</span>

<span class="c1"># load model from run artifacts</span>
<span class="n">run_id</span> <span class="o">=</span> <span class="s2">&quot;96771d893a5e46159d9f3b49bf9013e2&quot;</span>
<span class="n">artifact_path</span> <span class="o">=</span> <span class="s2">&quot;models&quot;</span>
<span class="n">model_uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;runs:/</span><span class="si">{</span><span class="n">run_id</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">artifact_path</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">model_uri</span><span class="p">)</span>

<span class="c1"># determine model signature</span>
<span class="n">test_df</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">predictions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test_df</span><span class="p">)</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">infer_signature</span><span class="p">(</span><span class="n">test_df</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>

<span class="c1"># set the signature for the logged model</span>
<span class="n">set_signature</span><span class="p">(</span><span class="n">model_uri</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.validate_schema">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">validate_schema</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span> </span><span class="pre">scipy.sparse._csc.csc_matrix</span><span class="p"><span class="pre">,</span> </span><span class="pre">scipy.sparse._csr.csr_matrix</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">bytes</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pyspark.sql.dataframe.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">mlflow.types.schema.Schema</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/mlflow/models/utils.html#validate_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.validate_schema" title="Permalink to this definition"> </a></dt>
<dd><p>Validate that the input data has the expected schema.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – <p>Input data to be validated. Supported types are:</p>
<ul>
<li><p>pandas.DataFrame</p></li>
<li><p>pandas.Series</p></li>
<li><p>numpy.ndarray</p></li>
<li><p>scipy.sparse.csc_matrix</p></li>
<li><p>scipy.sparse.csr_matrix</p></li>
<li><p>List[Any]</p></li>
<li><p>Dict[str, Any]</p></li>
<li><p>str</p></li>
</ul>
</p></li>
<li><p><strong>expected_schema</strong> – Expected Schema of the input data.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions/mlflow.exceptions.html#mlflow.exceptions.MlflowException" title="mlflow.exceptions.MlflowException"><strong>mlflow.exceptions.MlflowException</strong></a> – when the input data does not match the schema.</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-text">Example usage of validate_schema</span><a class="headerlink" href="#id26" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow.models</span>

<span class="c1"># Suppose you&#39;ve already got a model_uri</span>
<span class="n">model_info</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">get_model_info</span><span class="p">(</span><span class="n">model_uri</span><span class="p">)</span>
<span class="c1"># Get model signature directly</span>
<span class="n">model_signature</span> <span class="o">=</span> <span class="n">model_info</span><span class="o">.</span><span class="n">signature</span>
<span class="c1"># validate schema</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">validate_schema</span><span class="p">(</span><span class="n">input_data</span><span class="p">,</span> <span class="n">model_signature</span><span class="o">.</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mlflow.models.validate_serving_input">
<code class="sig-prename descclassname"><span class="pre">mlflow.models.</span></code><code class="sig-name descname"><span class="pre">validate_serving_input</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serving_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/utils.html#validate_serving_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.validate_serving_input" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Helper function to validate the model can be served and provided input is valid
prior to serving the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_uri</strong> – URI of the model to be served.</p></li>
<li><p><strong>serving_input</strong> – Input data to be validated. Should be a dictionary or a JSON string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The prediction result from the model.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="mlflow.models.model.ModelInfo">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mlflow.models.model.</span></code><code class="sig-name descname"><span class="pre">ModelInfo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">artifact_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavors</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_uuid</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">saved_input_example_info</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">utc_time_created</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlflow_version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signature_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_model_version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/models/model.html#ModelInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.models.model.ModelInfo" title="Permalink to this definition"> </a></dt>
<dd><p>The metadata of a logged MLflow Model.</p>
<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.artifact_path">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">artifact_path</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.artifact_path" title="Permalink to this definition"> </a></dt>
<dd><p>Run relative path identifying the logged model.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Retrieves the relative path of the logged model.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.flavors">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">flavors</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.flavors" title="Permalink to this definition"> </a></dt>
<dd><p>A dictionary mapping the flavor name to how to serve
the model as that flavor.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the mapping for the logged model’s flavor that defines parameters used in
serving of the model</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Dict[str, str]</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id27">
<div class="code-block-caption"><span class="caption-text">Example flavor mapping for a scikit-learn logged model</span><a class="headerlink" href="#id27" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;python_function&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;model_path&quot;</span><span class="p">:</span> <span class="s2">&quot;model.pkl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;loader_module&quot;</span><span class="p">:</span> <span class="s2">&quot;mlflow.sklearn&quot;</span><span class="p">,</span>
        <span class="s2">&quot;python_version&quot;</span><span class="p">:</span> <span class="s2">&quot;3.8.10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;env&quot;</span><span class="p">:</span> <span class="s2">&quot;conda.yaml&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;sklearn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;pickled_model&quot;</span><span class="p">:</span> <span class="s2">&quot;model.pkl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sklearn_version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.24.1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;serialization_format&quot;</span><span class="p">:</span> <span class="s2">&quot;cloudpickle&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.metadata">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">metadata</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.metadata" title="Permalink to this definition"> </a></dt>
<dd><p>User defined metadata added to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the user-defined metadata about a model</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Optional[Dict[str, Any]]</p>
</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id28">
<div class="code-block-caption"><span class="caption-text">Example usage of Model Metadata</span><a class="headerlink" href="#id28" title="Permalink to this code"> </a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create and log a model with metadata to the Model Registry</span>

<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">from</span> <span class="nn">mlflow.models</span> <span class="kn">import</span> <span class="n">infer_signature</span>

<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">iris</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_iris</span><span class="p">()</span>
    <span class="n">clf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">()</span>
    <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">infer_signature</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span>
        <span class="n">clf</span><span class="p">,</span>
        <span class="s2">&quot;iris_rf&quot;</span><span class="p">,</span>
        <span class="n">signature</span><span class="o">=</span><span class="n">signature</span><span class="p">,</span>
        <span class="n">registered_model_name</span><span class="o">=</span><span class="s2">&quot;model-with-metadata&quot;</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;metadata_key&quot;</span><span class="p">:</span> <span class="s2">&quot;metadata_value&quot;</span><span class="p">},</span>
    <span class="p">)</span>

<span class="c1"># model uri for the above model</span>
<span class="n">model_uri</span> <span class="o">=</span> <span class="s2">&quot;models:/model-with-metadata/1&quot;</span>

<span class="c1"># Load the model and access the custom metadata from its ModelInfo object</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">model_uri</span><span class="o">=</span><span class="n">model_uri</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">model</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get_model_info</span><span class="p">()</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;metadata_key&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;metadata_value&quot;</span>

<span class="c1"># Load the ModelInfo and access the custom metadata</span>
<span class="n">model_info</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">get_model_info</span><span class="p">(</span><span class="n">model_uri</span><span class="o">=</span><span class="n">model_uri</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">model_info</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;metadata_key&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;metadata_value&quot;</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This property may change or be removed in a future release without warning.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.mlflow_version">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">mlflow_version</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.mlflow_version" title="Permalink to this definition"> </a></dt>
<dd><p>Version of MLflow used to log the model</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the version of MLflow that was installed when a model was logged</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.model_uri">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">model_uri</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.model_uri" title="Permalink to this definition"> </a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">model_uri</span></code> of the logged model in the format <code class="docutils literal notranslate"><span class="pre">'runs:/&lt;run_id&gt;/&lt;artifact_path&gt;'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the uri path of the logged model from the uri <cite>runs:/&lt;run_id&gt;</cite> path
encapsulation</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.model_uuid">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">model_uuid</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.model_uuid" title="Permalink to this definition"> </a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">model_uuid</span></code> of the logged model,
e.g., <code class="docutils literal notranslate"><span class="pre">'39ca11813cfc46b09ab83972740b80ca'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>[Legacy] Gets the model_uuid (run_id) of a logged model</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.registered_model_version">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">registered_model_version</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.registered_model_version" title="Permalink to this definition"> </a></dt>
<dd><p>The registered model version, if the model is registered.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the registered model version, if the model is registered in Model Registry.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Sets the registered model version.</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.run_id">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">run_id</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.run_id" title="Permalink to this definition"> </a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">run_id</span></code> associated with the logged model,
e.g., <code class="docutils literal notranslate"><span class="pre">'8ede7df408dd42ed9fc39019ef7df309'</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the run_id identifier for the logged model</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.saved_input_example_info">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">saved_input_example_info</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.saved_input_example_info" title="Permalink to this definition"> </a></dt>
<dd><p>A dictionary that contains the metadata of the saved input example, e.g.,
<code class="docutils literal notranslate"><span class="pre">{&quot;artifact_path&quot;:</span> <span class="pre">&quot;input_example.json&quot;,</span> <span class="pre">&quot;type&quot;:</span> <span class="pre">&quot;dataframe&quot;,</span> <span class="pre">&quot;pandas_orient&quot;:</span> <span class="pre">&quot;split&quot;}</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the input example if specified during model logging</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Optional[Dict[str, str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.signature">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">signature</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.signature" title="Permalink to this definition"> </a></dt>
<dd><p>A <a class="reference internal" href="#mlflow.models.ModelSignature" title="mlflow.models.ModelSignature"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelSignature</span></code></a> that describes the
model input and output.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the model signature if it is defined</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="#mlflow.models.ModelSignature" title="mlflow.models.ModelSignature">ModelSignature</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.signature_dict">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">signature_dict</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.signature_dict" title="Permalink to this definition"> </a></dt>
<dd><p>A dictionary that describes the model input and output generated by
<a class="reference internal" href="#mlflow.models.ModelSignature.to_dict" title="mlflow.models.ModelSignature.to_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelSignature.to_dict()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the model signature as a dictionary</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Optional[Dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mlflow.models.model.ModelInfo.utc_time_created">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">utc_time_created</span></code><a class="headerlink" href="#mlflow.models.model.ModelInfo.utc_time_created" title="Permalink to this definition"> </a></dt>
<dd><p>The UTC time that the logged model is created, e.g., <code class="docutils literal notranslate"><span class="pre">'2022-01-12</span> <span class="pre">05:17:31.634689'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Gets the UTC formatted timestamp for when the model was logged</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mlflow.mleap.html" class="btn btn-neutral" title="mlflow.mleap" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="mlflow.onnx.html" class="btn btn-neutral" title="mlflow.onnx" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; MLflow Project, a Series of LF Projects, LLC. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'../',
      VERSION:'2.17.1.dev0',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      LINK_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "../_static/clippy.svg";</script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  

  
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
        // Get the code block designator class entries
        const allHighlights = document.querySelectorAll('.highlight');
        // Disable copyable links for notebook cell numbering and for cell outputs
        const highlights = Array.from(allHighlights).filter(highlight => !highlight.closest('.highlight-none') && 
            !highlight.closest('.nboutput'));
    
        highlights.forEach(function(highlight) {
            const copyIcon = document.createElement('span');
            copyIcon.classList.add('copy-icon');
            copyIcon.innerHTML = '&#xf0ea;';

            copyIcon.addEventListener('click', function() {
                const code = highlight.querySelector('pre').textContent;
                copyToClipboard(code);

                // Flash effect on click
                this.style.color = '#0194E2';
                setTimeout(() => {
                    this.style.color = ''; 
                }, 100);

                // Display "Code copied to clipboard" near the clicked icon
                const message = document.createElement('span');
                message.textContent = "Copied!";
                message.classList.add('copy-message'); 

                // Append the message to the icon
                this.appendChild(message);

                setTimeout(() => {
                    this.removeChild(message);
                }, 500);
            });

            highlight.appendChild(copyIcon);
        });
    });
  </script>


<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        // Force download for notebook-download-btn
        const downloadButtons = document.querySelectorAll('.notebook-download-btn');
        downloadButtons.forEach(function(button) {
            button.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default behavior

                // Fetch the raw content of the notebook from GitHub
                fetch(button.href)
                    .then(response => response.blob())
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.style.display = 'none';
                        link.href = url;
                        const filename = button.href.split('/').pop();
                        link.download = filename; 

                        document.body.appendChild(link);
                        link.click();

                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(link);
                    })
                    .catch(err => console.error('Error fetching the notebook:', err));
            });
        });
    });
</script> 
</body>
</html>