{"openapi": "3.1.0", "info": {"title": "MLflow AI Gateway", "description": "The core deployments API for reverse proxy interface using remote inference endpoints within MLflow", "version": "2.17.1.dev0"}, "paths": {"/endpoints/chat/invocations": {"post": {"summary": " Chat", "operationId": "_chat_endpoints_chat_invocations_post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__chat__RequestPayload"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"anyOf": [{"$ref": "#/components/schemas/mlflow__gateway__schemas__chat__ResponsePayload"}, {"$ref": "#/components/schemas/mlflow__gateway__schemas__chat__StreamResponsePayload"}], "title": "Response  Chat Endpoints Chat Invocations Post"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/endpoints/completions/invocations": {"post": {"summary": " Completions", "operationId": "_completions_endpoints_completions_invocations_post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__completions__RequestPayload"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"anyOf": [{"$ref": "#/components/schemas/mlflow__gateway__schemas__completions__ResponsePayload"}, {"$ref": "#/components/schemas/mlflow__gateway__schemas__completions__StreamResponsePayload"}], "title": "Response  Completions Endpoints Completions Invocations Post"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/endpoints/embeddings/invocations": {"post": {"summary": " Embeddings", "operationId": "_embeddings_endpoints_embeddings_invocations_post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__embeddings__RequestPayload"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__embeddings__ResponsePayload"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/health": {"get": {"summary": "Health", "operationId": "health_health_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HealthResponse"}}}}}}}, "/api/2.0/endpoints/{endpoint_name}": {"get": {"summary": "Get Endpoint", "operationId": "get_endpoint_api_2_0_endpoints__endpoint_name__get", "parameters": [{"name": "endpoint_name", "in": "path", "required": true, "schema": {"type": "string", "title": "Endpoint Name"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Endpoint"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/2.0/endpoints/": {"get": {"summary": "List Endpoints", "operationId": "list_endpoints_api_2_0_endpoints__get", "parameters": [{"name": "page_token", "in": "query", "required": false, "schema": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Page Token"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ListEndpointsResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/2.0/endpoints/limits/{endpoint}": {"get": {"summary": "Get Limits", "operationId": "get_limits_api_2_0_endpoints_limits__endpoint__get", "parameters": [{"name": "endpoint", "in": "path", "required": true, "schema": {"type": "string", "title": "Endpoint"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/LimitsConfig"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/2.0/endpoints/limits/": {"post": {"summary": "Set Limits", "operationId": "set_limits_api_2_0_endpoints_limits__post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/SetLimitsModel"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/LimitsConfig"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/chat/completions": {"post": {"summary": "Openai Chat Handler", "operationId": "openai_chat_handler_v1_chat_completions_post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__chat__RequestPayload"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__chat__ResponsePayload"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/completions": {"post": {"summary": "Openai Completions Handler", "operationId": "openai_completions_handler_v1_completions_post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__completions__RequestPayload"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__completions__ResponsePayload"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/embeddings": {"post": {"summary": "Openai Embeddings Handler", "operationId": "openai_embeddings_handler_v1_embeddings_post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__embeddings__RequestPayload"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/mlflow__gateway__schemas__embeddings__ResponsePayload"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}}, "components": {"schemas": {"ChatUsage": {"properties": {"prompt_tokens": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Prompt Tokens"}, "completion_tokens": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Completion Tokens"}, "total_tokens": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Total Tokens"}}, "type": "object", "title": "ChatUsage"}, "CompletionsUsage": {"properties": {"prompt_tokens": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Prompt Tokens"}, "completion_tokens": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Completion Tokens"}, "total_tokens": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Total Tokens"}}, "type": "object", "title": "CompletionsUsage"}, "EmbeddingObject": {"properties": {"object": {"type": "string", "title": "Object", "default": "embedding"}, "embedding": {"anyOf": [{"items": {"type": "number"}, "type": "array"}, {"type": "string"}], "title": "Embedding"}, "index": {"type": "integer", "title": "Index"}}, "type": "object", "required": ["embedding", "index"], "title": "EmbeddingObject"}, "EmbeddingsUsage": {"properties": {"prompt_tokens": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Prompt Tokens"}, "total_tokens": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Total Tokens"}}, "type": "object", "title": "EmbeddingsUsage"}, "Endpoint": {"properties": {"name": {"type": "string", "title": "Name"}, "endpoint_type": {"type": "string", "title": "Endpoint Type"}, "model": {"$ref": "#/components/schemas/RouteModelInfo"}, "endpoint_url": {"type": "string", "title": "Endpoint Url"}, "limit": {"anyOf": [{"$ref": "#/components/schemas/Limit"}, {"type": "null"}]}}, "type": "object", "required": ["name", "endpoint_type", "model", "endpoint_url", "limit"], "title": "Endpoint"}, "Function": {"properties": {"name": {"type": "string", "title": "Name"}, "arguments": {"type": "string", "title": "Arguments"}}, "type": "object", "required": ["name", "arguments"], "title": "Function"}, "HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "HealthResponse": {"properties": {"status": {"type": "string", "title": "Status"}}, "type": "object", "required": ["status"], "title": "HealthResponse"}, "Limit": {"properties": {"calls": {"type": "integer", "title": "Calls"}, "key": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Key"}, "renewal_period": {"type": "string", "title": "Renewal Period"}}, "type": "object", "required": ["calls", "renewal_period"], "title": "Limit"}, "LimitsConfig": {"properties": {"limits": {"anyOf": [{"items": {"$ref": "#/components/schemas/Limit"}, "type": "array"}, {"type": "null"}], "title": "Limits", "default": []}}, "type": "object", "title": "LimitsConfig"}, "ListEndpointsResponse": {"properties": {"endpoints": {"items": {"$ref": "#/components/schemas/Endpoint"}, "type": "array", "title": "Endpoints"}, "next_page_token": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Next Page Token"}}, "type": "object", "required": ["endpoints"], "title": "ListEndpointsResponse"}, "RequestMessage": {"properties": {"role": {"type": "string", "title": "Role"}, "content": {"type": "string", "title": "Content"}}, "additionalProperties": true, "type": "object", "required": ["role", "content"], "title": "RequestMessage"}, "ResponseMessage": {"properties": {"role": {"type": "string", "title": "Role"}, "content": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Content"}, "tool_calls": {"anyOf": [{"items": {"$ref": "#/components/schemas/ToolCall"}, "type": "array"}, {"type": "null"}], "title": "Tool Calls"}}, "type": "object", "required": ["role", "content"], "title": "ResponseMessage"}, "RouteModelInfo": {"properties": {"name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "provider": {"type": "string", "title": "Provider"}}, "type": "object", "required": ["provider"], "title": "RouteModelInfo"}, "SetLimitsModel": {"properties": {"route": {"type": "string", "title": "Route"}, "limits": {"items": {"type": "object"}, "type": "array", "title": "Limits"}}, "type": "object", "required": ["route", "limits"], "title": "SetLimitsModel"}, "StreamChoice": {"properties": {"index": {"type": "integer", "title": "Index"}, "finish_reason": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Finish Reason"}, "delta": {"$ref": "#/components/schemas/StreamDelta"}}, "type": "object", "required": ["index", "delta"], "title": "StreamChoice"}, "StreamDelta": {"properties": {"role": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Role"}, "content": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Content"}}, "type": "object", "title": "StreamDelta"}, "ToolCall": {"properties": {"id": {"type": "string", "title": "Id"}, "type": {"type": "string", "enum": ["function"], "const": "function", "title": "Type"}, "function": {"$ref": "#/components/schemas/Function"}}, "type": "object", "required": ["id", "type", "function"], "title": "ToolCall"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}, "mlflow__gateway__schemas__chat__Choice": {"properties": {"index": {"type": "integer", "title": "Index"}, "message": {"$ref": "#/components/schemas/ResponseMessage"}, "finish_reason": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Finish Reason"}}, "type": "object", "required": ["index", "message"], "title": "Choice"}, "mlflow__gateway__schemas__chat__RequestPayload": {"properties": {"temperature": {"type": "number", "maximum": 2.0, "minimum": 0.0, "title": "Temperature", "default": 0.0}, "n": {"type": "integer", "minimum": 1.0, "title": "N", "default": 1}, "stop": {"anyOf": [{"items": {"type": "string"}, "type": "array", "minItems": 1}, {"type": "null"}], "title": "Stop"}, "max_tokens": {"anyOf": [{"type": "integer", "minimum": 1.0}, {"type": "null"}], "title": "Max Tokens"}, "stream": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Stream"}, "model": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Model"}, "messages": {"items": {"$ref": "#/components/schemas/RequestMessage"}, "type": "array", "minItems": 1, "title": "Messages"}}, "additionalProperties": true, "type": "object", "required": ["messages"], "title": "RequestPayload", "max_tokens": 64, "messages": [{"content": "You are a helpful assistant.", "role": "system"}, {"content": "Hello!", "role": "user"}], "n": 1, "stop": ["END"], "stream": false, "temperature": 0.0}, "mlflow__gateway__schemas__chat__ResponsePayload": {"properties": {"id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "object": {"type": "string", "title": "Object", "default": "chat.completion"}, "created": {"type": "integer", "title": "Created"}, "model": {"type": "string", "title": "Model"}, "choices": {"items": {"$ref": "#/components/schemas/mlflow__gateway__schemas__chat__Choice"}, "type": "array", "title": "Choices"}, "usage": {"$ref": "#/components/schemas/ChatUsage"}}, "type": "object", "required": ["created", "model", "choices", "usage"], "title": "ResponsePayload", "example": {"choices": [{"finish_reason": "stop", "index": 0, "message": {"content": "Hello! I am an AI assistant", "role": "assistant"}}], "created": 1700173217, "id": "3cdb958c-e4cc-4834-b52b-1d1a7f324714", "model": "llama-2-70b-chat-hf", "object": "chat.completion", "usage": {"completion_tokens": 8, "prompt_tokens": 10, "total_tokens": 18}}}, "mlflow__gateway__schemas__chat__StreamResponsePayload": {"properties": {"id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "object": {"type": "string", "title": "Object", "default": "chat.completion.chunk"}, "created": {"type": "integer", "title": "Created"}, "model": {"type": "string", "title": "Model"}, "choices": {"items": {"$ref": "#/components/schemas/StreamChoice"}, "type": "array", "title": "Choices"}}, "type": "object", "required": ["created", "model", "choices"], "title": "StreamResponsePayload", "example": {"choices": [{"delta": {"content": "you?", "role": "assistant"}, "finish_reason": "stop", "index": 6}], "created": 1700173217, "id": "3cdb958c-e4cc-4834-b52b-1d1a7f324714", "model": "llama-2-70b-chat-hf", "object": "chat.completion"}}, "mlflow__gateway__schemas__completions__Choice": {"properties": {"index": {"type": "integer", "title": "Index"}, "text": {"type": "string", "title": "Text"}, "finish_reason": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Finish Reason"}}, "type": "object", "required": ["index", "text"], "title": "Choice"}, "mlflow__gateway__schemas__completions__RequestPayload": {"properties": {"temperature": {"type": "number", "maximum": 2.0, "minimum": 0.0, "title": "Temperature", "default": 0.0}, "n": {"type": "integer", "minimum": 1.0, "title": "N", "default": 1}, "stop": {"anyOf": [{"items": {"type": "string"}, "type": "array", "minItems": 1}, {"type": "null"}], "title": "Stop"}, "max_tokens": {"anyOf": [{"type": "integer", "minimum": 1.0}, {"type": "null"}], "title": "Max Tokens"}, "stream": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Stream"}, "model": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Model"}, "prompt": {"type": "string", "title": "Prompt"}}, "additionalProperties": true, "type": "object", "required": ["prompt"], "title": "RequestPayload", "example": {"max_tokens": 64, "n": 1, "prompt": "hello", "stop": ["END"], "temperature": 0.0}}, "mlflow__gateway__schemas__completions__ResponsePayload": {"properties": {"id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "object": {"type": "string", "title": "Object", "default": "text_completion"}, "created": {"type": "integer", "title": "Created"}, "model": {"type": "string", "title": "Model"}, "choices": {"items": {"$ref": "#/components/schemas/mlflow__gateway__schemas__completions__Choice"}, "type": "array", "title": "Choices"}, "usage": {"$ref": "#/components/schemas/CompletionsUsage"}}, "type": "object", "required": ["created", "model", "choices", "usage"], "title": "ResponsePayload", "example": {"choices": [{"finish_reason": "length", "index": 0, "text": "Hello! I am an AI Assistant!"}], "created": 1589478378, "id": "cmpl-123", "model": "gpt-4", "object": "text_completion", "usage": {"completion_tokens": 7, "prompt_tokens": 5, "total_tokens": 12}}}, "mlflow__gateway__schemas__completions__StreamResponsePayload": {"properties": {"id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Id"}, "object": {"type": "string", "title": "Object", "default": "text_completion_chunk"}, "created": {"type": "integer", "title": "Created"}, "model": {"type": "string", "title": "Model"}, "choices": {"items": {"$ref": "#/components/schemas/StreamChoice"}, "type": "array", "title": "Choices"}}, "type": "object", "required": ["created", "model", "choices"], "title": "StreamResponsePayload", "example": {"choices": [{"delta": {"content": "you?", "role": "assistant"}, "finish_reason": "stop", "index": 6}], "created": 1589478378, "id": "cmpl-123", "model": "gpt-4", "object": "text_completion"}}, "mlflow__gateway__schemas__embeddings__RequestPayload": {"properties": {"input": {"anyOf": [{"type": "string"}, {"items": {"type": "string"}, "type": "array"}, {"items": {"type": "integer"}, "type": "array"}, {"items": {"items": {"type": "integer"}, "type": "array"}, "type": "array"}], "title": "Input"}}, "additionalProperties": true, "type": "object", "required": ["input"], "title": "RequestPayload", "example": {"input": ["hello", "world"]}}, "mlflow__gateway__schemas__embeddings__ResponsePayload": {"properties": {"object": {"type": "string", "title": "Object", "default": "list"}, "data": {"items": {"$ref": "#/components/schemas/EmbeddingObject"}, "type": "array", "title": "Data"}, "model": {"type": "string", "title": "Model"}, "usage": {"$ref": "#/components/schemas/EmbeddingsUsage"}}, "type": "object", "required": ["data", "model", "usage"], "title": "ResponsePayload", "data": [{"embedding": [0.017291732, -0.017291732, 0.014577783, -0.02902633, -0.037271563, 0.019333655, -0.023055641, -0.007359971, -0.015818445, -0.030654699, 0.008348623, 0.018312693, -0.017149571, -0.0044424757, -0.011165961, 0.01018377], "index": 0, "object": "embedding"}, {"embedding": [0.0060126893, -0.008691099, -0.0040095365, 0.019889368, 0.036211833, -0.0013270887, 0.013401738, -0.0036735237, -0.0049594184, 0.035229642, -0.03435084, 0.019798903, -0.0006110424, 0.0073793563, 0.005657291, 0.022487005], "index": 1, "object": "embedding"}], "model": "text-embedding-ada-002-v2", "object": "list", "usage": {"prompt_tokens": 400, "total_tokens": 400}}}}}