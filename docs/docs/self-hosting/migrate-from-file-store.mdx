---
title: Migrate from File Store
---

# Migrate from File Store to Database

MLflow's default backend store changed from file-based storage (`./mlruns`) to SQLite database in MLflow 3.6. If you have existing data in a file-based backend, you can migrate it to a database using the built-in migration command.

## Prerequisites

- MLflow 3.10 or later installed (`pip install "mlflow>=3.10"`)
- Access to the `mlruns` directory (or wherever your FileStore data lives)

## Quick Start

```bash
mlflow migrate-filestore --source ./mlruns --target sqlite:///mlflow.db
```

This reads all data from the `./mlruns` directory and writes it to a new SQLite database at `mlflow.db`.

## What Gets Migrated

The migration tool transfers **all metadata** stored in the file-based backend:

| Category       | Entities                                                |
| -------------- | ------------------------------------------------------- |
| Experiments    | Experiments, experiment tags                            |
| Runs           | Runs, params, metrics, latest metrics, tags             |
| Datasets       | Datasets, inputs, input tags                            |
| Run I/O        | Model inputs (run → model), model outputs (run → model) |
| Traces         | Trace info, trace tags, trace request metadata          |
| Assessments    | Assessments (feedback, expectations)                    |
| Logged Models  | Logged models, tags                                     |
| Model Registry | Registered models, model versions, tags, aliases        |

### What Is NOT Migrated

- **Artifacts** (model files, images, etc.) stay in their original location. The database stores the same artifact URIs that point to the existing files.
- **Trace spans** are stored as artifact files, not in the database.

## Options

| Option                     | Description                                                      |
| -------------------------- | ---------------------------------------------------------------- |
| `--source`                 | Path to the directory containing FileStore data.                 |
| `--target`                 | SQLite URI for the target database (e.g. `sqlite:///mlflow.db`). |
| `--progress/--no-progress` | Show or hide per-experiment progress messages (default: on).     |

The `--source` can point to either:

- A directory containing an `mlruns/` subdirectory
- The `mlruns` directory itself

## Step-by-Step Guide

### 1. Stop the MLflow server

If you're running a tracking server, stop it before migrating.

### 2. Back up your data

```bash
cp -r ./mlruns ./mlruns.backup
```

### 3. Run the migration

```bash
mlflow migrate-filestore --source ./mlruns --target sqlite:///mlflow.db
```

The command prints progress for each experiment and registered model, followed by a summary of migrated entity counts and actual database row counts.

The migration is atomic. If any error occurs, the entire migration is rolled back and the database remains empty, so you can safely re-run the command after fixing the issue.

### 4. Start the server with the new database

```bash
mlflow server --backend-store-uri sqlite:///mlflow.db
```

### 5. Verify

Open the MLflow UI and confirm your experiments, runs, and models are present.

## Lossless Migration

The migration tool preserves your data exactly as it was in the FileStore. No IDs are regenerated and no timestamps are altered.

- **All IDs** (experiment, run, trace, model, etc.) are preserved as-is.
- **All timestamps** (`creation_time`, `start_time`, `end_time`, `last_update_time`) retain their original millisecond precision.
- **Deleted items are included.** Experiments and runs in the `.trash` directory are migrated with their `deleted` lifecycle stage preserved.
- **Artifact URIs** remain unchanged, pointing to the same files on disk.

### Comparison with `mlflow-export-import`

|                                  | `mlflow migrate-filestore`      | [`mlflow-export-import`](https://github.com/mlflow/mlflow-export-import) |
| -------------------------------- | ------------------------------- | ------------------------------------------------------------------------ |
| **Use case**                     | Migrate FileStore to a database | Recreate data between MLflow servers                                     |
| **Preserves IDs and timestamps** | Yes                             | No (regenerated on import)                                               |
| **Requires a running server**    | No                              | Yes (both source and target)                                             |
| **Target**                       | SQLite                          | Any MLflow server                                                        |

## Important Notes

- **Target database must be empty.** The migration tool refuses to write to a database that already contains data to prevent conflicts. If the target file already exists, you will be prompted to overwrite it.
- **SQLite only.** The migration tool only supports SQLite as the target database. FileStore generates large experiment IDs that exceed the 32-bit integer limit enforced by PostgreSQL and MySQL, but SQLite handles them natively.

If you run into issues or have feedback, please comment on [GitHub issue #18534](https://github.com/mlflow/mlflow/issues/18534).
