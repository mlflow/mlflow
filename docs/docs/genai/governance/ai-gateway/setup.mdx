---
title: Gateway Setup
---

# Gateway Setup

The MLflow AI Gateway provides a web-based interface for managing AI endpoints, API keys, and routing configurations. This guide walks you through setting up and configuring your gateway.

## Prerequisites

To use the AI Gateway, you'll need MLflow installed with the GenAI extras, which include the necessary dependencies for gateway functionality:

```bash
pip install "mlflow[genai]"
```

The AI Gateway runs within the MLflow Tracking Server and requires a SQL-based backend store (SQLite, PostgreSQL, MySQL, or MSSQL) with the FastAPI tracking server. Start your MLflow server:

```bash
mlflow server --port 5000
```

:::note
File-based tracking stores are not supported by the AI Gateway. By default, `mlflow server` uses a SQL-based backend (SQLite).
:::

For production deployments, you'll want to configure encryption for secrets. Generate a secure passphrase and set it as an environment variable before starting the server:

```bash
# Generate a secure passphrase
python -c "import secrets; print(secrets.token_urlsafe(32))"

# Set the passphrase as an environment variable
export MLFLOW_CRYPTO_KEK_PASSPHRASE="your-secure-passphrase-here"
```

:::note
For local development, MLflow uses a default passphrase if none is configured. This is acceptable for development or single-user deployments, but production environments should always use a custom passphrase.
:::

## Accessing the Gateway

Once your MLflow server is running, navigate to the AI Gateway section at `http://localhost:5000/#/gateway`.

![Gateway Overview](/images/genai/governance/ai-gateway/gateway-overview.png)

The gateway interface is organized into two main areas. The Endpoints section lets you configure and manage your AI model endpoints, while the API Keys section provides centralized management of credentials for different providers.

## Managing API Keys

API keys serve as reusable credentials that can be shared across multiple endpoints. When you have several endpoints using the same provider, this approach simplifies both initial setup and ongoing credential management.

![API Keys Page](/images/genai/governance/ai-gateway/api-keys-page.png)

### Creating an API Key

Navigate to the API Keys tab and click Create API Key. You'll need to provide a unique name for the key (such as `my-openai-key`) and select your provider from the dropdown. Common providers like OpenAI, Anthropic, and Google Gemini are readily available.

Some providers offer multiple authentication methods. For example, OpenAI supports both standard API key authentication and Azure-specific authentication. Select the appropriate method for your setup, then enter your credentials. The interface displays credential fields as masked inputs to protect sensitive information.

Provider-specific configuration fields appear based on your selection:

- **Azure**: Endpoint URL
- **GCP**: Project ID

Fill in these additional fields as needed, then click Create to save your API key.

### Working with Existing Keys

The API Keys page shows all your configured credentials along with important metadata. You can see which endpoints are currently using each key, when it was last updated, and when it was originally created. The credential values themselves remain masked for security.

To update credentials for a provider, use the Edit function to modify the key without needing to reconfigure all endpoints that use it. When deleting a key, the system warns you if any endpoints currently depend on it, preventing accidental disruptions.

:::tip
Creating reusable API keys simplifies credential rotation. When you need to update a credential, edit it once rather than updating every endpoint individually.
:::

<details>
<summary>How to rotate API keys</summary>

When you need to rotate credentials for security purposes:

1. Navigate to the API Keys tab and locate the key you want to rotate
2. Click the Edit button for that API key
3. Update the credential value with your new API key from the provider
4. Click Save to apply the changes

All endpoints using this API key will automatically use the new credentials without requiring any configuration changes. This zero-downtime rotation ensures your applications continue running uninterrupted during the credential update.

For mission-critical deployments, consider this rotation strategy:

1. Create a new API key with the rotated credentials (e.g., `my-openai-key-v2`)
2. Update your endpoints to use the new API key
3. Monitor your endpoints to ensure they're working correctly
4. Delete the old API key once you've verified the rotation was successful

This approach provides a rollback path if issues arise during rotation.

</details>

## Creating an Endpoint

Endpoints define how requests are routed to AI models. For advanced routing features like traffic splitting and fallbacks, see the [Advanced Routing](./routing) guide.

### Basic Endpoint Setup

To create an endpoint:

1. Navigate to the Endpoints tab and click **Create Endpoint**
2. Enter a unique endpoint name (e.g., `my-chat-endpoint`) - this becomes part of your API path
3. Select your provider from 100+ supported options
   - Common providers (OpenAI, Anthropic, Google Gemini) appear first
   - Click "View all providers" for the full LiteLLM catalog
4. Choose your model - the selector displays:
   - Capability badges (Tools, Reasoning, Caching)
   - Context window size and token costs
   - Search function for quick filtering
5. Configure API key:
   - **Create new API key**: Configure credentials inline (convenient for first-time setup)
   - **Use existing API key**: Select from previously created keys (recommended for consistency)
6. Review your configuration in the summary panel
7. Click **Create Endpoint**

![Create Endpoint](/images/genai/governance/ai-gateway/create-endpoint.png)
