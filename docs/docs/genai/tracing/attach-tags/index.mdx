import { APILink } from "@site/src/components/APILink";
import { Table } from "@site/src/components/Table";
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Setting Trace Tags

Tags are mutable key-value pairs that you can attach to traces to add valuable labels and context for grouping and filtering traces. Trace tags are particularly useful for:

- **Categorization**: Tag traces based on the topic of the user's input or the type of request being processed
- **Environment Tracking**: Distinguish between production, staging, and development traces
- **Model Versioning**: Track which model version generated specific traces
- **A/B Testing**: Differentiate between different experimental variants of a prompt or model

## Setting Tags via the MLflow UI

![Traces tag update](/images/llms/tracing/trace-set-tag.gif)

## Setting Tags on Ongoing Traces

Use <APILink fn="mlflow.update_current_trace" /> to add tags during trace execution.

```python
import mlflow


@mlflow.trace
def my_func(x):
    mlflow.update_current_trace(tags={"fruit": "apple"})
    return x + 1


result = my_func(5)
```

:::note
If the key is already present, the <APILink fn="mlflow.update_current_trace" /> function will update the key with the new value.
:::

## Setting Tags on Completed Traces via SDK

Add or modify tags on traces that have already been completed and logged.

```python
import mlflow

mlflow.set_trace_tag(trace_id="your-trace-id", key="tag_key", value="tag_value")
```

## Searching and Filtering with Tags

Use tags to find specific traces quickly and efficiently.

```python
# Search for traces with tag 'environment' set to 'production'
traces = mlflow.search_traces(filter_string="tags.environment = 'production'")
```

You can also use pattern matching to find traces by tag value.

```python
# Search for traces with tag that contains the word 'mlflow'
traces = mlflow.search_traces(filter_string="tags.topic LIKE '%mlflow%'")
```

View the full list of supported filter syntax in the [Search Traces](/genai/tracing/search-traces) guide.
