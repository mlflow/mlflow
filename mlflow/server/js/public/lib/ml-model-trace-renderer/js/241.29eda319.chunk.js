"use strict";(self.webpackChunkdatabricks_mlModelTraceRenderer=self.webpackChunkdatabricks_mlModelTraceRenderer||[]).push([[241],{50241:(e,t,n)=>{n.r(t),n.d(t,{INFERENCE_TABLE_RESPONSE_COLUMN_KEY:()=>it,INFERENCE_TABLE_TRACE_COLUMN_KEY:()=>lt,MLFLOW_TRACE_SCHEMA_VERSION_KEY:()=>at,ModelIconType:()=>st,ModelSpanType:()=>ct,ModelTraceChildToParentFrameMessage:()=>cn,ModelTraceContextProvider:()=>ln,ModelTraceExplorer:()=>tn,ModelTraceExplorerFrameRenderer:()=>on,ModelTraceParentToChildFrameMessage:()=>sn,ModelTraceSpanType:()=>dt,getIsMlflowTraceUIEnabled:()=>Et,isModelTrace:()=>vt,useModelTraceContext:()=>an});var o=n(71218),r=n(99615),a=n.n(r),i=n(65848),l=n.n(i),c=n(32670),s=n(37299),d=n(73272),u=n(14144),h=n(27017),p=n.n(h),g=n(29790),f=n.n(g),E=n(5003),m=n.n(E),v=n(76967),y=n.n(v),T=n(26865),b=n.n(T),S=n(49776),I=n.n(S),C=n(47540),A=n.n(C),N=n(6812),R=n.n(N),M=n(62925),x=n.n(M),L=n(54889),w=n.n(L),O=n(98358),k=n(45370),Y=n(44768),D=n.n(Y),P=n(83214),H=n(8153),F=n(66164),U=n(22919),_=n(30136),B=n(70549),W=n(21733),z=n(60700);const G={name:"1fz341y",styles:"margin-right:16px;text-align:right;position:absolute;right:0;padding-top:2px;padding-right:2px"};function K(e){let{children:t,style:n}=e;return(0,O.Y)("div",{css:G,style:n,children:t})}const V=l().createContext({});function $(e){let{children:t,theme:n={}}=e;return(0,O.Y)(V.Provider,{value:n,children:t})}const j="rgba(140, 203, 255, 0)",X="rgba(255, 255, 255, 0.84)",q="#8ccbffcc",Q="rgba(140, 203, 255, 0.08)",J="24px";function Z(e){let{theme:t="light",actions:n,children:o,style:r}=e;const a="duotoneDark"===t?{color:X,hoverColor:q,backgroundColor:j,hoverBackgroundColor:Q}:void 0;return(0,O.FD)(O.FK,{children:[(0,O.Y)(K,{style:r,children:(0,O.Y)($,{theme:a,children:n})}),o]})}function ee(e){e.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:BASE64|PARSE_URL|UPPER|LOWER|INITCAP|FORMAT_NUMBER|FORMAT_STRING|TRIM|UNBASE64|CONCAT|MAP|MAP_KEYS|MAP_VALUES|MAP_ENTRIES|MAP_FILTER|MAP_FROM_ARRAYS|MAP_FROM_ENTRIES|MAP_ZIP_WITH|ARRAY|AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:COPY|DESCRIBE HISTORY|DESCRIBE DETAIL|STORAGE CREDENTIALS?|URL|CACHE|UNCACHE|VACUUM|MSCK|CATALOGS?|CREDENTIALS?|FILES?|RECIPIENTS?|PROVIDERS?|TBLPROPERTIES|SHARES|VIEWS|EXTERNAL|REPAIR|REFRESH|COMMENT|LIST|PARQUET|LOCATIONS?|OPTIONS|JAR|ARCHIVE|ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR|AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/i,punctuation:/[;[\]()`,.]/}}ee.displayName="databricks-runtime-sql",ee.aliases=["sql","dbr-sql","dbsql","databricks-sql"];var te={'code[class*="language-"]':{fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', 'Courier New', 'Courier', 'Source Code Pro', monospace",fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC"},'pre[class*="language-"]':{fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', 'Courier New', 'Courier', 'Source Code Pro', monospace",fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC",padding:"1em",margin:".5em 0",overflow:"auto"},'pre > code[class*="language-"]':{fontSize:"1em"},'pre[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},':not(pre) > code[class*="language-"]':{padding:".1em",borderRadius:".3em"},comment:{color:"#6c6783"},prolog:{color:"#6c6783"},doctype:{color:"#6c6783"},cdata:{color:"#6c6783"},punctuation:{color:"#6c6783"},namespace:{Opacity:".7"},tag:{color:"#3AACE2"},operator:{color:"#3AACE2"},number:{color:"#3AACE2"},property:{color:"#5DFAFC"},function:{color:"#5DFAFC"},"tag-id":{color:"#eeebff"},selector:{color:"#eeebff"},"atrule-id":{color:"#eeebff"},"code.language-javascript":{color:"#c4b9fe"},"attr-name":{color:"#c4b9fe"},"code.language-css":{color:"#ffffff"},"code.language-scss":{color:"#ffffff"},boolean:{color:"#ffffff"},string:{color:"#ffffff"},entity:{color:"#ffffff",cursor:"help"},url:{color:"#ffffff"},".language-css .token.string":{color:"#ffffff"},".language-scss .token.string":{color:"#ffffff"},".style .token.string":{color:"#ffffff"},"attr-value":{color:"#ffffff"},keyword:{color:"#ffffff"},control:{color:"#ffffff"},directive:{color:"#ffffff"},unit:{color:"#ffffff"},statement:{color:"#ffffff"},regex:{color:"#ffffff"},atrule:{color:"#ffffff"},placeholder:{color:"#ffffff"},variable:{color:"#ffffff"},deleted:{textDecoration:"line-through"},inserted:{borderBottom:"1px dotted #eeebff",textDecoration:"none"},italic:{fontStyle:"italic"},important:{fontWeight:"bold",color:"#c4b9fe"},bold:{fontWeight:"bold"},"pre > code.highlight":{Outline:".4em solid #8a75f5",OutlineOffset:".4em"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"#2c2937"},".line-numbers .line-numbers-rows > span:before":{color:"#3c3949"},".line-highlight.line-highlight":{background:"linear-gradient(to right, rgba(224, 145, 66, 0.2) 70%, rgba(224, 145, 66, 0))"}};var ne={'code[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Source Code Pro', monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Source Code Pro', monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",overflow:"auto",position:"relative",margin:"0.5em 0",padding:"1.25em 1em"},'code[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},':not(pre) > code[class*="language-"]':{whiteSpace:"normal",borderRadius:"0.2em",padding:"0.1em"},".language-css > code":{color:"#f5871f"},".language-sass > code":{color:"#f5871f"},".language-scss > code":{color:"#f5871f"},'[class*="language-"] .namespace':{Opacity:"0.7"},atrule:{color:"#7c4dff"},"attr-name":{color:"#39adb5"},"attr-value":{color:"#f6a434"},attribute:{color:"#f6a434"},boolean:{color:"#7c4dff"},builtin:{color:"#39adb5"},cdata:{color:"#39adb5"},char:{color:"#39adb5"},class:{color:"#39adb5"},"class-name":{color:"#6182b8"},comment:{color:"#8e908c"},constant:{color:"#7c4dff"},deleted:{color:"#e53935"},doctype:{color:"#aabfc9"},entity:{color:"#e53935"},function:{color:"#4271ae"},hexcode:{color:"#f5871f"},id:{color:"#7c4dff",fontWeight:"bold"},important:{color:"#7c4dff",fontWeight:"bold"},inserted:{color:"#39adb5"},keyword:{color:"#8959a8"},number:{color:"#f5871f"},operator:{color:"#3e999f"},prolog:{color:"#aabfc9"},property:{color:"#39adb5"},"pseudo-class":{color:"#f6a434"},"pseudo-element":{color:"#f6a434"},punctuation:{color:"rgb(77, 77, 76)"},regex:{color:"#6182b8"},selector:{color:"#e53935"},string:{color:"#3ba85f"},symbol:{color:"#7c4dff"},tag:{color:"#e53935"},unit:{color:"#f5871f"},url:{color:"#e53935"},variable:{color:"#c72d4c"}};P.A.registerLanguage("sql",ee),P.A.registerLanguage("java",U.A),P.A.registerLanguage("python",W.A),P.A.registerLanguage("go",H.A),P.A.registerLanguage("javascript",_.A),P.A.registerLanguage("yaml",z.A),P.A.registerLanguage("json",B.A),P.A.registerLanguage("hcl",F.A);const oe={light:ne,duotoneDark:te};function re(e){let{theme:t="light",language:n,actions:o,style:r,children:a,...i}=e;const l={border:"none",borderRadius:0,margin:0,padding:J,...r};return(0,O.Y)(Z,{theme:t,actions:o,children:(0,O.Y)(P.A,{language:n,style:oe[t],customStyle:l,codeTagProps:{style:D()(r,"backgroundColor")},...i,children:a})})}var ae=n(48091);function ie(e){return e&&`${e} !important`}function le(e){let{tooltipMessage:t,...n}=e;const{color:r,hoverColor:a,hoverBackgroundColor:l,backgroundColor:d,borderColor:u}=(0,i.useContext)(V),h=(0,o.AH)({zIndex:1,color:ie(r),borderColor:ie(u),backgroundColor:ie(d),":hover":{color:ie(a),backgroundColor:ie(l)}},"");return(0,O.Y)(s.LegacyTooltip,{title:t,children:(0,O.Y)(c.B,{componentId:"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33",...n,css:h})})}function ce(e){let{copyText:t,onClick:n,...o}=e;const{actionIcon:r,tooltipMessage:a,copy:l}=function(e,t,n){const o=(0,u.tz)(),r=t||o.formatMessage({id:"hBAhI8",defaultMessage:"Copy"}),a=o.formatMessage({id:"g4hHzO",defaultMessage:"Copied"}),l=(0,ae.useClipboard)(),d=(0,i.useRef)(),[h,p]=(0,i.useState)(!1);return(0,i.useEffect)((()=>()=>{window.clearTimeout(d.current)}),[]),{actionIcon:h?(0,O.Y)(c.r,{}):(0,O.Y)(s.CopyIcon,{}),tooltipMessage:h?a:r,copy:()=>{l.copy(e),window.clearTimeout(d.current),p(!0),null==n||n(),d.current=window.setTimeout((()=>{p(!1)}),3e3)},ariaLabel:r}}(t);return(0,O.Y)(le,{tooltipMessage:a,icon:r,onClick:e=>{l(),null==n||n(e)},...o})}var se=n(12394),de=n.n(se),ue=n(57488);function he(e){let{ref:t,debounceTimeMs:n}=e;const o=(0,i.useRef)({width:-1,height:-1}),r=(0,i.useRef)(),[a,l]=(0,i.useState)(null),c=(0,i.useCallback)((e=>{if(0===e.length)return;const t=e[0].contentRect;if(-1===o.current.width)return o.current={width:t.width,height:t.height},void l(o.current);if(t.width!==o.current.width||t.height!==o.current.height){if(o.current.width=t.width,o.current.height=t.height,!n)return void l({...o.current});clearTimeout(r.current),r.current=setTimeout((()=>{l({...o.current})}),n)}}),[n]),s=(0,i.useRef)(new ResizeObserver(c));return(0,i.useEffect)((()=>{const e="function"==typeof t?t():t.current;if(e){const t=s.current;return t.observe(e),()=>{t.unobserve(e)}}})),a}var pe=n(98045),ge=n(21340),fe=n.n(ge),Ee=n(64822),me=n(40569);const ve=(0,i.createContext)({esComponent:me.E.UiInfra,errorBoundaryId:"__default"});function ye(){return(0,i.useContext)(ve)}const Te="rit_comp_id";const be=new WeakMap;let Se=null;function Ie(e){return"nativeEvent"in e?e.nativeEvent:e}function Ce(){const{proto:e}=(0,i.useContext)(we);return(0,i.useCallback)((t=>(0,Ee.g)(e?e(t):t)),[e])}function Ae(e){var t;return{type:e.eventType.toUpperCase(),client_source:e.eventClientSource.toUpperCase(),entity:{type:e.eventEntity.entityType.toUpperCase(),sub_type:null===(t=e.eventEntity.entitySubType)||void 0===t?void 0:t.toUpperCase(),entity_id:e.eventEntity.entityId},payload:(()=>{const t={interaction_subject:e.eventPayload.interactionSubject,interaction_id:e.eventPayload.interactionId,root_interaction_id:e.eventPayload.rootInteractionId};switch(e.eventType){case"page_view":return{...t,page_view_payload:{referrer_component_id:e.eventPayload.referrerComponentId,browser_screen_height:e.eventPayload.browserScreenHeight,browser_screen_width:e.eventPayload.browserScreenWidth,page_view_id:e.eventPayload.pageViewId}};case"component_value_change":const n=void 0!==e.eventPayload.valueBoolean?{value_boolean:e.eventPayload.valueBoolean}:void 0!==e.eventPayload.valueString?{value_string:e.eventPayload.valueString}:void 0!==e.eventPayload.valueNumber?{value_number:e.eventPayload.valueNumber}:{};return{...t,component_value_change_payload:n};case"interaction_phase":return{...t,interaction_phase_payload:{name:e.eventPayload.interactionPhaseName,type:e.eventPayload.interactionPhaseType.toUpperCase(),status:e.eventPayload.interactionPhaseStatus.toUpperCase()}};default:return t}})(),custom_context:e.customContext}}function Ne(e,t,n){e("uiAnalyticsEvent",function(e){const t={...e.customContext,interactionSubject:e.eventPayload.interactionSubject,rootInteractionId:e.eventPayload.rootInteractionId,interactionId:e.eventPayload.interactionId,eventType:e.eventType,eventClientSource:e.eventClientSource,entityType:e.eventEntity.entityType,entitySubType:e.eventEntity.entitySubType,entityId:e.eventEntity.entityId};switch(e.eventType){case"page_view":{const{productEntityChain:n,...o}=e.eventPayload,r=null==n?void 0:n.map((e=>`${e.type}:${e.id}`)).join(",");return{...t,pageId:e.eventEntity.entityId,productEntityChain:r,...o}}case"component_click":case"component_view":return{...t,componentType:e.eventEntity.entitySubType,componentId:e.eventEntity.entityId};case"component_value_change":return{...t,componentType:e.eventEntity.entitySubType,componentId:e.eventEntity.entityId,valueChangeEventValueBoolean:e.eventPayload.valueBoolean,valueChangeEventValueString:e.eventPayload.valueString,valueChangeEventValueNumber:e.eventPayload.valueNumber};case"interaction_phase":return{...t,interactionPhaseName:e.eventPayload.interactionPhaseName,interactionPhaseStatus:e.eventPayload.interactionPhaseStatus,interactionPhaseType:e.eventPayload.interactionPhaseType}}}(n)),t&&t({observability_log:Ae(n)})}const Re={getCurrentInteraction:()=>null,startInteraction:()=>null},Me=l().createContext(Re);const xe={onClick:"component_click",onValueChange:"component_value_change",onView:"component_view"},Le=e=>{let{recordEvent:t,recordProto:n,startInteraction:o}=e;return(0,i.useCallback)((e=>{var r,a;let{eventType:i,componentType:l,componentId:c,value:s,shouldStartInteraction:d,event:u,skip:h}=e,p=null;const g=xe[i],f=function(e,t,n){return{interactionName:`${Te}:${e}:component:${t}:${n}`,componentType:t,componentId:n}}(g,l,c);let E=null;if(!(null!=u&&u.defaultPrevented||h)){switch(d&&(E=o(f.interactionName,void 0,void 0,void 0,{isInteractionSubject:!1}),E&&u&&function(e,t){if(!t)return void Ee.A.sev2(me.E.UiInfra,"Experimental: set-interaction-for-event-with-null",new Error("cannot set null interaction for event"));const n=Ie(e);var o;be.has(n)&&Ee.A.sev2(me.E.UiObservability,"Experimental: event-has-interaction-associated-already",{eventType:n.type,existing:null===(o=be.get(n))||void 0===o?void 0:o.name,new:null==t?void 0:t.name,stack:(new Error).stack}),Se=n,be.set(n,t),queueMicrotask((()=>{n===Se&&(Se=null)}))}(u,E)),g){case"component_click":p={eventType:g,eventClientSource:"design_system",eventEntity:{entityType:"component",entitySubType:l,entityId:c},eventPayload:{interactionSubject:!0,interactionId:null===(r=E)||void 0===r?void 0:r.id,rootInteractionId:null===(a=E)||void 0===a?void 0:a.rootInteractionId}};break;case"component_value_change":p={eventType:g,eventClientSource:"design_system",eventEntity:{entityType:"component",entitySubType:l,entityId:c},eventPayload:{interactionSubject:!0,valueBoolean:"boolean"==typeof s?s:void 0,valueString:"string"==typeof s?s:void 0,valueNumber:"number"==typeof s?s:void 0}};break;case"component_view":p={eventType:g,eventClientSource:"design_system",eventEntity:{entityType:"component",entitySubType:l,entityId:c},eventPayload:{interactionSubject:!0}}}p?Ne(t,n,p):Ee.A.sev2(me.E.UiObservability,"InternalDesignSystemEventProvider/UnknownEventType",{eventType:i,componentType:l,componentId:c})}}),[t,n,o])};const we=l().createContext({tags:{},contextChain:[],proto:void 0});function Oe(e,t){const n=(0,i.useRef)([]),{esComponent:o,errorBoundaryId:r}=ye();return(0,i.useCallback)(((a,i)=>{const l=Object.keys(i),c=Object.keys(a).filter((e=>l.includes(e)&&!n.current.includes(e)));c.length>0&&(n.current.push(...c),Ee.A.sev2(o,t,`Error boundary: ${r}, record event context chain: ${e.join(",")}, duplicate tags: ${c.join(",")}. Please follow go/recordeventduplicatetags to resolve.`,!0))}),[e,t,o,r])}function ke(e,t,n,o){if(n&&e(null!=n?n:{},t),n&&o){const e=Object.keys(n),t=Object.keys(o);fe()(0===e.filter((e=>t.includes(e))).length,`Cannot specify a tag in both the tags and as override. Tags: ${e.join(",")}, overrides: ${t.join(",")}`)}return n||o?{...t,...n,...o}:t}function Ye(){const{tags:e,contextChain:t}=(0,i.useContext)(we),n=Oe(t,"DuplicateRecordEventInvocationTag"),o=(0,i.useCallback)(((t,o)=>ke(n,e,t,o)),[n,e]);return{contextTags:e,mergeTags:o}}function De(){const{mergeTags:e}=Ye();return(0,i.useCallback)((t=>{let{metric:n,tags:o,overrides:r,eventData:a}=t;const i=e(o,r);(0,Ee.r)(n,i,a)}),[e])}function Pe(){const e=De();return(0,i.useCallback)(((t,n,o)=>e({metric:t,tags:n,eventData:o})),[e])}function He(e,t){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];const i=e&&e(n,...r);return n&&n.defaultPrevented?i:t(n,...r)}}function Fe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{!function(e,t){if(null!==e)if("function"==typeof e)e(t);else if("object"==typeof e)try{e.current=t}catch(n){throw new Error(`Cannot assign value "${t}" to ref "${e}"`)}}(t,e)}))}}var Ue=n(67271),_e=n(15464);const Be=(0,i.createContext)(null);Be.displayName="GanttContext";const We=()=>{const e=(0,i.useContext)(Be);if(!e)throw new Error("useGanttContext must be used within a GanttContext.Provider");return e};var ze={name:"bjn8wh",styles:"position:relative"};const Ge=(0,i.forwardRef)((function(e,t){let{...n}=e;const{width:o}=We();return o?(0,O.Y)("div",{ref:t,"data-gantt-body":"",css:ze,...n}):null})),Ke=(0,i.createContext)(null);Ke.displayName="GanttRowContext";var Ve={name:"4d7y4w",styles:"display:flex;align-items:center;min-width:2px;overflow:visible;min-height:16px;padding:2px;box-sizing:border-box;width:var(--gantt-cell-length);inset-inline-start:calc(var(--gantt-cell-position) + var(--gantt-cell-padding))"};const $e=(0,i.forwardRef)((function(e,t){let{as:n="div",style:o,id:r,start:a,end:l,onMouseEnter:c,onMouseLeave:s,...d}=e;const{nodesById:u,paddingLeft:h}=We(),p=(e=>{const t=We();return(0,Ue.Pj)(t.storeRef.current,e)})((e=>e.setHighlightedEdge)),{length:g,position:f}=function(e){let{start:t,end:n}=e;const{start:o,scale:r}=We();return{length:Math.max(n-t,0)*r,position:(t-o)*r}}({start:a,end:l}),{top:E,height:m}=(()=>{const e=(0,i.useContext)(Ke);if(!e)throw new Error("useGanttRowContext must be used within a GanttRowContext.Provider");return e})();if((0,i.useLayoutEffect)((()=>{if(r){const e=String(r),t=u.current;return()=>{t.delete(e)}}}),[r]),u.current.has(String(r))){const e=u.current.get(String(r));e.rect.x=f,e.rect.width=g,e.rect.y=E,e.rect.height=m}else u.current.set(String(r),{rect:{width:g,x:f,height:m,y:E}});return(0,O.Y)(n,{ref:t,"data-gantt-cell":"","data-gantt-cell-id":r,css:Ve,style:{position:"absolute",zIndex:1,"--gantt-cell-length":`${g}px`,"--gantt-cell-position":`${f}px`,"--gantt-cell-padding":`${h}px`,...o},onMouseEnter:He(c,(()=>p(r))),onMouseLeave:He(s,(()=>p(void 0))),...d})}));var je={name:"1v26o98",styles:"transform:translateX(-42%)"};const Xe=(0,i.forwardRef)((function(e,t){let{style:n,...o}=e;const{dividerLengthInPixels:r}=We();return(0,O.Y)("div",{ref:t,"data-gantt-header-cell":"",css:je,style:{minWidth:r,...n},...o})})),qe=e=>{let{children:t}=e;const{dividers:n}=We(),o=(0,u.tz)();return t?(0,O.Y)(O.FK,{children:t(n)}):(0,O.Y)(O.FK,{children:n.map((e=>(0,O.Y)(Xe,{children:(0,O.Y)("span",{children:o.formatTime(new Date(e),{timeStyle:"medium"})})},e)))})},Qe=e=>({position:"relative",display:"flex",alignItems:"center",minHeight:"32px",textAlign:"center",fontVariantNumeric:"tabular-nums",borderBottomColor:e.colors.border,borderBottomStyle:"solid",borderBottomWidth:"1px",backgroundColor:e.colors.backgroundPrimary,color:e.colors.textSecondary,whiteSpace:"nowrap",overflow:"hidden"}),Je=(0,i.forwardRef)((function(e,t){const{theme:n}=(0,c.a)(),{paddingLeft:r,paddingRight:a}=We();return(0,O.Y)("div",{ref:t,"data-gantt-header":"",css:(0,o.AH)({...Qe(n),padding:`0px ${a}px 0px ${r}px`},""),...e})})),Ze=(0,i.forwardRef)((function(e,t){let{style:n,height:r=32,top:a,...l}=e;const{paddingLeft:s,paddingRight:d}=We(),u=(0,i.useMemo)((()=>({height:r,top:a})),[r,a]),{theme:h}=(0,c.a)();return(0,O.Y)(Ke.Provider,{value:u,children:(0,O.Y)("div",{ref:t,"data-gantt-row":"",css:(0,o.AH)({boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",backgroundColor:h.colors.backgroundPrimary,padding:`8px ${d}px 8px ${s}px`,minHeight:"32px",minWidth:"100%","&:nth-of-type(odd)":{backgroundColor:h.colors.backgroundSecondary}},""),style:{...n},...l})})})),et=(0,i.forwardRef)((function(e,t){let{style:n,start:r,...a}=e;const{theme:i}=(0,c.a)(),{start:l,scale:s,paddingLeft:d}=We(),u=(r-l)*s;return(0,O.Y)("div",{ref:t,"data-gantt-vertical-marker":"","data-gantt-vertical-marker-offset":r,style:{left:u,insetInlineStart:u,...n},"aria-hidden":"true",css:(0,o.AH)({boxSizing:"border-box",position:"absolute",top:"0",bottom:"0",zIndex:0,width:"1px",backgroundColor:i.colors.backgroundPrimary,marginLeft:d},""),...a})})),tt=()=>{const{dividers:e}=We();return(0,O.Y)(O.FK,{children:e.map((e=>(0,O.Y)(et,{start:e},e)))})};function nt(e){let{start:t,end:n,maxWidth:o,numDividers:r,dividerLengthInPixels:a}=e;if(r<0||n<t)return[];const i=Math.max(1e3,(n-t)/r),l=[];for(let e=t,r=0;e<=n&&!(r>0&&r+.9*a>=o);e+=i,r+=a)l.push(e);return l}var ot={name:"10vana9",styles:"position:relative;display:grid;grid-template-columns:1fr;grid-template-rows:min-content;align-items:start;height:min-content"};const rt=(0,i.forwardRef)((function(e,t){var n,o;let{children:r,start:a,end:l,style:c,numDividers:s=10,paddingLeft:d=40,paddingRight:u=8,width:h=0,...p}=e;const g=(0,i.useRef)();g.current||(g.current=(0,_e.A)((e=>({highlightedEdge:void 0,setHighlightedEdge:t=>e((()=>({highlightedEdge:t})))}))));const f=(0,i.useRef)(new Map),E=(0,i.useRef)(null),m=null!==(n=null===(o=he({ref:E,debounceTimeMs:16}))||void 0===o?void 0:o.width)&&void 0!==n?n:h,v=Math.max(1,"function"==typeof s?Math.floor(s(m)):s),y=(0,i.useMemo)((()=>{const e=Math.max(0,m-d-u),t=e/v;return{storeRef:g,start:a,scale:e/(l-a),end:l,dividerLengthInPixels:t,dividers:nt({start:a,end:l,maxWidth:e,numDividers:v,dividerLengthInPixels:t}),nodesById:f,paddingLeft:d,paddingRight:u,numDividers:v,width:m}}),[a,l,d,u,v,m]);return(0,O.Y)(Be.Provider,{value:y,children:(0,O.Y)("div",{"data-gantt-root":"",style:{...c},css:ot,ref:Fe(E,t),...p,children:r})})})),at="mlflow.trace_schema.version",it="response",lt="trace";let ct=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.FUNCTION="FUNCTION",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.UNKNOWN="UNKNOWN",e}({}),st=function(e){return e.MODELS="models",e.DOCUMENT="document",e.CONNECT="connect",e.SEARCH="search",e.SORT="sort",e.UNKNOWN="unknown",e.FUNCTION="function",e.CODE="code",e.NUMBERS="numbers",e.WRENCH="wrench",e.AGENT="agent",e.CHAIN="chain",e}({}),dt=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.UNKNOWN="UNKNOWN",e}({});const ut=e=>{let{type:t=st.CONNECT}=e;const{theme:n}=(0,c.a)(),r={[st.MODELS]:(0,O.Y)(s.ModelsIcon,{}),[st.DOCUMENT]:(0,O.Y)(s.FileDocumentIcon,{}),[st.CONNECT]:(0,O.Y)(s.ConnectIcon,{}),[st.CODE]:(0,O.Y)(s.CodeIcon,{}),[st.FUNCTION]:(0,O.Y)(s.FunctionIcon,{}),[st.NUMBERS]:(0,O.Y)(s.NumbersIcon,{}),[st.SEARCH]:(0,O.Y)(s.SearchIcon,{}),[st.SORT]:(0,O.Y)(s.SortUnsortedIcon,{}),[st.UNKNOWN]:(0,O.Y)(s.QuestionMarkIcon,{}),[st.WRENCH]:(0,O.Y)(s.WrenchIcon,{}),[st.AGENT]:(0,O.Y)(s.Robot2Icon,{}),[st.CHAIN]:(0,O.Y)(s.ChainIcon,{})};return(0,O.Y)("div",{css:(0,o.AH)({width:n.general.iconSize,height:n.general.iconSize,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:n.borders.borderRadiusMd,svg:{width:n.general.iconFontSize,height:n.general.iconFontSize}},""),children:r[t]})};function ht(e){switch(e){case ct.LLM:return st.MODELS;case ct.CHAIN:return st.CHAIN;case ct.AGENT:return st.AGENT;case ct.TOOL:return st.WRENCH;case ct.CHAT_MODEL:return st.MODELS;case ct.RETRIEVER:return st.SEARCH;case ct.PARSER:return st.CODE;case ct.EMBEDDING:return st.NUMBERS;case ct.RERANKER:return st.SORT;case ct.FUNCTION:return st.FUNCTION;case ct.UNKNOWN:return st.UNKNOWN;default:return st.FUNCTION}}function pt(e){try{return JSON.parse(e)}catch(t){return e}}function gt(e,t){var n,o;const r=t.toLowerCase().trim();if(""===r)return{filteredTreeNodes:[e],matches:[]};const a=null!==(n=e.children)&&void 0!==n?n:[],i=[],l=[];a.forEach((e=>{const{filteredTreeNodes:t,matches:n}=gt(e,r);i.push(...t),l.push(...n)}));const c=(null!==(o=e.title)&&void 0!==o?o:"").toLowerCase(),s=((e,t)=>{const n=[],o={attributes:null==e?void 0:e.attributes,inputs:null==e?void 0:e.inputs,outputs:null==e?void 0:e.outputs};return m()(o,((o,r)=>{yt(o).forEach((o=>{o.key.toLowerCase().includes(t)&&n.push({span:e,section:r,key:o.key,isKeyMatch:!0,matchIndex:0});const a=o.value.toLowerCase().split(t).length-1;for(let t=0;t<a;t++)n.push({span:e,section:r,key:o.key,isKeyMatch:!1,matchIndex:t})}))})),n})(e,r);return 0!==s.length||c.includes(r)?{filteredTreeNodes:[{...e,children:i}],matches:s.concat(l)}:{filteredTreeNodes:i,matches:l}}function ft(e){var t,n;const o=null!==(t=null===(n=e.trace_data)||void 0===n?void 0:n.spans)&&void 0!==t?t:e.data.spans,r={},a={};o.forEach((e=>{r[e.context.span_id]=e,a[e.context.span_id]=[]})),o.forEach((e=>{var t;const n=null!==(t=e.parent_span_id)&&void 0!==t?t:e.parent_id;if(!f()(n)){if(!a[n])throw new Error("Tree structure is malformed!");a[n].push(e.context.span_id)}}));const i=o.find((e=>{var t;return f()(null!==(t=e.parent_span_id)&&void 0!==t?t:e.parent_id)}));if(f()(i))return null;return function e(t){var n,o,l,c;const s=r[t],d=Number(null!==(n=null==i?void 0:i.start_time)&&void 0!==n?n:0),u=Number(null!==(o=null==i?void 0:i.end_time)&&void 0!==o?o:0),h=a[t].map(e);if(void 0!==s.parent_id)return((e,t,n,o)=>{var r,a,i,l;const c=pt(null===(r=e.attributes)||void 0===r?void 0:r["mlflow.spanType"]),s=pt(null===(a=e.attributes)||void 0===a?void 0:a["mlflow.spanInputs"]),d=pt(null===(i=e.attributes)||void 0===i?void 0:i["mlflow.spanOutputs"]),u=x()(w()(e.attributes,((e,t)=>t.startsWith("mlflow."))),(e=>pt(e))),h=(Number(e.start_time)-t)/1e3,p=(Number(null!==(l=e.end_time)&&void 0!==l?l:n)-t)/1e3;return{title:e.name,icon:(0,O.Y)(ut,{type:ht(c)}),type:c,key:e.context.span_id,start:h,end:p,children:o,inputs:s,outputs:d,attributes:u}})(s,d,u,h);const p=null!==(l=s.span_type)&&void 0!==l?l:ct.UNKNOWN;return{title:s.name,icon:(0,O.Y)(ut,{type:ht(p)}),type:p,key:s.context.span_id,start:Number(s.start_time)-d,end:Number(null!==(c=s.end_time)&&void 0!==c?c:u)-d,children:h,inputs:s.inputs,outputs:s.outputs,attributes:s.attributes}}(i.context.span_id)}function Et(){var e;return null!==(e=(0,k.s)("mlflow_tracing",null))&&void 0!==e?e:(0,k.s)("databricks.fe.mlflow.enableTracingUI",!1)}function mt(e){var t;if(e)return R()(e)?null===(t=e.find((e=>e.key===at)))||void 0===t?void 0:t.value:e[at]}const vt=e=>{const t=null==e?void 0:e.info,n=null==e?void 0:e.data;if(!t||!n||null==n||!n.spans)return!1;if((null==t?void 0:t.request_metadata)&&mt(t.request_metadata))return!0;return!(!(null==t?void 0:t.tags)||!mt(t.tags))},yt=e=>f()(e)?[]:Array.isArray(e)||A()(e)||I()(e)||b()(e)?[{key:"",value:JSON.stringify(e,null,2)}]:Object.entries(e).map((e=>{let[t,n]=e;return{key:t,value:JSON.stringify(n,null,2)}})),Tt="yellow500",bt="yellow200",St=e=>{let{searchFilter:t,data:n,activeMatch:r,containsActiveMatch:a}=e;const{theme:l}=(0,c.a)(),s=(0,i.useCallback)((e=>{null==e||e.scrollIntoView({block:"nearest",inline:"nearest"})}),[]),d=(0,i.useMemo)((()=>t?(e=>{let{searchFilter:t,data:n,activeMatchBackgroundColor:r,inactiveMatchBackgroundColor:a,containsActiveMatch:i,activeMatch:l,scrollToActiveMatch:c}=e;const s=new RegExp(`(${y()(t.trim())})`,"gi"),d=n.split(s),u=[];let h=0;for(let e=0;e<d.length;e++)if(d[e].toLowerCase().includes(t.toLowerCase().trim())){const t=i&&l.matchIndex===h,n=t?r:a,s=(0,O.Y)("span",{ref:t?c:null,css:(0,o.AH)({backgroundColor:n,scrollMarginTop:50},""),children:d[e]},e);h++,u.push(s)}else u.push(d[e]);return u})({data:n,searchFilter:t,activeMatchBackgroundColor:l.colors[Tt],inactiveMatchBackgroundColor:l.colors[bt],containsActiveMatch:a,activeMatch:r,scrollToActiveMatch:s}):[]),[t,n,l,a,r,s]);return(0,O.Y)("pre",{css:(0,o.AH)({whiteSpace:"pre-wrap",backgroundColor:l.colors.backgroundSecondary,padding:l.spacing.sm,fontSize:l.typography.fontSizeSm},""),children:d})},It=e=>{let{title:t,searchFilter:n,isActiveMatch:r}=e;const{theme:a}=(0,c.a)(),l=(0,i.useCallback)((e=>{null==e||e.scrollIntoView({block:"nearest",inline:"nearest"})}),[]),s=t.toLowerCase();if(!s.includes(n))return(0,O.Y)("div",{children:t});const d=s.indexOf(n),u=d+n.length,h=r?a.colors[Tt]:a.colors[bt];return(0,O.FD)("div",{children:[t.slice(0,d),(0,O.Y)("span",{ref:r?l:null,css:(0,o.AH)({backgroundColor:h,scrollMarginTop:50},""),children:t.slice(d,u)}),t.slice(u)]})};var Ct={name:"vy7omj",styles:"display:inline-block;word-break:break-all"};function At(e){var t;let{title:n,value:o,searchFilter:r,activeMatch:a,containsActiveMatch:l}=e;const d=(0,i.useMemo)((()=>JSON.stringify(o,null,2)),[o]),u=Boolean(r)&&!f()(a)&&d.toLowerCase().includes(r),[h,p]=(0,i.useState)(u),[g,E]=(0,i.useState)(!1),m=(0,i.useRef)(null),v=(0,i.useMemo)((()=>h?d:JSON.stringify(o)),[o,d,h]),{theme:y}=(0,c.a)(),T=(0,i.useCallback)((e=>(0,O.Y)("pre",{...e,ref:m})),[]),b=l&&null!==(t=null==a?void 0:a.isKeyMatch)&&void 0!==t&&t;return(0,i.useEffect)((()=>{m.current&&E(m.current.scrollWidth>m.current.clientWidth)}),[o]),(0,O.FD)(O.FK,{children:[(0,O.Y)(c.p.Text,{color:"secondary",css:Ct,title:n,children:(0,O.Y)(It,{title:n,searchFilter:r,isActiveMatch:b})}),u?(0,O.FD)(O.FK,{children:[(0,O.Y)("div",{}),(0,O.Y)(St,{searchFilter:r,data:d,activeMatch:a,containsActiveMatch:l})]}):(0,O.FD)(O.FK,{children:[g?(0,O.Y)(c.B,{size:"small",componentId:h?"shared.model-trace-explorer.collapse-attribute-row":"shared.model-trace-explorer.expand-attribute-row",type:"tertiary",icon:h?(0,O.Y)(s.ChevronDownIcon,{}):(0,O.Y)(c.m,{}),onClick:()=>p(!h)}):(0,O.Y)("div",{}),(0,O.Y)(re,{PreTag:T,language:"json",lineProps:{style:{wordBreak:"break-all",whiteSpace:"pre-wrap"}},wrapLines:h,style:{backgroundColor:y.colors.backgroundSecondary,padding:y.spacing.xs,overflow:h?"auto":"hidden",textOverflow:h?"unset":"ellipsis",height:"fit-content"},children:v})]})]})}const Nt=4;function Rt(e){var t;let{title:n,tokens:r,data:a,searchFilter:l,activeMatch:d,containsActiveMatch:h}=e;const p=Boolean(l)&&!f()(d)&&a.toLowerCase().includes(l),{theme:g}=(0,c.a)(),[E,m]=(0,i.useState)(!0),[v,y]=(0,i.useState)(p),T=(0,i.useRef)(null),b=E||a.split("\n").length>Nt,S=h&&null!==(t=null==d?void 0:d.isKeyMatch)&&void 0!==t&&t,I=(0,i.useMemo)((()=>b&&!v?a.split("\n").slice(0,Nt).join("\n"):a),[a,b,v]);(0,i.useEffect)((()=>{T.current&&m(T.current.scrollWidth>T.current.clientWidth)}),[a]);const C=(0,i.useCallback)((e=>(0,O.Y)("pre",{...e,ref:T})),[]);return(0,O.Y)("div",{css:(0,o.AH)({position:"relative",marginBottom:g.spacing.md},""),children:(0,O.FD)("div",{css:(0,o.AH)({borderRadius:g.borders.borderRadiusMd,overflow:"hidden"},""),children:[(0,O.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${g.colors.border}`,backgroundColor:g.colors.backgroundSecondary,padding:g.spacing.xs},""),children:[(0,O.Y)(c.p.Title,{css:(0,o.AH)({marginLeft:g.spacing.md-g.spacing.xs,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},""),level:4,color:"secondary",withoutMargins:!0,children:(0,O.Y)(It,{title:n,searchFilter:l,isActiveMatch:S})}),(0,O.Y)(ce,{componentId:"shared.model-trace-explorer.copy-snippet",copyText:a},"copy-snippet")]}),p?(0,O.Y)(St,{data:a,searchFilter:l,activeMatch:d,containsActiveMatch:!d.isKeyMatch&&h}):(0,O.FD)(O.FK,{children:[(0,O.Y)(re,{PreTag:C,showLineNumbers:!0,language:"json",lineProps:{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"}},wrapLines:v,style:{backgroundColor:g.colors.backgroundSecondary,padding:g.spacing.sm,paddingBottom:b?0:g.spacing.sm,overflow:v?"auto":"hidden"},children:I}),b&&(0,O.Y)("div",{css:(0,o.AH)({backgroundColor:g.colors.backgroundSecondary},""),children:(0,O.Y)(c.B,{css:(0,o.AH)({width:"100%",padding:g.spacing.sm},""),componentId:v?"shared.model-trace-explorer.snippet-see-less":"shared.model-trace-explorer.snippet-see-more",icon:v?(0,O.Y)(s.ChevronUpIcon,{}):(0,O.Y)(s.ChevronDownIcon,{}),type:"tertiary",onClick:()=>y(!v),children:v?(0,O.Y)(u.sA,{id:"AgjhWE",defaultMessage:"See less"}):(0,O.Y)(u.sA,{id:"HYQHVk",defaultMessage:"See more"})})})]})]})})}const Mt=e=>{let{sectionKey:t,title:n,children:r,withBorder:a=!1}=e;const[l,d]=(0,i.useState)(!0),{theme:u}=(0,c.a)();return(0,O.FD)("div",{css:(0,o.AH)({marginBottom:u.spacing.md},""),children:[(0,O.FD)("div",{css:(0,o.AH)({alignItems:"center",display:"flex",flexDirection:"row",gap:u.spacing.xs,marginBottom:u.spacing.xs},""),children:[(0,O.Y)(c.B,{size:"small",componentId:`shared.model-trace-explorer.expand-${t}`,type:"tertiary",icon:l?(0,O.Y)(s.ChevronDownIcon,{}):(0,O.Y)(c.m,{}),onClick:()=>d(!l)}),(0,O.Y)(c.p.Title,{withoutMargins:!0,level:4,children:n})]}),l&&(0,O.Y)("div",{css:(0,o.AH)({border:a?`1px solid ${u.colors.border}`:"",borderRadius:a?u.borders.borderRadiusMd:"",padding:a?u.spacing.md:0,paddingTop:a?u.spacing.md:u.spacing.sm,paddingBottom:0},""),children:r})]})};function xt(e){let{activeSpan:t,className:n,searchFilter:r,activeMatch:a}=e;const{theme:l}=(0,c.a)(),s=(0,i.useMemo)((()=>yt(null==t?void 0:t.inputs)),[t]),d=(0,i.useMemo)((()=>yt(null==t?void 0:t.outputs)),[t]);if(f()(t))return null;const{attributes:h}=t,g=p()(h).length>0,E=s.length>0,m=d.length>0,v=!f()(a)&&a.span.key===t.key;return(0,O.FD)("div",{css:(0,o.AH)({padding:l.spacing.md,overflowY:"auto",borderLeft:`1px solid ${l.colors.border}`,minWidth:300},""),className:n,children:[g&&(0,O.Y)(Mt,{sectionKey:"attributes",title:(0,O.Y)(u.sA,{id:"vIPatv",defaultMessage:"Attributes"}),children:h&&(0,O.Y)("div",{css:(0,o.AH)({display:"grid",gridTemplateColumns:"fit-content(25%) auto 1fr",gap:l.spacing.sm,marginBottom:l.spacing.md},""),children:Object.entries(h).map(((e,t)=>{let[n,o]=e;return(0,O.Y)(At,{title:n,value:o,searchFilter:r,activeMatch:a,containsActiveMatch:v&&"attributes"===a.section&&a.key===n},n)}))})}),E&&(0,O.Y)(Mt,{withBorder:!0,sectionKey:"input",title:(0,O.Y)(u.sA,{id:"/TX1Az",defaultMessage:"Inputs"}),children:s.map(((e,t)=>{let{key:n,value:o}=e;return(0,O.Y)(Rt,{title:n,data:o,searchFilter:r,activeMatch:a,containsActiveMatch:v&&"inputs"===a.section&&a.key===n},n||t)}))}),m&&(0,O.Y)(Mt,{withBorder:!0,sectionKey:"output",title:(0,O.Y)(u.sA,{id:"ZstVNI",defaultMessage:"Outputs"}),children:d.map((e=>{let{key:t,value:n}=e;return(0,O.Y)(Rt,{title:t,data:n,searchFilter:r,activeMatch:a,containsActiveMatch:v&&"outputs"===a.section&&a.key===t},t)}))})]})}var Lt={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},wt={name:"1endq0h",styles:"display:flex;flex:1;overflow-y:auto;flex-direction:row"},Ot={name:"kjqqaz",styles:"width:0;position:relative"};const kt=(0,i.forwardRef)(((e,t)=>{var n;let{initialRatio:r,paneWidth:a,setPaneWidth:l,leftChild:s,leftMinWidth:d,rightChild:u,rightMinWidth:h}=e;const[p,g]=(0,i.useState)(!1),f=(0,i.useRef)(null),E=null===(n=he({ref:f}))||void 0===n?void 0:n.width,m=(null!=E?E:1/0)-h,v=(0,i.useRef)(r),{theme:y}=(0,c.a)(),T=(0,i.useCallback)((e=>{E&&(v.current=e/E)}),[E]);return(0,i.useImperativeHandle)(t,(()=>({updateRatio:T}))),(0,i.useEffect)((()=>{E&&l(de()(E*v.current,d,m))}),[E,m,d,h,l]),(0,O.FD)("div",{ref:f,css:wt,children:[p&&(0,O.Y)(o.mL,{styles:Lt}),(0,O.Y)(ue.ResizableBox,{axis:"x",width:a,css:(0,o.AH)({display:"flex",flex:`0 0 ${a}px`},""),handle:(0,O.Y)("div",{css:Ot,children:(0,O.Y)("div",{css:(0,o.AH)({position:"relative",width:y.spacing.sm,marginLeft:-y.spacing.xs,minHeight:"100%",cursor:"ew-resize",backgroundColor:"rgba(0,0,0,0)",zIndex:1,":hover":{backgroundColor:"rgba(0,0,0,0.1)"}},"")})}),onResize:(e,t)=>{let{size:n}=t;const o=de()(n.width,d,m);l(o),E&&(v.current=o/E)},onResizeStart:()=>g(!0),onResizeStop:()=>g(!1),minConstraints:[d,1/0],maxConstraints:[m,1/0],children:s}),u]})}));var Yt=kt;var Dt={name:"2wv1be",styles:"width:100%;box-sizing:border-box"};var Pt=e=>{let{searchFilter:t,setSearchFilter:n,matchData:r,handleNextSearchMatch:a,handlePreviousSearchMatch:l}=e;const[u,h]=(0,i.useState)(t),p=(0,pe.YQ)(n,350),{theme:g}=(0,c.a)();return(0,O.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:g.spacing.sm},""),children:[(0,O.Y)(d.I,{componentId:"shared.model-trace-explorer.search-input",allowClear:!0,placeholder:"Search",value:u,onClear:()=>{n(""),h("")},onChange:e=>{h(e.target.value),p(e.target.value.toLowerCase())},prefix:(0,O.Y)(s.SearchIcon,{}),css:Dt}),r.match&&(0,O.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",marginLeft:g.spacing.xs,marginRight:g.spacing.sm,alignItems:"center"},""),children:[(0,O.FD)(c.p.Text,{css:(0,o.AH)({whiteSpace:"nowrap",marginRight:g.spacing.sm},""),children:[r.currentMatchIndex+1," / ",r.totalMatches]}),(0,O.Y)(c.B,{"data-testid":"prev-search-match",icon:(0,O.Y)(s.ChevronUpIcon,{}),onClick:l,componentId:"shared.model-trace-explorer.prev-search-match"}),(0,O.Y)(c.B,{"data-testid":"next-search-match",icon:(0,O.Y)(s.ChevronDownIcon,{}),onClick:a,componentId:"shared.model-trace-explorer.next-search-match"})]})]})};var Ht={name:"15currb",styles:"display:flex;height:100%"},Ft={name:"82a6rk",styles:"flex:1"};const Ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{min:Number.MAX_SAFE_INTEGER,max:0};return e.forEach((e=>{const{start:n,end:o,children:r}=e;n<t.min&&(t.min=n),o>t.max&&(t.max=o),Ut(null!=r?r:[],t)})),t},_t=e=>{const t={},n=e=>{var o;e&&(t[e.key]=e,null===(o=e.children)||void 0===o||o.forEach(n))};return e.forEach(n),t},Bt=200,Wt=e=>{let{node:t,spanTimeFormatter:n}=e;const{theme:r}=(0,c.a)();return(0,O.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",flexDirection:"row",height:r.typography.lineHeightBase},""),children:[(0,O.Y)("span",{children:t.title}),(0,O.Y)(s.Tag,{componentId:"shared.model-trace-explorer.timeline-tree-title-time-pill",title:n(t.end-t.start),css:(0,o.AH)({margin:0,marginLeft:r.spacing.sm,padding:r.spacing.xs},""),children:(0,O.Y)("span",{css:(0,o.AH)({fontSize:11,lineHeight:"11px",color:r.colors.textSecondary},""),children:n(t.end-t.start)})})]})};const zt=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.colors.actionTertiaryBackgroundPress:t?e.colors.actionTertiaryBackgroundHover:void 0},Gt=e=>`${(e/1e6).toFixed(2)} s`,Kt=(e,t)=>{var n;const o=null===(n=e.children)||void 0===n?void 0:n.map((e=>Kt(e,t)));return{...e,children:o,title:(0,O.Y)(Wt,{node:e,spanTimeFormatter:t},e.key)}};var Vt={name:"1jyk3dc",styles:"overflow:hidden;display:flex;flex-direction:column;flex:1"},$t={name:"zjik7",styles:"display:flex"},jt={name:"d3v9zr",styles:"overflow:hidden"},Xt={name:"pa47la",styles:"height:100%;overflow-y:auto;display:flex"};const qt=e=>{let{rootNodes:t,selectedNode:n,setSelectedNode:r,expandedKeys:a=[],setExpandedKeys:l,spanTimeFormatter:d=(e=>`${(e/1e6).toFixed(2)} s`),treeHeader:u,className:h,showGantt:p=!0,onNodeClick:g}=e;const{theme:f,getPrefixedClassName:E}=(0,c.a)(),m=E("tree-title"),v=E("tree"),y=E("tree-node-content-wrapper"),T=(0,i.useMemo)((()=>_t(t)),[t]),[b,S]=(0,i.useState)(200),[I,C]=(0,i.useState)(void 0),A=(0,i.useMemo)((()=>p?t:t.map((e=>Kt(e,d)))),[t,p,d]),N=(0,i.useMemo)((()=>Ut(t)),[t]),R=(0,i.useMemo)((()=>((e,t)=>{const n=[],o=e=>{var r;e&&(n.push(e),t.includes(e.key)&&(null===(r=e.children)||void 0===r||r.forEach(o)))};return e.forEach(o),n})(t,a)),[t,a]),M=(e,t)=>Math.max(2,Math.min(t.max/1e3,Math.floor(e/100))),x=(0,i.useMemo)((()=>(0,O.Y)("div",{css:(0,o.AH)({flex:1,overflow:"auto",minHeight:"100%",height:"min-content",paddingBottom:3*f.spacing.lg,borderRight:p?`1px solid ${f.colors.border}`:void 0,boxSizing:"border-box",display:"flex",[`.${m}`]:{whiteSpace:"nowrap"},[`.${v}`]:{flex:"1 0 auto"},[`.${y} > span:first-child`]:{flexShrink:0},minWidth:100},""),children:(0,O.Y)(s.Tree,{showLine:{showLeafIcon:!1},selectedKeys:n?[n.key]:[],dangerouslySetAntdProps:{showIcon:!0,onMouseEnter:e=>{let{node:t}=e;return C(t)},onMouseLeave:()=>C(void 0)},mode:"selectable",treeData:A,expandedKeys:a,onExpand:l,onSelect:e=>{if(0===e.length)return;const t=T[e[0]];null==r||r(t),null==g||g(t)}})})),[p,f,m,v,y,n,A,a,l,T,r,g]);return(0,O.Y)("div",{css:(0,o.AH)({height:"100%",borderRadius:f.borders.borderRadiusMd,overflow:"hidden",display:"flex"},""),className:h,children:(0,O.FD)("div",{css:Vt,children:[(0,O.FD)("div",{css:$t,children:[(0,O.Y)("div",{css:(0,o.AH)({borderBottom:`1px solid ${f.colors.border}`,boxSizing:"border-box",marginTop:f.spacing.sm,paddingLeft:f.spacing.sm,height:24},""),style:{flex:p?`0 0 ${b}px`:1},children:(0,O.Y)(c.p.Title,{withoutMargins:!0,level:4,children:u})}),p&&(0,O.Y)("div",{css:(0,o.AH)({flex:1,boxSizing:"border-box",marginTop:f.spacing.sm},""),children:(0,O.Y)(rt,{start:N.min,end:N.max,numDividers:e=>M(e,N),paddingLeft:25,paddingRight:75,children:(0,O.Y)(Je,{css:(0,o.AH)({minHeight:24,maxHeight:24,boxSizing:"border-box",lineHeight:"24px"},""),children:(0,O.Y)(qe,{children:e=>e.map((e=>(0,O.Y)(Xe,{css:jt,children:(0,O.Y)(s.LegacyTooltip,{title:Gt(e),placement:"top",children:(0,O.Y)("span",{children:Gt(e)})})},e)))})})})})]}),(0,O.Y)("div",{css:Xt,children:p?(0,O.Y)(Yt,{paneWidth:b,setPaneWidth:S,initialRatio:.67,leftChild:x,leftMinWidth:100,rightChild:(0,O.Y)("div",{css:(0,o.AH)({flex:1,minWidth:Bt},""),"data-testid":"time-marker-area",children:(0,O.Y)(rt,{start:N.min,end:N.max,numDividers:e=>M(e,N),paddingLeft:25,paddingRight:75,children:(0,O.FD)(Ge,{children:[R.map(((e,t)=>(0,O.Y)(s.LegacyTooltip,{title:`${d(e.start)} - ${d(e.end)}`,placement:"right",dangerouslySetAntdProps:{visible:e.key===(null==I?void 0:I.key)},children:(0,O.Y)(Ze,{top:t,height:24,css:(0,o.AH)({cursor:"pointer",backgroundColor:zt(f,e.key===(null==I?void 0:I.key),e===n)||"transparent","&:nth-of-type(2n+1)":{backgroundColor:zt(f,e.key===(null==I?void 0:I.key),e===n)||"transparent"}},""),onClick:()=>null==r?void 0:r(e),onMouseEnter:()=>C(e),onMouseLeave:()=>C(void 0),children:(0,O.Y)($e,{id:e.key,start:e.start,end:e.end,css:(0,o.AH)({backgroundColor:f.colors.grey400},""),children:(0,O.Y)("div",{css:(0,o.AH)({lineHeight:f.typography.lineHeightSm,fontSize:f.typography.fontSizeSm,position:"absolute",left:"100%",marginLeft:f.spacing.xs,top:0,bottom:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},""),children:d(e.end-e.start)})})})},e.key))),(0,O.Y)(tt,{})]})})}),rightMinWidth:Bt}):x})]})})};const Qt=e=>{const t=e/1e6;return`${Math.max(Math.round(100*t)/100,.01).toFixed(2)}s`};var Jt={name:"13ku56z",styles:"display:flex;flex-direction:column;height:100%"},Zt={name:"82a6rk",styles:"flex:1"},en={name:"9jwnf3",styles:"flex:1;overflow-y:auto"};const tn=e=>{let{modelTrace:t,className:n}=e;const{ratio:r,showGantt:l}=window.innerWidth<=768?{ratio:.5,showGantt:!1}:window.innerWidth<=1280?{ratio:.33,showGantt:!1}:window.innerWidth<=1440?{ratio:.4,showGantt:!0}:{ratio:.33,showGantt:!0},d=(0,i.useRef)(null),h=(0,i.useMemo)((()=>ft(t)),[t]),[p,g]=(0,i.useState)(500),[E,m]=(0,i.useState)(l),v=Pe(),y=Ce(),T=(0,i.useCallback)((e=>{return t=v,n=y,o={eventType:"component_click",eventEntity:{entityType:"component",entitySubType:"div",entityId:`shared.model-trace-explorer.${e.type}-span-click`},eventPayload:{interactionSubject:!0}},void Ne(t,n,{...o,eventClientSource:"adhoc"});var t,n,o}),[v,y]),[b,S]=(0,i.useState)(null!=h?h:void 0),{matchData:I,searchFilter:C,setSearchFilter:A,filteredTreeNodes:N,handleNextSearchMatch:R,handlePreviousSearchMatch:M}=(e=>{var t;let{treeNode:n,selectedNode:o,setSelectedNode:r}=e;const[a,l]=(0,i.useState)(""),[c,s]=(0,i.useState)(0),{filteredTreeNodes:d,matches:u}=(0,i.useMemo)((()=>f()(n)?{filteredTreeNodes:[],matches:[]}:gt(n,a)),[null==n?void 0:n.key,a]),h=(0,i.useCallback)((()=>{if(c<u.length-1){s(c+1);const e=u[c+1];r(e.span)}}),[c,u,r]),p=(0,i.useCallback)((()=>{if(c>0){s(c-1);const e=u[c-1];r(e.span)}}),[c,u,r]);return(0,i.useLayoutEffect)((()=>{if(0!==d.length)if(0!==u.length)s(0),r(u[0].span);else{var e;const t=_t(d);(null!==(e=null==o?void 0:o.key)&&void 0!==e?e:"")in t||r(d[0])}}),[d,u,r]),{matchData:{match:null!==(t=u[c])&&void 0!==t?t:null,totalMatches:u.length,currentMatchIndex:c},searchFilter:a.toLowerCase().trim(),setSearchFilter:l,filteredTreeNodes:d,handleNextSearchMatch:h,handlePreviousSearchMatch:p}})({treeNode:h,selectedNode:b,setSelectedNode:S}),{expandedKeys:x,setExpandedKeys:L}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,i.useState)((()=>e.initialExpandAll&&e.rootNodes?a()(_t(e.rootNodes)).map((e=>e.key)):[]));return{expandedKeys:t,setExpandedKeys:n}}({rootNodes:N,initialExpandAll:!0}),{theme:w}=(0,c.a)();(0,i.useLayoutEffect)((()=>{const e=a()(_t(N));L(e.map((e=>e.key)))}),[N,L]);const k=E?300:280;return(0,O.FD)("div",{css:Jt,className:n,children:[(0,O.Y)("div",{css:(0,o.AH)({padding:w.spacing.xs,borderBottom:`1px solid ${w.colors.border}`,borderTop:`1px solid ${w.colors.border}`},""),children:(0,O.Y)(Pt,{searchFilter:C,setSearchFilter:A,matchData:I,handleNextSearchMatch:R,handlePreviousSearchMatch:M})}),(0,O.Y)(Yt,{ref:d,initialRatio:r,paneWidth:p,setPaneWidth:g,leftChild:(0,O.Y)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",flex:1,minWidth:k},""),children:N.length>0?(0,O.Y)(qt,{rootNodes:N,selectedNode:b,setSelectedNode:S,spanTimeFormatter:Qt,treeHeader:"Task name",css:Zt,expandedKeys:x,setExpandedKeys:L,showGantt:E,onNodeClick:T}):(0,O.Y)("div",{css:(0,o.AH)({flex:1,display:"flex",justifyContent:"center",paddingTop:w.spacing.lg},""),children:(0,O.Y)(u.sA,{id:"4pXg9j",defaultMessage:"No results found. Try using a different search term."})})}),leftMinWidth:k,rightChild:(0,O.Y)(xt,{css:en,activeSpan:b,searchFilter:C,activeMatch:I.match}),rightMinWidth:300}),(0,O.Y)("div",{css:(0,o.AH)({backgroundColor:w.colors.backgroundPrimary,position:"absolute",bottom:0,left:0,margin:w.spacing.md,zIndex:2},""),children:(0,O.Y)(c.B,{componentId:`shared.model-trace-explorer.${E?"hide":"show"}-timeline`,icon:E?(0,O.Y)(s.VisibleOffIcon,{}):(0,O.Y)(s.VisibleIcon,{}),onClick:()=>{const e=!E;if(m(e),e){var t;const e=Math.max(p,480);g(e),null===(t=d.current)||void 0===t||t.updateRatio(e)}},children:E?(0,O.Y)(u.sA,{id:"jb5ssj",defaultMessage:"Hide timeline"}):(0,O.Y)(u.sA,{id:"KYMoeQ",defaultMessage:"Show timeline"})})})]})};tn.Skeleton=e=>{let{label:t}=e;const{theme:n}=(0,c.a)();return(0,O.FD)("div",{css:Ht,children:[(0,O.FD)("div",{css:Ft,children:[(0,O.Y)("div",{css:(0,o.AH)({padding:n.spacing.sm,borderBottom:`1px solid ${n.colors.border}`},""),children:(0,O.Y)(s.TitleSkeleton,{label:t})}),(0,O.FD)("div",{css:(0,o.AH)({borderRadius:n.borders.borderRadiusMd,overflow:"hidden",display:"flex"},""),children:[(0,O.Y)("div",{css:(0,o.AH)({flex:1,padding:n.spacing.sm,borderRight:`1px solid ${n.colors.border}`},""),children:(0,O.Y)(s.TableSkeleton,{lines:5})}),(0,O.Y)("div",{css:(0,o.AH)({flex:2,padding:n.spacing.sm},""),children:(0,O.Y)(s.TableSkeleton,{lines:5})})]})]}),(0,O.Y)("div",{css:(0,o.AH)({padding:n.spacing.md,overflowY:"auto",flex:1},""),children:(0,O.Y)(s.TableSkeleton,{lines:12})})]})};var nn={2:{path:"/static/lib/ml-model-trace-renderer/2/index.html",commit:"f8e22775fa5cc11668abca18fff28913749da18e"},current:{path:"/static/lib/ml-model-trace-renderer/index.html"}};const on=e=>{var t,n;let{modelTrace:r,height:a=700,useLatestVersion:c=!1}=e;const s=(0,i.useRef)(null),[d,u]=l().useState(!0),h=c?"current":(e=>{var t,n,o;const r=mt(null==e||null===(t=e.info)||void 0===t?void 0:t.request_metadata);return r||(null!==(n=mt(null==e||null===(o=e.info)||void 0===o?void 0:o.tags))&&void 0!==n?n:"2")})(r),p=null!==(t=null===(n=nn[h])||void 0===n?void 0:n.path)&&void 0!==t?t:nn[2].path,g=Pe(),f=Ce(),{startInteraction:E}=function(){const{esComponent:e,errorBoundaryId:t}=ye(),{mergeTags:n}=Ye(),o=(0,i.useContext)(Me);return(0,i.useMemo)((()=>({...o,startInteraction:(r,a,i,l)=>{const c=n({esComponent:e,errorBoundaryId:t},null!=l?l:{});return o.startInteraction(r,a,i,c)}})),[e,o,n,t])}(),m=Le({recordEvent:g,recordProto:f,startInteraction:E});return(0,i.useEffect)((()=>{const e=e=>{var t;const n=null===(t=s.current)||void 0===t?void 0:t.contentWindow;if(n&&e.source===n)switch(e.data.type){case cn.Ready:u(!1);break;case cn.LogError:{const{error:t}=e.data||{};Ee.A.sev2(me.E.MlExperiments,"ModelTraceExplorerFrameRenderer/Error",t);break}case cn.LogEvent:{const t=e.data.payload.eventDefaultPrevented;m({...e.data.payload,skip:t});break}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[m]),(0,i.useEffect)((()=>{var e;const t=null===(e=s.current)||void 0===e?void 0:e.contentWindow;t&&!d&&t.postMessage({type:sn.UpdateTrace,traceData:r})}),[r,d]),(0,O.FD)("div",{css:(0,o.AH)({height:a},""),children:[d&&(0,O.Y)("div",{css:(0,o.AH)({position:"absolute",width:"100%",height:a},""),children:(0,O.Y)(tn.Skeleton,{label:"Frame Skeleton"})}),(0,O.Y)("iframe",{title:"Model Trace Explorer",src:p,ref:s,css:(0,o.AH)({border:"none",width:"100%",height:a},"")})]})},rn=(0,i.createContext)({onSelectRow:()=>{}}),an=()=>(0,i.useContext)(rn),ln=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),a=(e=>{if(f()(e))return null;if(vt(e))return e;try{var t;const n=null===(t=e.spans)||void 0===t?void 0:t.map((e=>({...e,attributes:JSON.parse(e.attributes)})));return f()(n)?null:{data:{spans:n},info:{}}}catch(e){return null}})(n),{theme:l}=(0,c.a)();return(0,O.FD)(rn.Provider,{value:{onSelectRow:r},children:[t,!f()(a)&&(0,O.Y)("div",{css:(0,o.AH)({borderTop:`1px solid ${l.colors.border}`},""),children:(0,O.Y)(on,{modelTrace:a})})]})};let cn=function(e){return e.Ready="READY",e.LogError="LOG_ERROR",e.LogEvent="LOG_EVENT",e}({}),sn=function(e){return e.UpdateTrace="UPDATE_TRACE",e}({})}}]);
//# sourceMappingURL=https://sourcemaps.dev.databricks.com/ml-model-trace-renderer/js/241.29eda319.chunk.js.map