"use strict";(self.webpackChunkdatabricks_mlModelTraceRenderer=self.webpackChunkdatabricks_mlModelTraceRenderer||[]).push([[649],{19649:(e,t,n)=>{n.r(t),n.d(t,{INFERENCE_TABLE_RESPONSE_COLUMN_KEY:()=>Xe,INFERENCE_TABLE_TRACE_COLUMN_KEY:()=>qe,MLFLOW_TRACE_SCHEMA_VERSION_KEY:()=>je,ModelIconType:()=>Qe,ModelSpanType:()=>Je,ModelTraceChildToParentFrameMessage:()=>Ht,ModelTraceContextProvider:()=>kt,ModelTraceExplorer:()=>xt,ModelTraceExplorerFrameRenderer:()=>wt,ModelTraceParentToChildFrameMessage:()=>Ut,ModelTraceSpanType:()=>Ze,getIsMlflowTraceUIEnabled:()=>it,isModelTrace:()=>lt,useModelTraceContext:()=>Dt});var o=n(71218),r=n(99615),i=n.n(r),a=n(65848),l=n.n(a),s=n(95792),c=n(35248),d=n(14144),u=n(26865),g=n.n(u),f=n(49776),h=n.n(f),E=n(47540),p=n.n(E),m=n(27017),T=n.n(m),R=n(29790),A=n.n(R),S=n(98358),b=n(44768),N=n.n(b),v=n(83214),C=n(8153),I=n(66164),O=n(22919),L=n(30136),y=n(70549),x=n(21733),M=n(60700);const w={name:"1fz341y",styles:"margin-right:16px;text-align:right;position:absolute;right:0;padding-top:2px;padding-right:2px"};function Y(e){let{children:t,style:n}=e;return(0,S.Y)("div",{css:w,style:n,children:t})}const D=l().createContext({});function k(e){let{children:t,theme:n={}}=e;return(0,S.Y)(D.Provider,{value:n,children:t})}const H="rgba(140, 203, 255, 0)",U="rgba(255, 255, 255, 0.84)",P="#8ccbffcc",F="rgba(140, 203, 255, 0.08)",B="24px";function W(e){let{theme:t="light",actions:n,children:o,style:r}=e;const i="duotoneDark"===t?{color:U,hoverColor:P,backgroundColor:H,hoverBackgroundColor:F}:void 0;return(0,S.FD)(S.FK,{children:[(0,S.Y)(Y,{style:r,children:(0,S.Y)(k,{theme:i,children:n})}),o]})}function _(e){e.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:BASE64|PARSE_URL|UPPER|LOWER|INITCAP|FORMAT_NUMBER|FORMAT_STRING|TRIM|UNBASE64|CONCAT|MAP|MAP_KEYS|MAP_VALUES|MAP_ENTRIES|MAP_FILTER|MAP_FROM_ARRAYS|MAP_FROM_ENTRIES|MAP_ZIP_WITH|ARRAY|AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:COPY|DESCRIBE HISTORY|DESCRIBE DETAIL|STORAGE CREDENTIALS?|URL|CACHE|UNCACHE|VACUUM|MSCK|CATALOGS?|CREDENTIALS?|FILES?|RECIPIENTS?|PROVIDERS?|TBLPROPERTIES|SHARES|VIEWS|EXTERNAL|REPAIR|REFRESH|COMMENT|LIST|PARQUET|LOCATIONS?|OPTIONS|JAR|ARCHIVE|ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR|AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/i,punctuation:/[;[\]()`,.]/}}_.displayName="databricks-runtime-sql",_.aliases=["sql","dbr-sql","dbsql","databricks-sql"];var z={'code[class*="language-"]':{fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', 'Courier New', 'Courier', 'Source Code Pro', monospace",fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC"},'pre[class*="language-"]':{fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', 'Courier New', 'Courier', 'Source Code Pro', monospace",fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC",padding:"1em",margin:".5em 0",overflow:"auto"},'pre > code[class*="language-"]':{fontSize:"1em"},'pre[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},':not(pre) > code[class*="language-"]':{padding:".1em",borderRadius:".3em"},comment:{color:"#6c6783"},prolog:{color:"#6c6783"},doctype:{color:"#6c6783"},cdata:{color:"#6c6783"},punctuation:{color:"#6c6783"},namespace:{Opacity:".7"},tag:{color:"#3AACE2"},operator:{color:"#3AACE2"},number:{color:"#3AACE2"},property:{color:"#5DFAFC"},function:{color:"#5DFAFC"},"tag-id":{color:"#eeebff"},selector:{color:"#eeebff"},"atrule-id":{color:"#eeebff"},"code.language-javascript":{color:"#c4b9fe"},"attr-name":{color:"#c4b9fe"},"code.language-css":{color:"#ffffff"},"code.language-scss":{color:"#ffffff"},boolean:{color:"#ffffff"},string:{color:"#ffffff"},entity:{color:"#ffffff",cursor:"help"},url:{color:"#ffffff"},".language-css .token.string":{color:"#ffffff"},".language-scss .token.string":{color:"#ffffff"},".style .token.string":{color:"#ffffff"},"attr-value":{color:"#ffffff"},keyword:{color:"#ffffff"},control:{color:"#ffffff"},directive:{color:"#ffffff"},unit:{color:"#ffffff"},statement:{color:"#ffffff"},regex:{color:"#ffffff"},atrule:{color:"#ffffff"},placeholder:{color:"#ffffff"},variable:{color:"#ffffff"},deleted:{textDecoration:"line-through"},inserted:{borderBottom:"1px dotted #eeebff",textDecoration:"none"},italic:{fontStyle:"italic"},important:{fontWeight:"bold",color:"#c4b9fe"},bold:{fontWeight:"bold"},"pre > code.highlight":{Outline:".4em solid #8a75f5",OutlineOffset:".4em"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"#2c2937"},".line-numbers .line-numbers-rows > span:before":{color:"#3c3949"},".line-highlight.line-highlight":{background:"linear-gradient(to right, rgba(224, 145, 66, 0.2) 70%, rgba(224, 145, 66, 0))"}};var G={'code[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Source Code Pro', monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Source Code Pro', monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",overflow:"auto",position:"relative",margin:"0.5em 0",padding:"1.25em 1em"},'code[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},':not(pre) > code[class*="language-"]':{whiteSpace:"normal",borderRadius:"0.2em",padding:"0.1em"},".language-css > code":{color:"#f5871f"},".language-sass > code":{color:"#f5871f"},".language-scss > code":{color:"#f5871f"},'[class*="language-"] .namespace':{Opacity:"0.7"},atrule:{color:"#7c4dff"},"attr-name":{color:"#39adb5"},"attr-value":{color:"#f6a434"},attribute:{color:"#f6a434"},boolean:{color:"#7c4dff"},builtin:{color:"#39adb5"},cdata:{color:"#39adb5"},char:{color:"#39adb5"},class:{color:"#39adb5"},"class-name":{color:"#6182b8"},comment:{color:"#8e908c"},constant:{color:"#7c4dff"},deleted:{color:"#e53935"},doctype:{color:"#aabfc9"},entity:{color:"#e53935"},function:{color:"#4271ae"},hexcode:{color:"#f5871f"},id:{color:"#7c4dff",fontWeight:"bold"},important:{color:"#7c4dff",fontWeight:"bold"},inserted:{color:"#39adb5"},keyword:{color:"#8959a8"},number:{color:"#f5871f"},operator:{color:"#3e999f"},prolog:{color:"#aabfc9"},property:{color:"#39adb5"},"pseudo-class":{color:"#f6a434"},"pseudo-element":{color:"#f6a434"},punctuation:{color:"rgb(77, 77, 76)"},regex:{color:"#6182b8"},selector:{color:"#e53935"},string:{color:"#3ba85f"},symbol:{color:"#7c4dff"},tag:{color:"#e53935"},unit:{color:"#f5871f"},url:{color:"#e53935"},variable:{color:"#c72d4c"}};v.A.registerLanguage("sql",_),v.A.registerLanguage("java",O.A),v.A.registerLanguage("python",x.A),v.A.registerLanguage("go",C.A),v.A.registerLanguage("javascript",L.A),v.A.registerLanguage("yaml",M.A),v.A.registerLanguage("json",y.A),v.A.registerLanguage("hcl",I.A);const K={light:G,duotoneDark:z};function V(e){let{theme:t="light",language:n,actions:o,style:r,children:i,...a}=e;const l={border:"none",borderRadius:0,margin:0,padding:B,...r};return(0,S.Y)(W,{theme:t,actions:o,children:(0,S.Y)(v.A,{language:n,style:K[t],customStyle:l,codeTagProps:{style:N()(r,"backgroundColor")},...a,children:i})})}var $=n(48091);function j(e){return e&&`${e} !important`}function X(e){let{tooltipMessage:t,...n}=e;const{color:r,hoverColor:i,hoverBackgroundColor:l,backgroundColor:d,borderColor:u}=(0,a.useContext)(D),g=(0,o.AH)({zIndex:1,color:j(r),borderColor:j(u),backgroundColor:j(d),":hover":{color:j(i),backgroundColor:j(l)}},"");return(0,S.Y)(c.Tooltip,{title:t,children:(0,S.Y)(s.B,{componentId:"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33",...n,css:g})})}function q(e){let{copyText:t,onClick:n,...o}=e;const{actionIcon:r,tooltipMessage:i,copy:l}=function(e,t,n){const o=(0,d.tz)(),r=t||o.formatMessage({id:"hBAhI8",defaultMessage:"Copy"}),i=o.formatMessage({id:"g4hHzO",defaultMessage:"Copied"}),l=(0,$.useClipboard)(),u=(0,a.useRef)(),[g,f]=(0,a.useState)(!1);return(0,a.useEffect)((()=>()=>{window.clearTimeout(u.current)}),[]),{actionIcon:g?(0,S.Y)(s.n,{}):(0,S.Y)(c.CopyIcon,{}),tooltipMessage:g?i:r,copy:()=>{l.copy(e),window.clearTimeout(u.current),f(!0),null==n||n(),u.current=window.setTimeout((()=>{f(!1)}),3e3)},ariaLabel:r}}(t);return(0,S.Y)(X,{tooltipMessage:i,icon:r,onClick:e=>{l(),null==n||n(e)},...o})}var J=n(6812),Q=n.n(J),Z=n(62925),ee=n.n(Z),te=n(54889),ne=n.n(te),oe=n(75984),re=n(12394),ie=n.n(re),ae=n(57488);function le(e){let{ref:t,debounceTimeMs:n}=e;const o=(0,a.useRef)({width:-1,height:-1}),r=(0,a.useRef)(),[i,l]=(0,a.useState)(null),s=(0,a.useCallback)((e=>{if(0===e.length)return;const t=e[0].contentRect;if(-1===o.current.width)return o.current={width:t.width,height:t.height},void l(o.current);if(t.width!==o.current.width||t.height!==o.current.height){if(o.current.width=t.width,o.current.height=t.height,!n)return void l({...o.current});clearTimeout(r.current),r.current=setTimeout((()=>{l({...o.current})}),n)}}),[n]),c=(0,a.useRef)(new ResizeObserver(s));return(0,a.useEffect)((()=>{const e="function"==typeof t?t():t.current;if(e){const t=c.current;return t.observe(e),()=>{t.unobserve(e)}}})),i}var se=n(98045);function ce(e,t){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];const a=e&&e(n,...r);return n&&n.defaultPrevented?a:t(n,...r)}}function de(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{!function(e,t){if(null!==e)if("function"==typeof e)e(t);else if("object"==typeof e)try{e.current=t}catch(n){throw new Error(`Cannot assign value "${t}" to ref "${e}"`)}}(t,e)}))}}var ue=n(67271),ge=n(15464);const fe=(0,a.createContext)(null);fe.displayName="GanttContext";const he=()=>{const e=(0,a.useContext)(fe);if(!e)throw new Error("useGanttContext must be used within a GanttContext.Provider");return e};var Ee={name:"bjn8wh",styles:"position:relative"};const pe=(0,a.forwardRef)((function(e,t){let{...n}=e;const{width:o}=he();return o?(0,S.Y)("div",{ref:t,"data-gantt-body":"",css:Ee,...n}):null})),me=(0,a.createContext)(null);me.displayName="GanttRowContext";var Te={name:"4d7y4w",styles:"display:flex;align-items:center;min-width:2px;overflow:visible;min-height:16px;padding:2px;box-sizing:border-box;width:var(--gantt-cell-length);inset-inline-start:calc(var(--gantt-cell-position) + var(--gantt-cell-padding))"};const Re=(0,a.forwardRef)((function(e,t){let{as:n="div",style:o,id:r,start:i,end:l,onMouseEnter:s,onMouseLeave:c,...d}=e;const{nodesById:u,paddingLeft:g}=he(),f=(e=>{const t=he();return(0,ue.Pj)(t.storeRef.current,e)})((e=>e.setHighlightedEdge)),{length:h,position:E}=function(e){let{start:t,end:n}=e;const{start:o,scale:r}=he();return{length:Math.max(n-t,0)*r,position:(t-o)*r}}({start:i,end:l}),{top:p,height:m}=(()=>{const e=(0,a.useContext)(me);if(!e)throw new Error("useGanttRowContext must be used within a GanttRowContext.Provider");return e})();if((0,a.useLayoutEffect)((()=>{if(r){const e=String(r),t=u.current;return()=>{t.delete(e)}}}),[r]),u.current.has(String(r))){const e=u.current.get(String(r));e.rect.x=E,e.rect.width=h,e.rect.y=p,e.rect.height=m}else u.current.set(String(r),{rect:{width:h,x:E,height:m,y:p}});return(0,S.Y)(n,{ref:t,"data-gantt-cell":"","data-gantt-cell-id":r,css:Te,style:{position:"absolute",zIndex:1,"--gantt-cell-length":`${h}px`,"--gantt-cell-position":`${E}px`,"--gantt-cell-padding":`${g}px`,...o},onMouseEnter:ce(s,(()=>f(r))),onMouseLeave:ce(c,(()=>f(void 0))),...d})}));var Ae={name:"1v26o98",styles:"transform:translateX(-42%)"};const Se=(0,a.forwardRef)((function(e,t){let{style:n,...o}=e;const{dividerLengthInPixels:r}=he();return(0,S.Y)("div",{ref:t,"data-gantt-header-cell":"",css:Ae,style:{minWidth:r,...n},...o})})),be=e=>{let{children:t}=e;const{dividers:n}=he(),o=(0,d.tz)();return t?(0,S.Y)(S.FK,{children:t(n)}):(0,S.Y)(S.FK,{children:n.map((e=>(0,S.Y)(Se,{children:(0,S.Y)("span",{children:o.formatTime(new Date(e),{timeStyle:"medium"})})},e)))})},Ne=e=>({position:"relative",display:"flex",alignItems:"center",minHeight:"32px",textAlign:"center",fontVariantNumeric:"tabular-nums",borderBottomColor:e.colors.border,borderBottomStyle:"solid",borderBottomWidth:"1px",backgroundColor:e.colors.backgroundPrimary,color:e.colors.textSecondary,whiteSpace:"nowrap",overflow:"hidden"}),ve=(0,a.forwardRef)((function(e,t){const{theme:n}=(0,s.u)(),{paddingLeft:r,paddingRight:i}=he();return(0,S.Y)("div",{ref:t,"data-gantt-header":"",css:(0,o.AH)({...Ne(n),padding:`0px ${i}px 0px ${r}px`},""),...e})})),Ce=(0,a.forwardRef)((function(e,t){let{style:n,height:r=32,top:i,...l}=e;const{paddingLeft:c,paddingRight:d}=he(),u=(0,a.useMemo)((()=>({height:r,top:i})),[r,i]),{theme:g}=(0,s.u)();return(0,S.Y)(me.Provider,{value:u,children:(0,S.Y)("div",{ref:t,"data-gantt-row":"",css:(0,o.AH)({boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",backgroundColor:g.colors.backgroundPrimary,padding:`8px ${d}px 8px ${c}px`,minHeight:"32px",minWidth:"100%","&:nth-of-type(odd)":{backgroundColor:g.colors.backgroundSecondary}},""),style:{...n},...l})})})),Ie=(0,a.forwardRef)((function(e,t){let{style:n,start:r,...i}=e;const{theme:a}=(0,s.u)(),{start:l,scale:c,paddingLeft:d}=he(),u=(r-l)*c;return(0,S.Y)("div",{ref:t,"data-gantt-vertical-marker":"","data-gantt-vertical-marker-offset":r,style:{left:u,insetInlineStart:u,...n},"aria-hidden":"true",css:(0,o.AH)({boxSizing:"border-box",position:"absolute",top:"0",bottom:"0",zIndex:0,width:"1px",backgroundColor:a.colors.backgroundPrimary,marginLeft:d},""),...i})})),Oe=()=>{const{dividers:e}=he();return(0,S.Y)(S.FK,{children:e.map((e=>(0,S.Y)(Ie,{start:e},e)))})};function Le(e){let{start:t,end:n,maxWidth:o,dividerLengthInScale:r,dividerLengthInPixels:i}=e;const a=[];for(let e=t,l=0;e<=n&&!(l>0&&l+.9*i>=o);e+=r,l+=i)a.push(e);return a}var ye={name:"10vana9",styles:"position:relative;display:grid;grid-template-columns:1fr;grid-template-rows:min-content;align-items:start;height:min-content"};const xe=(0,a.forwardRef)((function(e,t){var n,o;let{children:r,start:i,end:l,style:s,numDividers:c=10,paddingLeft:d=40,paddingRight:u=8,width:g=0,...f}=e;const h=(0,a.useRef)();h.current||(h.current=(0,ge.A)((e=>({highlightedEdge:void 0,setHighlightedEdge:t=>e((()=>({highlightedEdge:t})))}))));const E=(0,a.useRef)(new Map),p=(0,a.useRef)(null),m=null!==(n=null===(o=le({ref:p,debounceTimeMs:16}))||void 0===o?void 0:o.width)&&void 0!==n?n:g,T=Math.max(1,"function"==typeof c?Math.floor(c(m)):c),R=(0,a.useMemo)((()=>{const e=Math.max(0,m-d-u),t=Math.max(1e3,(l-i)/T),n=e/T;return{storeRef:h,start:i,scale:e/(l-i),end:l,dividerLengthInPixels:n,dividers:Le({start:i,end:l,maxWidth:e,dividerLengthInScale:t,dividerLengthInPixels:n}),nodesById:E,paddingLeft:d,paddingRight:u,numDividers:T,width:m}}),[i,l,d,u,T,m]);return(0,S.Y)(fe.Provider,{value:R,children:(0,S.Y)("div",{"data-gantt-root":"",style:{...s},css:ye,ref:de(p,t),...f,children:r})})}));var Me=n(21340),we=n.n(Me),Ye=n(96714),De=n(63485);const ke=(0,a.createContext)({esComponent:De.E.UiObservability,errorBoundaryId:"__default"});new WeakMap;const He=l().createContext({tags:{},contextChain:[]});function Ue(e,t){const n=(0,a.useRef)([]),{esComponent:o,errorBoundaryId:r}=(0,a.useContext)(ke);return(0,a.useCallback)(((i,a)=>{const l=Object.keys(a),s=Object.keys(i).filter((e=>l.includes(e)&&!n.current.includes(e)));s.length>0&&(n.current.push(...s),Ye.A.sev2(o,t,`Error boundary: ${r}, record event context chain: ${e.join(",")}, duplicate tags: ${s.join(",")}. Please follow go/recordeventduplicatetags to resolve.`,!0))}),[e,t,o,r])}function Pe(e,t,n,o){if(n&&e(null!=n?n:{},t),n&&o){const e=Object.keys(n),t=Object.keys(o);we()(0===e.filter((e=>t.includes(e))).length,`Cannot specify a tag in both the tags and as override. Tags: ${e.join(",")}, overrides: ${t.join(",")}`)}return n||o?{...t,...n,...o}:t}function Fe(){const{tags:e,contextChain:t}=(0,a.useContext)(He),n=Ue(t,"DuplicateRecordEventInvocationTag"),o=(0,a.useCallback)(((t,o)=>Pe(n,e,t,o)),[n,e]);return{contextTags:e,mergeTags:o}}function Be(){const{mergeTags:e}=Fe();return(0,a.useCallback)((t=>{let{metric:n,tags:o,overrides:r,eventData:i}=t;const a=e(o,r);(0,Ye.r)(n,a,i)}),[e])}var We={name:"vy7omj",styles:"display:inline-block;word-break:break-all"};function _e(e){let{title:t,value:n}=e;const[o,r]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1),d=(0,a.useRef)(null),u=(0,a.useMemo)((()=>JSON.stringify(n,null,o?2:0)),[n,o]),{theme:g}=(0,s.u)(),f=(0,a.useCallback)((e=>(0,S.Y)("pre",{...e,ref:d})),[]);return(0,a.useEffect)((()=>{d.current&&l(d.current.scrollWidth>d.current.clientWidth)}),[n]),(0,S.FD)(S.FK,{children:[(0,S.Y)(s.T.Text,{color:"secondary",css:We,title:t,children:t}),i?(0,S.Y)(s.B,{size:"small",componentId:"shared.model-trace-explorer.expand-snippet",type:"tertiary",icon:o?(0,S.Y)(c.ChevronDownIcon,{}):(0,S.Y)(c.ChevronRightIcon,{}),onClick:()=>r(!o)}):(0,S.Y)("div",{}),(0,S.Y)(V,{PreTag:f,language:"json",lineProps:{style:{wordBreak:"break-all",whiteSpace:"pre-wrap"}},wrapLines:o,style:{backgroundColor:g.colors.backgroundSecondary,padding:g.spacing.xs,overflow:o?"auto":"hidden",textOverflow:o?"unset":"ellipsis",height:"fit-content"},children:u})]})}const ze=4;function Ge(e){let{title:t,tokens:n,data:r}=e;const{theme:i}=(0,s.u)(),[l,u]=(0,a.useState)(!0),[g,f]=(0,a.useState)(!1),h=(0,a.useRef)(null),E=l||r.split("\n").length>ze,p=(0,a.useMemo)((()=>E&&!g?r.split("\n").slice(0,ze).join("\n"):r),[r,E,g]);(0,a.useEffect)((()=>{h.current&&u(h.current.scrollWidth>h.current.clientWidth)}),[r]);const m=(0,a.useCallback)((e=>(0,S.Y)("pre",{...e,ref:h})),[]);return(0,S.Y)("div",{css:(0,o.AH)({position:"relative",marginBottom:i.spacing.md},""),children:(0,S.FD)("div",{css:(0,o.AH)({borderRadius:i.borders.borderRadiusMd,overflow:"hidden"},""),children:[(0,S.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${i.colors.border}`,backgroundColor:i.colors.backgroundSecondary,padding:i.spacing.xs},""),children:[(0,S.Y)(s.T.Title,{css:(0,o.AH)({marginLeft:i.spacing.md-i.spacing.xs,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},""),level:4,color:"secondary",withoutMargins:!0,children:t}),(0,S.Y)(q,{componentId:"shared.model-trace-explorer.copy-input",copyText:r},"copy-input")]}),(0,S.Y)(V,{PreTag:m,showLineNumbers:!0,language:"json",lineProps:{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"}},wrapLines:g,style:{backgroundColor:i.colors.backgroundSecondary,padding:i.spacing.sm,paddingBottom:E?0:i.spacing.sm,overflow:g?"auto":"hidden"},children:p}),E&&(0,S.Y)("div",{css:(0,o.AH)({backgroundColor:i.colors.backgroundSecondary},""),children:(0,S.Y)(s.B,{css:(0,o.AH)({width:"100%",padding:i.spacing.sm},""),componentId:"shared.model-trace-explorer.expand",icon:g?(0,S.Y)(c.ChevronUpIcon,{}):(0,S.Y)(c.ChevronDownIcon,{}),type:"tertiary",onClick:()=>f(!g),children:g?(0,S.Y)(d.sA,{id:"AgjhWE",defaultMessage:"See less"}):(0,S.Y)(d.sA,{id:"HYQHVk",defaultMessage:"See more"})})})]})})}const Ke=e=>{let{title:t,children:n,withBorder:r=!1}=e;const[i,l]=(0,a.useState)(!0),{theme:d}=(0,s.u)();return(0,S.FD)("div",{css:(0,o.AH)({marginBottom:d.spacing.md},""),children:[(0,S.FD)("div",{css:(0,o.AH)({alignItems:"center",display:"flex",flexDirection:"row",gap:d.spacing.xs,marginBottom:d.spacing.xs},""),children:[(0,S.Y)(s.B,{size:"small",componentId:`shared.model-trace-explorer.expand-${t}`,type:"tertiary",icon:i?(0,S.Y)(c.ChevronDownIcon,{}):(0,S.Y)(c.ChevronRightIcon,{}),onClick:()=>l(!i)}),(0,S.Y)(s.T.Title,{withoutMargins:!0,level:4,children:t})]}),i&&(0,S.Y)("div",{css:(0,o.AH)({border:r?`1px solid ${d.colors.border}`:"",borderRadius:r?d.borders.borderRadiusMd:"",padding:r?d.spacing.md:0,paddingTop:r?d.spacing.md:d.spacing.sm,paddingBottom:0},""),children:n})]})},Ve=e=>A()(e)?[]:Array.isArray(e)||p()(e)||h()(e)||g()(e)?[{key:"",value:JSON.stringify(e,null,2)}]:Object.entries(e).map((e=>{let[t,n]=e;return{key:t,value:JSON.stringify(n,null,2)}}));function $e(e){let{activeSpan:t,className:n}=e;const{theme:r}=(0,s.u)(),i=(0,a.useMemo)((()=>Ve(null==t?void 0:t.inputs)),[t]),l=(0,a.useMemo)((()=>Ve(null==t?void 0:t.outputs)),[t]);if(A()(t))return null;const{attributes:c}=t,u=T()(c).length>0,g=i.length>0,f=l.length>0;return(0,S.FD)("div",{css:(0,o.AH)({padding:r.spacing.md,overflowY:"auto",borderLeft:`1px solid ${r.colors.border}`,minWidth:400},""),className:n,children:[u&&(0,S.Y)(Ke,{title:(0,S.Y)(d.sA,{id:"vIPatv",defaultMessage:"Attributes"}),children:c&&(0,S.Y)("div",{css:(0,o.AH)({display:"grid",gridTemplateColumns:"fit-content(25%) auto 1fr",gap:r.spacing.sm,marginBottom:r.spacing.md},""),children:Object.entries(c).map(((e,t)=>{let[n,o]=e;return(0,S.Y)(_e,{title:n,value:o},n)}))})}),g&&(0,S.Y)(Ke,{withBorder:!0,title:(0,S.Y)(d.sA,{id:"/TX1Az",defaultMessage:"Inputs"}),children:i.map(((e,t)=>{let{key:n,value:o}=e;return(0,S.Y)(Ge,{title:n||(0,S.Y)(d.sA,{id:"NU7ny4",defaultMessage:"Input"}),data:o},n||t)}))}),f&&(0,S.Y)(Ke,{withBorder:!0,title:(0,S.Y)(d.sA,{id:"ZstVNI",defaultMessage:"Outputs"}),children:l.map((e=>{let{key:t,value:n}=e;return(0,S.Y)(Ge,{title:t,data:n},t)}))})]})}const je="mlflow.trace_schema.version",Xe="response",qe="trace";let Je=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.FUNCTION="FUNCTION",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.UNKNOWN="UNKNOWN",e}({}),Qe=function(e){return e.MODELS="models",e.DOCUMENT="document",e.CONNECT="connect",e.SEARCH="search",e.SORT="sort",e.UNKNOWN="unknown",e.FUNCTION="function",e.CODE="code",e.NUMBERS="numbers",e.WRENCH="wrench",e.AGENT="agent",e.CHAIN="chain",e}({}),Ze=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.UNKNOWN="UNKNOWN",e}({});const et=e=>{let{type:t=Qe.CONNECT}=e;const{theme:n}=(0,s.u)(),r={[Qe.MODELS]:(0,S.Y)(c.ModelsIcon,{}),[Qe.DOCUMENT]:(0,S.Y)(c.FileDocumentIcon,{}),[Qe.CONNECT]:(0,S.Y)(c.ConnectIcon,{}),[Qe.CODE]:(0,S.Y)(c.CodeIcon,{}),[Qe.FUNCTION]:(0,S.Y)(c.FunctionIcon,{}),[Qe.NUMBERS]:(0,S.Y)(c.NumbersIcon,{}),[Qe.SEARCH]:(0,S.Y)(c.SearchIcon,{}),[Qe.SORT]:(0,S.Y)(c.SortUnsortedIcon,{}),[Qe.UNKNOWN]:(0,S.Y)(c.QuestionMarkIcon,{}),[Qe.WRENCH]:(0,S.Y)(c.WrenchIcon,{}),[Qe.AGENT]:(0,S.Y)(c.Robot2Icon,{}),[Qe.CHAIN]:(0,S.Y)(c.ChainIcon,{})};return(0,S.Y)("div",{css:(0,o.AH)({width:n.general.iconSize,height:n.general.iconSize,backgroundColor:`${n.colors.purple}1A`,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:n.borders.borderRadiusMd,svg:{width:n.general.iconFontSize,height:n.general.iconFontSize}},""),children:r[t]})};function tt(e){switch(e){case Je.LLM:return Qe.MODELS;case Je.CHAIN:return Qe.CHAIN;case Je.AGENT:return Qe.AGENT;case Je.TOOL:return Qe.WRENCH;case Je.CHAT_MODEL:return Qe.MODELS;case Je.RETRIEVER:return Qe.SEARCH;case Je.PARSER:return Qe.CODE;case Je.EMBEDDING:return Qe.NUMBERS;case Je.RERANKER:return Qe.SORT;case Je.FUNCTION:return Qe.FUNCTION;case Je.UNKNOWN:return Qe.UNKNOWN;default:return Qe.FUNCTION}}function nt(e){try{return JSON.parse(e)}catch(t){return e}}function ot(e,t){var n,o;const r=null!==(n=null===(o=e.children)||void 0===o?void 0:o.reduce(((e,n)=>{const o=ot(n,t);return e.concat(o)}),[]))&&void 0!==n?n:[];return function(e,t){var n,o,r,i;if(""===t)return!0;const a=t.toLowerCase();return Boolean((null!==(n=e.title)&&void 0!==n?n:"").toLowerCase().includes(a)||(null===(o=JSON.stringify(e.inputs))||void 0===o?void 0:o.toLowerCase().includes(a))||(null===(r=JSON.stringify(e.outputs))||void 0===r?void 0:r.toLowerCase().includes(a))||(null===(i=JSON.stringify(e.attributes))||void 0===i?void 0:i.toLowerCase().includes(a)))}(e,t)?[{...e,children:r}]:r}function rt(e){var t,n;const o=null!==(t=null===(n=e.trace_data)||void 0===n?void 0:n.spans)&&void 0!==t?t:e.data.spans,r={},i={};o.forEach((e=>{r[e.context.span_id]=e,i[e.context.span_id]=[]})),o.forEach((e=>{var t;const n=null!==(t=e.parent_span_id)&&void 0!==t?t:e.parent_id;if(!A()(n)){if(!i[n])throw new Error("Tree structure is malformed!");i[n].push(e.context.span_id)}}));const a=o.find((e=>{var t;return A()(null!==(t=e.parent_span_id)&&void 0!==t?t:e.parent_id)}));if(A()(a))return null;return function e(t){var n,o,l,s;const c=r[t],d=Number(null!==(n=null==a?void 0:a.start_time)&&void 0!==n?n:0),u=Number(null!==(o=null==a?void 0:a.end_time)&&void 0!==o?o:0),g=i[t].map(e);return void 0!==c.parent_id?((e,t,n,o)=>{var r,i,a,l;const s=nt(null===(r=e.attributes)||void 0===r?void 0:r["mlflow.spanType"]),c=nt(null===(i=e.attributes)||void 0===i?void 0:i["mlflow.spanInputs"]),d=nt(null===(a=e.attributes)||void 0===a?void 0:a["mlflow.spanOutputs"]),u=ee()(ne()(e.attributes,((e,t)=>t.startsWith("mlflow."))),(e=>nt(e))),g=(Number(e.start_time)-t)/1e3,f=(Number(null!==(l=e.end_time)&&void 0!==l?l:n)-t)/1e3;return{title:e.name,icon:(0,S.Y)(et,{type:tt(s)}),key:e.context.span_id,start:g,end:f,children:o,inputs:c,outputs:d,attributes:u}})(c,d,u,g):{title:c.name,icon:(0,S.Y)(et,{type:tt(null!==(l=c.span_type)&&void 0!==l?l:Je.UNKNOWN)}),key:c.context.span_id,start:Number(c.start_time)-d,end:Number(null!==(s=c.end_time)&&void 0!==s?s:u)-d,children:g,inputs:c.inputs,outputs:c.outputs,attributes:c.attributes}}(a.context.span_id)}function it(){var e;return null!==(e=(0,oe.s)("mlflow_tracing",null))&&void 0!==e?e:(0,oe.s)("databricks.fe.mlflow.enableTracingUI",!1)}function at(e){var t;if(e)return Q()(e)?null===(t=e.find((e=>e.key===je)))||void 0===t?void 0:t.value:e[je]}const lt=e=>{const t=null==e?void 0:e.info,n=null==e?void 0:e.data;if(!t||!n||null==n||!n.spans)return!1;if((null==t?void 0:t.request_metadata)&&at(t.request_metadata))return!0;return!(!(null==t?void 0:t.tags)||!at(t.tags))};var st={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},ct={name:"1endq0h",styles:"display:flex;flex:1;overflow-y:auto;flex-direction:row"},dt={name:"kjqqaz",styles:"width:0;position:relative"};var ut=e=>{var t;let{initialRatio:n,paneWidth:r,setPaneWidth:i,leftChild:l,leftMinWidth:c,rightChild:d,rightMinWidth:u}=e;const[g,f]=(0,a.useState)(!1),h=(0,a.useRef)(null),E=null===(t=le({ref:h}))||void 0===t?void 0:t.width,p=(null!=E?E:1/0)-u,m=(0,a.useRef)(n),{theme:T}=(0,s.u)();return(0,a.useEffect)((()=>{E&&i(ie()(E*m.current,c,p))}),[E,p,c,u,i]),(0,S.FD)("div",{ref:h,css:ct,children:[g&&(0,S.Y)(o.mL,{styles:st}),(0,S.Y)(ae.ResizableBox,{axis:"x",width:r,css:(0,o.AH)({display:"flex",flex:`0 0 ${r}px`},""),handle:(0,S.Y)("div",{css:dt,children:(0,S.Y)("div",{css:(0,o.AH)({position:"relative",width:T.spacing.sm,marginLeft:-T.spacing.xs,height:"100%",cursor:"ew-resize",backgroundColor:"rgba(0,0,0,0)",zIndex:1,":hover":{backgroundColor:"rgba(0,0,0,0.1)"}},"")})}),onResize:(e,t)=>{let{size:n}=t;const o=ie()(n.width,c,p);i(o),E&&(m.current=o/E)},onResizeStart:()=>f(!0),onResizeStop:()=>f(!1),minConstraints:[c,1/0],maxConstraints:[p,1/0],children:l}),d]})};var gt={name:"2wv1be",styles:"width:100%;box-sizing:border-box"};var ft=e=>{let{setSearchFilter:t}=e;const[n,o]=(0,a.useState)(""),r=(0,se.YQ)(t,350);return(0,S.Y)(c.Input,{allowClear:!0,placeholder:"Search",value:n,onClear:()=>{t(""),o("")},onChange:e=>{o(e.target.value),r(e.target.value)},prefix:(0,S.Y)(c.SearchIcon,{}),css:gt})};var ht={name:"15currb",styles:"display:flex;height:100%"},Et={name:"82a6rk",styles:"flex:1"};const pt=100,mt=200,Tt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{min:Number.MAX_SAFE_INTEGER,max:0};return e.forEach((e=>{const{start:n,end:o,children:r}=e;n<t.min&&(t.min=n),o>t.max&&(t.max=o),Tt(null!=r?r:[],t)})),t},Rt=e=>{const t={},n=e=>{var o;e&&(t[e.key]=e,null===(o=e.children)||void 0===o||o.forEach(n))};return e.forEach(n),t};const At=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.colors.actionTertiaryBackgroundPress:t?e.colors.actionTertiaryBackgroundHover:void 0},St=e=>`${(e/1e6).toFixed(2)} s`;var bt={name:"1jyk3dc",styles:"overflow:hidden;display:flex;flex-direction:column;flex:1"},Nt={name:"zjik7",styles:"display:flex"},vt={name:"d3v9zr",styles:"overflow:hidden"};const Ct=e=>{let{rootNodes:t,selectedNode:n,setSelectedNode:r,expandedKeys:i=[],setExpandedKeys:l,spanTimeFormatter:d=(e=>`${(e/1e6).toFixed(2)} s`),treeHeader:u,className:g}=e;const{theme:f,getPrefixedClassName:h}=(0,s.u)(),E=h("tree-title"),p=h("tree"),m=h("tree-node-content-wrapper"),T=(0,a.useMemo)((()=>Rt(t)),[t]),[R,A]=(0,a.useState)(200),[b,N]=(0,a.useState)(void 0),v=(0,a.useMemo)((()=>t),[t]),C=(0,a.useMemo)((()=>Tt(t)),[t]),I=(0,a.useMemo)((()=>((e,t)=>{const n=[],o=e=>{var r;e&&(n.push(e),t.includes(e.key)&&(null===(r=e.children)||void 0===r||r.forEach(o)))};return e.forEach(o),n})(t,i)),[t,i]),O=(e,t)=>Math.max(2,Math.min(t.max/1e3,Math.floor(e/100)));return(0,S.Y)("div",{css:(0,o.AH)({height:"100%",borderRadius:f.borders.borderRadiusMd,overflow:"hidden",display:"flex"},""),className:g,children:(0,S.FD)("div",{css:bt,children:[(0,S.FD)("div",{css:Nt,children:[(0,S.Y)("div",{css:(0,o.AH)({borderBottom:`1px solid ${f.colors.border}`,boxSizing:"border-box",marginTop:f.spacing.sm,paddingLeft:f.spacing.sm,height:24},""),style:{flex:`0 0 ${R}px`},children:(0,S.Y)(s.T.Title,{withoutMargins:!0,level:4,children:u})}),(0,S.Y)("div",{css:(0,o.AH)({flex:1,boxSizing:"border-box",marginTop:f.spacing.sm},""),children:(0,S.Y)(xe,{start:C.min,end:C.max,numDividers:e=>O(e,C),paddingLeft:25,paddingRight:75,children:(0,S.Y)(ve,{css:(0,o.AH)({minHeight:24,maxHeight:24,boxSizing:"border-box",lineHeight:"24px"},""),children:(0,S.Y)(be,{children:e=>e.map((e=>(0,S.Y)(Se,{css:vt,children:(0,S.Y)(c.Tooltip,{title:St(e),placement:"top",children:(0,S.Y)("span",{children:St(e)})})},e)))})})})})]}),(0,S.Y)(ut,{paneWidth:R,setPaneWidth:A,initialRatio:.5,leftChild:(0,S.Y)("div",{css:(0,o.AH)({flex:1,overflowX:"auto",overflowY:"hidden",height:"min-content",borderRight:`1px solid ${f.colors.border}`,display:"flex",[`.${E}`]:{whiteSpace:"nowrap"},[`.${p}`]:{flex:"1 0 auto"},[`.${m} > span:first-child`]:{flexShrink:0},minWidth:pt},""),children:(0,S.Y)(c.Tree,{showLine:{showLeafIcon:!1},selectedKeys:n?[n.key]:[],dangerouslySetAntdProps:{showIcon:!0,onMouseEnter:e=>{let{node:t}=e;return N(t)},onMouseLeave:()=>N(void 0)},mode:"selectable",treeData:v,expandedKeys:i,onExpand:l,onSelect:e=>{if(0===e.length)return;const t=T[e[0]];null==r||r(t)}})}),leftMinWidth:pt,rightChild:(0,S.Y)("div",{css:(0,o.AH)({flex:1,minWidth:mt},""),"data-testid":"time-marker-area",children:(0,S.Y)(xe,{start:C.min,end:C.max,numDividers:e=>O(e,C),paddingLeft:25,paddingRight:75,children:(0,S.FD)(pe,{children:[I.map(((e,t)=>(0,S.Y)(c.Tooltip,{title:`${d(e.start)} - ${d(e.end)}`,placement:"right",dangerouslySetAntdProps:{visible:e.key===(null==b?void 0:b.key)},children:(0,S.Y)(Ce,{top:t,height:24,css:(0,o.AH)({cursor:"pointer",backgroundColor:At(f,e.key===(null==b?void 0:b.key),e===n),"&:nth-of-type(2n+1)":{backgroundColor:At(f,e.key===(null==b?void 0:b.key),e===n)||"transparent"}},""),onClick:()=>null==r?void 0:r(e),onMouseEnter:()=>N(e),onMouseLeave:()=>N(void 0),children:(0,S.Y)(Re,{id:e.key,start:e.start,end:e.end,css:(0,o.AH)({backgroundColor:f.colors.grey400},""),children:(0,S.Y)("div",{css:(0,o.AH)({lineHeight:f.typography.lineHeightSm,fontSize:f.typography.fontSizeSm,position:"absolute",left:"100%",marginLeft:f.spacing.xs,top:0,bottom:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},""),children:d(e.end-e.start)})})})},e.key))),(0,S.Y)(Oe,{})]})})}),rightMinWidth:mt})]})})};const It=e=>{const t=e<=1e5?3:2,n=e/1e6;return`${(Math.ceil(n*10**t)/10**t).toFixed(t)} s`};var Ot={name:"13ku56z",styles:"display:flex;flex-direction:column;height:100%"},Lt={name:"82a6rk",styles:"flex:1"},yt={name:"9jwnf3",styles:"flex:1;overflow-y:auto"};const xt=e=>{let{modelTrace:t,className:n}=e;const[r,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(500),g=(0,a.useMemo)((()=>rt(t)),[t]),f=(0,a.useMemo)((()=>g?ot(g,r):[]),[null==g?void 0:g.key,r]),{expandedKeys:h,setExpandedKeys:E}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,a.useState)((()=>e.initialExpandAll&&e.rootNodes?i()(Rt(e.rootNodes)).map((e=>e.key)):[]));return{expandedKeys:t,setExpandedKeys:n}}({rootNodes:f,initialExpandAll:!0}),[p,m]=(0,a.useState)(f[0]),{theme:T}=(0,s.u)();return(0,a.useLayoutEffect)((()=>{if(f.length>0){m(f[0]);const e=i()(Rt(f));E(e.map((e=>e.key)))}}),[f,E]),(0,S.FD)("div",{css:Ot,className:n,children:[(0,S.Y)("div",{css:(0,o.AH)({padding:T.spacing.xs,borderBottom:`1px solid ${T.colors.border}`,borderTop:`1px solid ${T.colors.border}`},""),children:(0,S.Y)(ft,{setSearchFilter:l})}),(0,S.Y)(ut,{initialRatio:.4,paneWidth:c,setPaneWidth:u,leftChild:(0,S.Y)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",flex:1,minWidth:300},""),children:f.length>0?(0,S.Y)(Ct,{rootNodes:f,selectedNode:p,setSelectedNode:m,spanTimeFormatter:It,treeHeader:"Task name",css:Lt,expandedKeys:h,setExpandedKeys:E}):(0,S.Y)("div",{css:(0,o.AH)({flex:1,display:"flex",justifyContent:"center",paddingTop:T.spacing.lg},""),children:(0,S.Y)(d.sA,{id:"4pXg9j",defaultMessage:"No results found. Try using a different search term."})})}),leftMinWidth:305,rightChild:(0,S.Y)($e,{activeSpan:p,css:yt}),rightMinWidth:400})]})};xt.Skeleton=e=>{let{label:t}=e;const{theme:n}=(0,s.u)();return(0,S.FD)("div",{css:ht,children:[(0,S.FD)("div",{css:Et,children:[(0,S.Y)("div",{css:(0,o.AH)({padding:n.spacing.sm,borderBottom:`1px solid ${n.colors.border}`},""),children:(0,S.Y)(c.TitleSkeleton,{label:t})}),(0,S.FD)("div",{css:(0,o.AH)({borderRadius:n.borders.borderRadiusMd,overflow:"hidden",display:"flex"},""),children:[(0,S.Y)("div",{css:(0,o.AH)({flex:1,padding:n.spacing.sm,borderRight:`1px solid ${n.colors.border}`},""),children:(0,S.Y)(c.TableSkeleton,{lines:5})}),(0,S.Y)("div",{css:(0,o.AH)({flex:2,padding:n.spacing.sm},""),children:(0,S.Y)(c.TableSkeleton,{lines:5})})]})]}),(0,S.Y)("div",{css:(0,o.AH)({padding:n.spacing.md,overflowY:"auto",flex:1},""),children:(0,S.Y)(c.TableSkeleton,{lines:12})})]})};var Mt={2:{path:"/static/lib/ml-model-trace-renderer/2/index.html",commit:"5b05564133bca30c952f0f116f30cc21813bbd2b"},current:{path:"/static/lib/ml-model-trace-renderer/index.html"}};const wt=e=>{var t,n;let{modelTrace:r,height:i=700,useLatestVersion:s=!1}=e;const c=(0,a.useRef)(null),[d,u]=l().useState(!0),g=s?"current":(e=>{var t,n,o;const r=at(null==e||null===(t=e.info)||void 0===t?void 0:t.request_metadata);return r||(null!==(n=at(null==e||null===(o=e.info)||void 0===o?void 0:o.tags))&&void 0!==n?n:"2")})(r),f=null!==(t=null===(n=Mt[g])||void 0===n?void 0:n.path)&&void 0!==t?t:Mt[2].path,h=function(){const e=Be();return(0,a.useCallback)(((t,n,o)=>e({metric:t,tags:n,eventData:o})),[e])}();return(0,a.useEffect)((()=>{const e=e=>{var t;const n=null===(t=c.current)||void 0===t?void 0:t.contentWindow;if(n&&e.source===n)switch(e.data.type){case Ht.Ready:u(!1);break;case Ht.LogError:{const{error:t,isPromiseRejection:n}=e.data||{},o={esComponent:De.E.MlExperiments,jsExceptionRejectedPromise:null!=n?n:void 0};(0,Ye.c)(t,void 0,o);break}case Ht.LogEvent:h("clientsideEvent",{eventType:"ModelTraceExplorerUiEvent"},e.data.payload)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[r,h]),(0,a.useEffect)((()=>{var e;const t=null===(e=c.current)||void 0===e?void 0:e.contentWindow;t&&!d&&t.postMessage({type:Ut.UpdateTrace,traceData:r})}),[r,d]),(0,S.FD)("div",{css:(0,o.AH)({height:i},""),children:[d&&(0,S.Y)("div",{css:(0,o.AH)({position:"absolute",width:"100%",height:i},""),children:(0,S.Y)(xt.Skeleton,{label:"Frame Skeleton"})}),(0,S.Y)("iframe",{title:"Model Trace Explorer",src:f,ref:c,css:(0,o.AH)({border:"none",width:"100%",height:i},"")})]})},Yt=(0,a.createContext)({onSelectRow:()=>{}}),Dt=()=>(0,a.useContext)(Yt),kt=e=>{let{children:t}=e;const[n,r]=(0,a.useState)(null),i=(e=>{if(A()(e))return null;if(lt(e))return e;try{var t;const n=null===(t=e.spans)||void 0===t?void 0:t.map((e=>({...e,attributes:JSON.parse(e.attributes)})));return A()(n)?null:{data:{spans:n},info:{}}}catch(e){return null}})(n),{theme:l}=(0,s.u)();return(0,S.FD)(Yt.Provider,{value:{onSelectRow:r},children:[t,!A()(i)&&(0,S.Y)("div",{css:(0,o.AH)({borderTop:`1px solid ${l.colors.border}`},""),children:(0,S.Y)(wt,{modelTrace:i})})]})};let Ht=function(e){return e.Ready="READY",e.LogError="LOG_ERROR",e.LogEvent="LOG_EVENT",e}({}),Ut=function(e){return e.UpdateTrace="UPDATE_TRACE",e}({})}}]);
//# sourceMappingURL=https://sourcemaps.dev.databricks.com/ml-model-trace-renderer/js/649.2335590e.chunk.js.map