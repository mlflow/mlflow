"use strict";(self.webpackChunkdatabricks_mlModelTraceRenderer=self.webpackChunkdatabricks_mlModelTraceRenderer||[]).push([[409],{87409:(e,t,n)=>{let r;n.r(t),n.d(t,{CodeSnippetRenderMode:()=>ev,INFERENCE_TABLE_RESPONSE_COLUMN_KEY:()=>ep,INFERENCE_TABLE_TRACE_COLUMN_KEY:()=>eg,MLFLOW_TRACE_SCHEMA_VERSION_KEY:()=>eu,ModelIconType:()=>ef,ModelSpanType:()=>em,ModelTraceChildToParentFrameMessage:()=>rZ,ModelTraceContextProvider:()=>r6,ModelTraceExplorer:()=>rD,ModelTraceExplorerFrameRenderer:()=>r3,ModelTraceExplorerOSSNotebookRenderer:()=>rK,ModelTraceParentToChildFrameMessage:()=>r0,ModelTraceSpanType:()=>eh,getIsMlflowTraceUIEnabled:()=>eF,getTraceArtifact:()=>rB,isModelTrace:()=>eU,useModelTraceContext:()=>r5});var o=n(71218),i=n(25656),a=n.n(i),l=n(65848),s=n.n(l),c=n(80838),d=n(27443),u=n(98765),p=n(80682),g=n(14671),m=n(21340),f=n.n(m),h=n(83902),v=n(10322);let E=(0,l.createContext)({esComponent:v.Es.UiInfra,errorBoundaryId:"__default"});function y(){return(0,l.useContext)(E)}let _=Symbol("NOT_INITIALIZED");var A=n(71907),T=n(37067),b=n(8161);let I=function(e){return e.GLOBAL="global",e.WEBAPP_APP_ROOT="webapp_app_root",e.WEBAPP_LOGIN_ROOT="webapp_login_root",e.WEBAPP_REACT_ROOT="webapp_react_root",e.PLATFORM_ROUTER_PAGE_VIEW="platform_router_page_view",e.PLATFORM_ROUTER_PAGE_ID="platform_router_page_id",e.SCHEMA_BROWSER_OPTIONS="schema_browser_options",e.SCHEMA_BROWSER_LOCATION_ID="schema_browser_location_id",e.SCHEMA_BROWSER_PANEL_ID="schema_browser_panel_id",e.SCHEMA_BROWSER_TREE_ID="schema_browser_tree_id",e.SEARCH_PAGE="search_page",e.NAVIGATIONAL_SEARCH_BAR="navigational_search_bar",e.INGESTION_CONNECTIONS_MODAL_ID="ingestion_connections_modal_id",e.INGESTION_CREATE_TABLE_VOLUME="ingestion_create_table_volume",e.INGESTION_CREATE_OR_MODIFY_TABLE_PAGE_ID="ingestion_create_or_modify_table_page_id",e.INGESTION_CREATE_OR_MODIFY_TABLE_ID="ingestion_create_or_modify_table_id",e.INGESTION_CREATE_TABLE_EXTERNAL_LOCATIONS_PAGE_ID="ingestion_create_table_external_locations_page_id",e.INGESTION_CREATE_TABLE_EXTERNAL_LOCATIONS_ID="ingestion_create_table_external_locations_id",e.INGESTION_NEW_PIPELINE_PAGE_ID="ingestion_new_pipeline_page_id",e.INGESTION_PREVIEW_TABLE_ID="ingestion_preview_table_id",e.INGESTION_FILE_UPLOADER_ID="ingestion_file_uploader_id",e.INGESTION_VOLUME_UPLOAD_ID="ingestion_volume_upload_id",e.INGESTION_ADD_DATA_PAGE_ID="ingestion_add_data_page_id",e.INGESTION_QUERY_SOURCE_ALERTS_ID="ingestion_query_source_alerts_id",e.INGESTION_SETUP_WIZARD_ID="ingestion_setup_wizard_id",e.DATA_EXPLORER_UI="data_explorer_ui",e.SQL_EDITOR_TAB_ID="sql_editor_tab_id",e.SQL_EDITOR_TABS_COUNT_ID="sql_editor_tabs_count_id",e.SISU_APP_ROOT="sisu_app_root",e.ANALYTICS_CONTAINER="analytics_container",e.PRODUCT_ENTITY_CONTAINER="product_entity_container",e.PANEL_BOUNDARY="panel_boundary",e.ACCOUNTS_CONSOLE_LOGIN_ROOT="accounts_console_login_root",e.BILLING_UPGRADE_MODAL="billing_upgrade_modal",e.FEATURE_PREVIEW_PAGE_ID="feature_preview_page_id",e.WEBAPP_DARK_MODE_PROMPT_MODAL="webapp_dark_mode_prompt_modal",e.ASSET_LIST_ITEM="homepage_asset_list_item",e.BROWSE_ASSET_SELECTOR="browse_asset_selector",e.BROWSE_ASSET_SELECTOR_SECTION="browse_asset_selector_section",e.BROWSE_ASSET_SELECTOR_SUBSECTION="browse_asset_selector_subsection",e.BROWSE_FAVORITES_TABLE="browse_favorite_table",e.BROWSE_POPULAR_TABLE="browse_popular_table",e.ACCOUNTS_CONSOLE_CREATE_WORKSPACE_MODAL="accounts_console_create_workspace_modal",e.DATA_SHARING="data_sharing",e.AI_PLAYGROUND="ai_playground",e.UI_DEPLOYABLE="ui_deployable",e.WAREHOUSE_UI_MONITORING_TAB="warehouse_ui_monitoring_tab",e.ASSISTANT_QUICKFIX="assistant_quickfix",e.PIPELINE_CONTEXT="pipeline_context",e.MLFLOW_CONTEXT="mlflow_context",e.ALERT_UTILS="alert_utils",e}({}),S={DUMMY_TEST_CONTEXT:["context.server_context.client_ip"],[I.ANALYTICS_CONTAINER]:["context.analytics_context.analytics_container_context","context.client_context.es_component"],[I.PLATFORM_ROUTER_PAGE_ID]:["context.client_context.page_id","context.client_context.page_info_context.record_event_context_page_id"],[I.PLATFORM_ROUTER_PAGE_VIEW]:["context.client_context.page_view_id","context.client_context.page_info_context.record_event_context_page_view_id"],[I.PRODUCT_ENTITY_CONTAINER]:["context.analytics_context.product_entity_context"]};var R=n(19073),N=n(97402);let x=void 0,C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Set;return Object.keys(e).forEach(r=>{let o=[...t,r].join(".");"object"==typeof e[r]&&null!==e[r]?C(e[r],[...t,r]).forEach(e=>n.add(e)):n.add(o)}),n},O=(e,t)=>{var n,r;return null!==(n=null===(r=S[e])||void 0===r?void 0:r.some(e=>t.startsWith(e)))&&void 0!==n&&n};function w(e,t,n,r,o){let i=C(e),l=new Set,s=new Set,c=t.map(t=>{let n=t.recordProtoContextFunc(e);return{id:t.id,result:n,paths:C(n)}});c.forEach(e=>{let{paths:t,id:n}=e;t.forEach(e=>{O(n,e)&&i.has(e)&&s.add(e)})});let d=a().merge(e,...c.map(e=>e.result));return c.forEach(e=>{let{id:t,paths:n}=e;n.forEach(e=>{i.has(e)?O(t,e)||l.add(e):i.add(e)})}),s.size>0&&(0,R.W)("databricks.fe.observability.protoContextualAlerts",!1)&&h.iT.sev2(v.Es.UiObservability,"experimental-AllowlistedRecordProtoPropertyViolation",`Error boundary: ${r}, record event context chain: ${o.join(",")}, allowlisted properties modified by main object: ${[...s].join(",")}. Please follow go/recordprotoallowlistviolation to resolve.
Call stack: ${Error().stack}`,!0),l.delete("context.client_context.page_info_context.active_record_event_context_id"),l.size>0&&(0,R.W)("databricks.fe.observability.protoContextualAlerts",!1)&&h.iT.sev2(v.Es.UiObservability,"experimental-DuplicateRecordProtoProperty",`Error boundary: ${r}, record event context chain: ${o.join(",")}, duplicate proto properties: ${[...l].join(",")}. Please follow go/recordprotoduplicateproperties to resolve.
Call stack: ${Error().stack}`,!0),d}function M(){let{esComponent:e,errorBoundaryId:t}=y(),{contextList:n,contextChain:r}=(0,l.useContext)(er);return(0,l.useCallback)(o=>(0,N.F)(n.length>0?w({entry:o},n,e,t,r):{entry:o}),[r,t,e,n])}function Y(){let{esComponent:e,errorBoundaryId:t}=y(),{contextList:n,contextChain:r}=(0,l.useContext)(er),o=(0,l.useRef)(x);return(0,l.useLayoutEffect)(()=>{o.current=n},[n]),(0,l.useCallback)(n=>{(0,N.F)(o.current?w({entry:n},o.current,e,t,r):{entry:n})},[r,t,e])}let L="rit_comp_id",P=function(e){return e.INITIAL_LOAD="INITIAL_LOAD",e.NAVIGATION="NAVIGATION",e.INTERACTION="INTERACTION",e.MEASUREMENT="MEASUREMENT",e}({});var D=n(36827);function k(e){switch(e.entityType){case"page":return{type:D.Vj.PAGE,sub_type:void 0,entity_id:e.entityId};case"component":return{type:D.Vj.COMPONENT,sub_type:function(e){switch(e){case"accordion":return D.jj.ACCORDION;case"alert":return D.jj.ALERT;case"banner":return D.jj.BANNER;case"button":return D.jj.BUTTON;case"card":return D.jj.CARD;case"checkbox":return D.jj.CHECKBOX;case"context_menu_checkbox_item":return D.jj.CONTEXT_MENU_CHECKBOX_ITEM;case"context_menu_item":return D.jj.CONTEXT_MENU_ITEM;case"context_menu_radio_group":return D.jj.CONTEXT_MENU_RADIO_GROUP;case"dialog_combobox":return D.jj.DIALOG_COMBOBOX;case"div":return D.jj.DIV;case"drawer_content":return D.jj.DRAWER_CONTENT;case"dropdown_menu_checkbox_item":return D.jj.DROPDOWN_MENU_CHECKBOX_ITEM;case"dropdown_menu_item":return D.jj.DROPDOWN_MENU_ITEM;case"dropdown_menu_radio_group":return D.jj.DROPDOWN_MENU_RADIO_GROUP;case"file_input":return D.jj.FILE_INPUT;case"form":return D.jj.FORM;case"input":return D.jj.INPUT;case"legacy_select":return D.jj.LEGACY_SELECT;case"link":return D.jj.LINK;case"modal":return D.jj.MODAL;case"notification":return D.jj.NOTIFICATION;case"pagination":return D.jj.PAGINATION;case"pill_control":return D.jj.PILL_CONTROL;case"popover":return D.jj.POPOVER;case"preview_card":return D.jj.PREVIEW_CARD;case"radio":return D.jj.RADIO;case"radio_group":return D.jj.RADIO_GROUP;case"react_select":return D.jj.REACT_SELECT;case"segmented_control_group":return D.jj.SEGMENTED_CONTROL_GROUP;case"simple_select":return D.jj.SIMPLE_SELECT;case"switch":return D.jj.SWITCH;case"table_header":return D.jj.TABLE_HEADER;case"tabs":return D.jj.TABS;case"tag":return D.jj.TAG;case"text_area":return D.jj.TEXT_AREA;case"toggle_button":return D.jj.TOGGLE_BUTTON;case"tooltip":return D.jj.TOOLTIP;case"typeahead_combobox":return D.jj.TYPEAHEAD_COMBOBOX;case"typography_link":return D.jj.TYPOGRAPHY_LINK}}(e.entitySubType),entity_id:e.entityId};case"interaction":return{type:D.Vj.INTERACTION,sub_type:function(e){switch(e){case P.INITIAL_LOAD:return D.jj.INITIAL_LOAD;case P.NAVIGATION:return D.jj.NAVIGATION;case P.INTERACTION:return D.jj.INTERACTION;case P.MEASUREMENT:return D.jj.MEASUREMENT}}(e.entitySubType),entity_id:e.entityId}}}let F=new Set(["clusterLogDestination","availabilityZone","availability","clusterLogRegion","virtualClusterSize","performanceMode","manualModeEnableAutoscaling","autoterminationEnabled","autoModeSparkVersion","manualModeSparkVersion","runtimeEngine","nodeTypeId","driverNodeTypeId","instancePoolId","driverInstancePoolId","numWorkers","minWorkers","maxWorkers","autoterminationMinutes","dataSecurityMode","useMlRuntime","singleNode","useDocker","ebsVolumeType","ebsVolumeCount","ebsVolumeSize","localSsdCount"]),H={SimpleClusterCreateForm:F,SimpleClusterEditForm:F};function U(e){switch(typeof e){case"boolean":return{value_boolean:e};case"number":return{value_number:e};case"string":return{value_string:e};default:return}}function B(e){var t,n,r,o,i,a,l,s;let c={...e.customContext,interactionSubject:e.eventPayload.interactionSubject,rootInteractionId:e.eventPayload.rootInteractionId,interactionId:e.eventPayload.interactionId,eventType:e.eventType,eventClientSource:e.eventClientSource,entityType:e.eventEntity.entityType,entitySubType:e.eventEntity.entitySubType,entityId:e.eventEntity.entityId};switch(e.eventType){case"page_view":{let{productEntityChain:t,urlParams:n,...r}=e.eventPayload,o=null==t?void 0:t.map(e=>`${e.type}:${e.id}`).join(",");return{...c,pageId:e.eventEntity.entityId,productEntityChain:o,...r,...n}}case"page_clipboard_cut":return{...c,referrerComponentType:null===(t=e.eventPayload.referrerEntity)||void 0===t?void 0:t.entitySubType,referrerComponentId:null===(n=e.eventPayload.referrerEntity)||void 0===n?void 0:n.entityId};case"page_clipboard_copy":return{...c,referrerComponentType:null===(r=e.eventPayload.referrerEntity)||void 0===r?void 0:r.entitySubType,referrerComponentId:null===(o=e.eventPayload.referrerEntity)||void 0===o?void 0:o.entityId};case"page_clipboard_paste":return{...c,referrerComponentType:null===(i=e.eventPayload.referrerEntity)||void 0===i?void 0:i.entitySubType,referrerComponentId:null===(a=e.eventPayload.referrerEntity)||void 0===a?void 0:a.entityId};case"component_click":case"component_view":case"component_zoom":return{...c,componentType:e.eventEntity.entitySubType,componentId:e.eventEntity.entityId};case"component_value_change":return{...c,componentType:e.eventEntity.entitySubType,componentId:e.eventEntity.entityId,valueChangeEventValueBoolean:e.eventPayload.valueBoolean,valueChangeEventValueString:e.eventPayload.valueString,valueChangeEventValueNumber:e.eventPayload.valueNumber};case"form_submit":return{...c,referrerComponentType:null===(l=e.eventPayload.submissionTriggerEntity)||void 0===l?void 0:l.entitySubType,referrerComponentId:null===(s=e.eventPayload.submissionTriggerEntity)||void 0===s?void 0:s.entityId};case"interaction_phase":return{...c,interactionPhaseName:e.eventPayload.interactionPhaseName,interactionPhaseStatus:e.eventPayload.interactionPhaseStatus,interactionPhaseType:e.eventPayload.interactionPhaseType}}}function j(e){return{type:function(e){switch(e){case"page_view":return D.AX.PAGE_VIEW;case"page_clipboard_cut":return D.AX.CLIPBOARD_CUT;case"page_clipboard_copy":return D.AX.CLIPBOARD_COPY;case"page_clipboard_paste":return D.AX.CLIPBOARD_PASTE;case"component_click":return D.AX.COMPONENT_CLICK;case"component_value_change":return D.AX.COMPONENT_VALUE_CHANGE;case"component_view":return D.AX.COMPONENT_VIEW;case"component_zoom":return D.AX.COMPONENT_ZOOM;case"interaction_phase":return D.AX.INTERACTION_PHASE;case"form_submit":return D.AX.FORM_SUBMIT}}(e.eventType),client_source:function(e){switch(e){case"adhoc":case"dropzone":return D.Ye.ADHOC;case"design_system":return D.Ye.DESIGN_SYSTEM;case"legacy_router":return D.Ye.LEGACY_ROUTER;case"react_interaction_tracing":return D.Ye.REACT_INTERACTION_TRACING;case"unified_router":return D.Ye.UNIFIED_ROUTER}}(e.eventClientSource),entity:k(e.eventEntity),payload:(()=>{var t,n,r,o,i,a,l,s,c,d,u,p,g,m,f,h,v,E,y,_,A;let T={interaction_subject:e.eventPayload.interactionSubject,interaction_id:e.eventPayload.interactionId,root_interaction_id:e.eventPayload.rootInteractionId};switch(e.eventType){case"page_view":let{utmSourceUrlParam:b,utmMediumUrlParam:I,utmCampaignUrlParam:S,utmAdGroupUrlParam:R,utmContentUrlParam:N,utmOfferUrlParam:x,utmAdUrlParam:C,sisuIntentUrlParam:O,itmDataUrlParam:w,scidUrlParam:M,sisuDbxSourceUrlParam:Y,sisuRlAidUrlParam:L,sisuGclidUrlParam:P,sisuMsclkidUrlParam:F,sisuFblidUrlParam:B,sisuLiFatIdUrlParam:j,sisuTwclidUrlParam:W,sisuRdtCidUrlParam:G,fullscreenWidgetUrlParam:z,...$}=null!==(t=e.eventPayload.urlParams)&&void 0!==t?t:{},K={utm_source:null===(n=e.eventPayload.urlParams)||void 0===n?void 0:n.utmSourceUrlParam,utm_medium:null===(r=e.eventPayload.urlParams)||void 0===r?void 0:r.utmMediumUrlParam,utm_campaign:null===(o=e.eventPayload.urlParams)||void 0===o?void 0:o.utmCampaignUrlParam,utm_ad_group:null===(i=e.eventPayload.urlParams)||void 0===i?void 0:i.utmAdGroupUrlParam,utm_content:null===(a=e.eventPayload.urlParams)||void 0===a?void 0:a.utmContentUrlParam,utm_offer:null===(l=e.eventPayload.urlParams)||void 0===l?void 0:l.utmOfferUrlParam,utm_ad_url:null===(s=e.eventPayload.urlParams)||void 0===s?void 0:s.utmAdUrlParam,sisu_intent:null===(c=e.eventPayload.urlParams)||void 0===c?void 0:c.sisuIntentUrlParam,itm_data:null===(d=e.eventPayload.urlParams)||void 0===d?void 0:d.itmDataUrlParam,scid:null===(u=e.eventPayload.urlParams)||void 0===u?void 0:u.scidUrlParam,sisu_dbx_source:null===(p=e.eventPayload.urlParams)||void 0===p?void 0:p.sisuDbxSourceUrlParam,sisu_rl_aid:null===(g=e.eventPayload.urlParams)||void 0===g?void 0:g.sisuRlAidUrlParam,sisu_gclid:null===(m=e.eventPayload.urlParams)||void 0===m?void 0:m.sisuGclidUrlParam,sisu_msclkid:null===(f=e.eventPayload.urlParams)||void 0===f?void 0:f.sisuMsclkidUrlParam,sisu_fbclid:null===(h=e.eventPayload.urlParams)||void 0===h?void 0:h.sisuFblidUrlParam,sisu_li_fat_id:null===(v=e.eventPayload.urlParams)||void 0===v?void 0:v.sisuLiFatIdUrlParam,sisu_twclid:null===(E=e.eventPayload.urlParams)||void 0===E?void 0:E.sisuTwclidUrlParam,sisu_rdt_cid:null===(y=e.eventPayload.urlParams)||void 0===y?void 0:y.sisuRdtCidUrlParam,fullscreen_widget:null===(_=e.eventPayload.urlParams)||void 0===_?void 0:_.fullscreenWidgetUrlParam,...$};return{...T,page_view_payload:{referrer_component_id:e.eventPayload.referrerComponentId,browser_screen_height:e.eventPayload.browserScreenHeight,browser_screen_width:e.eventPayload.browserScreenWidth,url_params:Object.values(K).some(e=>void 0!==e)?K:void 0}};case"page_clipboard_cut":return{...T,clipboard_cut_payload:{referrer_entity:e.eventPayload.referrerEntity?k(e.eventPayload.referrerEntity):void 0}};case"page_clipboard_copy":return{...T,clipboard_copy_payload:{referrer_entity:e.eventPayload.referrerEntity?k(e.eventPayload.referrerEntity):void 0}};case"page_clipboard_paste":return{...T,clipboard_paste_payload:{referrer_entity:e.eventPayload.referrerEntity?k(e.eventPayload.referrerEntity):void 0}};case"component_click":case"component_view":case"component_zoom":return T;case"component_value_change":let V=void 0!==(A=e.eventPayload).valueBoolean?{value_boolean:A.valueBoolean}:void 0!==A.valueString?{value_string:A.valueString}:void 0!==A.valueNumber?{value_number:A.valueNumber}:void 0!==A.valueFiles?{value_multi_file_metadata:{file_metadata_list:A.valueFiles.map(e=>({mime_type:e.type,byte_size:e.size}))}}:{};return{...T,component_value_change_payload:{...V,value_payload:V}};case"form_submit":return{...T,form_submit_payload:{submission_trigger_entity:e.eventPayload.submissionTriggerEntity?k(e.eventPayload.submissionTriggerEntity):void 0,form_property_values:function(e,t,n){if(void 0===t&&void 0===n||void 0===e||!H[e])return;let r={};return H[e].forEach(e=>{let o=null==t?void 0:t[e],i=null==n?void 0:n[e];(void 0!==o||void 0!==i)&&(r[e]={initial_value:U(o),final_value:U(i)})}),r}(e.eventEntity.entityId,e.eventPayload.initialPropertyValues,e.eventPayload.finalPropertyValues)}};case"interaction_phase":let X=function(e){switch(e){case"start":return D.jq.START;case"in_progress":return D.jq.IN_PROGRESS;case"complete":return D.jq.COMPLETE}}(e.eventPayload.interactionPhaseType);return{...T,interaction_phase_payload:{name:e.eventPayload.interactionPhaseName,type:X,status:function(e){switch(e){case"success":return D.Qf.SUCCESS;case"failure":return D.Qf.FAILURE;case"cancelled":return D.Qf.CANCELLED;case"interrupted":return D.Qf.INTERRUPTED;case"timed_out":return D.Qf.TIMED_OUT}}(e.eventPayload.interactionPhaseStatus),duration_millis:X===D.jq.COMPLETE&&e.eventPayload.duration?Math.round(10*e.eventPayload.duration)/10:void 0}}}})(),custom_context:e.customContextProto}}function W(e,t,n){G(e,t,{...n,eventClientSource:"adhoc"})}function G(e,t,n){if((0,R.W)("databricks.fe.observability.recordProtoBeforeEvent",!0)){t&&t({observability_log:j(n)}),e("uiAnalyticsEvent",B(n));return}e("uiAnalyticsEvent",B(n)),t&&t({observability_log:j(n)})}let z=new WeakMap,$=null;function K(e){if("nativeEvent"in e)return e.nativeEvent;return e}let V={onClick:"component_click",onSubmit:"form_submit",onValueChange:"component_value_change",onView:"component_view"},X=e=>{let{recordEvent:t,recordProto:n,startInteraction:r}=e;return(0,l.useCallback)(e=>{var o,i,a,l,s;let{eventType:c,componentType:d,componentId:u,componentSubType:p,value:g,shouldStartInteraction:m,event:f,mode:E,referrerComponent:y,isInteractionSubject:_,formPropertyValues:A}=e,T=null,I=V[c],S=function(e,t,n){return{interactionName:`${L}:${e}:component:${t}:${n}`,componentType:t,componentId:n}}(I,d,u),R=null;if(null!=f&&f.defaultPrevented&&"form_submit"!==I||"skip"===E)return;if(m){let e=!0;if("form_submit"===I){let t=f?z.get(K(f))||null:void 0;e=!t;let n=(t=null!==(a=t)&&void 0!==a?a:$?z.get($):null)?function(e){if(!e.startsWith(`${L}:`))return null;return{interactionName:e,componentType:e.split(":")[3],componentId:e.split(":")[4]}}(t.name):null;t&&n&&("button"===n.componentType||"dropdown_menu_item"===n.componentType)&&(R=t,y||(y={id:n.componentId,type:n.componentType}))}R||(R=r(S.interactionName,void 0,void 0,void 0,{isInteractionSubject:!1})),e&&R&&f&&function(e,t){if(!t){h.iT.sev2(v.Es.UiInfra,"Experimental: set-interaction-for-event-with-null",Error("cannot set null interaction for event"));return}let n=K(e);if(z.has(n)){var r;h.iT.sev2(v.Es.UiObservability,"Experimental: event-has-interaction-associated-already",{eventType:n.type,existing:null===(r=z.get(n))||void 0===r?void 0:r.name,new:null==t?void 0:t.name,stack:Error().stack})}$=n,z.set(n,t),queueMicrotask(()=>{n===$&&($=null)})}(f,R)}if("associate_event_only"===E)return;switch(I){case"component_click":T={eventType:I,eventClientSource:"design_system",eventEntity:{entityType:"component",entitySubType:d,entityId:u},eventPayload:{interactionSubject:null==_||_,interactionId:null===(o=R)||void 0===o?void 0:o.id,rootInteractionId:null===(i=R)||void 0===i?void 0:i.rootInteractionId}};break;case"form_submit":T={eventType:I,eventClientSource:"design_system",eventEntity:{entityType:"component",entitySubType:d,entityId:u},eventPayload:{interactionSubject:!0,interactionId:null===(l=R)||void 0===l?void 0:l.id,rootInteractionId:null===(s=R)||void 0===s?void 0:s.rootInteractionId,submissionTriggerEntity:y?{entityType:"component",entitySubType:y.type,entityId:y.id}:void 0,initialPropertyValues:null==A?void 0:A.initial,finalPropertyValues:null==A?void 0:A.final}};break;case"component_value_change":T={eventType:I,eventClientSource:"design_system",eventEntity:{entityType:"component",entitySubType:d,entityId:u},eventPayload:{interactionSubject:!0,valueBoolean:"boolean"==typeof g?g:void 0,valueString:"string"==typeof g?g:void 0,valueNumber:"number"==typeof g?g:void 0}};break;case"component_view":if(T={eventType:I,eventClientSource:"design_system",eventEntity:{entityType:"component",entitySubType:d,entityId:u},eventPayload:{interactionSubject:!0}},[b.v_.Alert,b.v_.Banner,b.v_.Notification].includes(d)&&p===b.NI.Error){let e=`Experimental: DuBois-${d} High Erroring Rate`;t(h.CW,{eventId:e},`Experimental: DuBois-${d} component being viewed at a high rate on ${u}`)}}T?G(t,n,T):h.iT.sev2(v.Es.UiObservability,"InternalDesignSystemEventProvider/UnknownEventType",{eventType:c,componentType:d,componentId:u})},[t,n,r])},q=Symbol();function J(e,t,n){let r;let o=function(){if(void 0===r&&(r=e()),!r)return t(...arguments);return n(...arguments)};return o[q]=function(){r=void 0},o}let Q=s().createContext({getCurrentInteraction:()=>null,startInteraction:()=>null}),Z=J(()=>null!=r?r:(0,R.W)("databricks.fe.observability.enableInteractionPhaseUseRecordProtoFn",!1),()=>N.w,M),ee=J(()=>null!=r?r:(0,R.W)("databricks.fe.observability.enableInteractionPhaseUseRecordProtoFn",!1),()=>N.w,Y);var et=n(98358);function en(e){let{children:t}=e,n=function(){let{tags:e,contextChain:t}=(0,l.useContext)(er),n=eo(t,"DuplicateRecordEventInvocationTag"),r=(0,l.useRef)(es);(0,l.useLayoutEffect)(()=>{r.current=e},[e]);let o=(0,l.useCallback)((e,t)=>(f()(r.current!==es,"mergeTagsStable called before layout effects ran. mergeTagsStable should only be called in response to user actions or in useEffect."),el(n,r.current,e,t)),[n]);return(0,l.useCallback)((e,t,n)=>{let r=o(t);(0,T.y)(e,r,n)},[o])}(),r=Y(),{startInteraction:o}=function(){let{esComponent:e,errorBoundaryId:t}=y(),{mergeTags:n}=function(){let{tags:e,contextChain:t}=(0,l.useContext)(er),n=eo(t,"DuplicateRecordEventInvocationTag"),r=(0,l.useRef)(es);return(0,l.useLayoutEffect)(()=>{r.current=e},[e]),{mergeTags:(0,l.useCallback)((e,t)=>(f()(r.current!==es,"mergeTagsStable called before layout effects ran. mergeTagsStable should only be called in response to user actions or in useEffect."),el(n,r.current,e,t)),[n])}}(),r=(0,l.useContext)(Q),o=r.startInteraction,i=ee(),a=(0,l.useCallback)((r,a,l,s,c)=>o(r,a,l,n({errorBoundaryId:t},{...s,esComponent:e}),c?{...c,useRecordProtoFn:i}:{useRecordProtoFn:i}),[n,e,o,t,i]);return(0,l.useMemo)(()=>({...r,startInteraction:a}),[r,a])}(),i=X({recordEvent:n,recordProto:r,startInteraction:o});return(0,et.Y)(b.zI,{callback:i,children:t})}let er=s().createContext({tags:{},contextChain:[],contextList:[]});function eo(e,t){let n=(0,l.useRef)([]),{esComponent:r,errorBoundaryId:o}=y();return(0,l.useCallback)((i,a)=>{let l=Object.keys(a),s=Object.keys(i).filter(e=>l.includes(e)&&!n.current.includes(e));s.length>0&&(n.current.push(...s),h.iT.sev2(s.some(e=>"esComponent"===e)?v.Es.UiObservability:r,t,`Error boundary: ${o}, record event context chain: ${e.join(",")}, duplicate tags: ${s.join(",")}. Please follow go/recordeventduplicatetags to resolve.
Call stack: ${Error().stack}`,!0))},[e,t,r,o])}function ei(e){let{tags:t,id:n,context:r,children:o}=e;return(0,et.Y)(ea,{tags:t,id:n,context:r,override:!1,children:o})}function ea(e){let{tags:t,id:n,context:r=e=>({}),children:o,override:i}=e,{contextChain:a,tags:s,contextList:c}=(0,l.useContext)(er),d=(0,l.useMemo)(()=>[...a,n],[n,a]),u=function(e){let t=(0,l.useRef)(_);if(t.current===_){let n=e();return t.current=n,n}return t.current}(()=>A.n.generateUuidV4()),p=(0,l.useRef)(0),g=(0,l.useMemo)(()=>{p.current+=1;let e=`${u}:${p.current}`;return{tags:{...s,...t,activeRecordEventContextId:e},contextChain:d,contextList:[...c,{recordProtoContextFunc:t=>{var n,o;let i=r(t);return{...i,context:{...i.context,client_context:{...null===(n=i.context)||void 0===n?void 0:n.client_context,page_info_context:{...null===(o=i.context)||void 0===o||null===(o=o.client_context)||void 0===o?void 0:o.page_info_context,active_record_event_context_id:e}}}}},id:n}]}},[s,t,d,c,r,n,u,p]),m=eo(d,"DuplicateRecordEventContextTag"),{activeRecordEventContextId:h,...v}=s;return(0,l.useEffect)(()=>{i||m(t,v)},[i,m,v,t]),f()(i||!a.includes(n),`Record event context ${n} cannot be redefined in the current chain ${d.join(",")}`),(0,et.Y)(er.Provider,{value:g,children:(0,et.Y)(en,{children:o})})}function el(e,t,n,r){if(n&&e(null!=n?n:{},t),n&&r){let e=Object.keys(n),t=Object.keys(r);f()(0===e.filter(e=>t.includes(e)).length,`Cannot specify a tag in both the tags and as override. Tags: ${e.join(",")}, overrides: ${t.join(",")}`)}return n||r?{...t,...n,...r}:t}let es={};function ec(){let{tags:e,contextChain:t}=(0,l.useContext)(er),n=eo(t,"DuplicateRecordEventInvocationTag"),r=(0,l.useCallback)((t,r)=>el(n,e,t,r),[n,e]);return{contextTags:e,mergeTags:r}}function ed(){let e=function(){let{mergeTags:e}=ec();return(0,l.useCallback)(t=>{let{metric:n,tags:r,overrides:o,eventData:i}=t,a=e(r,o);(0,T.y)(n,a,i)},[e])}();return(0,l.useCallback)((t,n,r)=>e({metric:t,tags:n,eventData:r}),[e])}let eu="mlflow.trace_schema.version",ep="response",eg="trace",em=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.FUNCTION="FUNCTION",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.UNKNOWN="UNKNOWN",e}({}),ef=function(e){return e.MODELS="models",e.DOCUMENT="document",e.CONNECT="connect",e.SEARCH="search",e.SORT="sort",e.UNKNOWN="unknown",e.FUNCTION="function",e.CODE="code",e.NUMBERS="numbers",e.WRENCH="wrench",e.AGENT="agent",e.CHAIN="chain",e}({}),eh=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.UNKNOWN="UNKNOWN",e}({}),ev=function(e){return e.JSON="json",e.TEXT="text",e.MARKDOWN="markdown",e}({});var eE=n(92546),ey=n(26769),e_=n(80982),eA=n(86571),eT=n(72152),eb=n(90374),eI=n(49716),eS=n(79670),eR=n(72299),eN=n(40631),ex=n(49393),eC=n(53127);let eO=e=>{let{type:t=ef.CONNECT}=e,{theme:n}=(0,c.wn)(),r={[ef.MODELS]:(0,et.Y)(eE.A,{}),[ef.DOCUMENT]:(0,et.Y)(ey.A,{}),[ef.CONNECT]:(0,et.Y)(e_.A,{}),[ef.CODE]:(0,et.Y)(eA.A,{}),[ef.FUNCTION]:(0,et.Y)(eT.A,{}),[ef.NUMBERS]:(0,et.Y)(eb.A,{}),[ef.SEARCH]:(0,et.Y)(eI.A,{}),[ef.SORT]:(0,et.Y)(eS.A,{}),[ef.UNKNOWN]:(0,et.Y)(eR.A,{}),[ef.WRENCH]:(0,et.Y)(eN.A,{}),[ef.AGENT]:(0,et.Y)(ex.A,{}),[ef.CHAIN]:(0,et.Y)(eC.A,{})};return(0,et.Y)("div",{css:(0,o.AH)({width:n.general.iconSize,height:n.general.iconSize,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:n.legacyBorders.borderRadiusMd,svg:{width:n.general.iconFontSize,height:n.general.iconFontSize}},"",""),children:r[t]})};function ew(e){switch(e){case em.LLM:return ef.MODELS;case em.CHAIN:return ef.CHAIN;case em.AGENT:return ef.AGENT;case em.TOOL:return ef.WRENCH;case em.CHAT_MODEL:return ef.MODELS;case em.RETRIEVER:return ef.SEARCH;case em.PARSER:return ef.CODE;case em.EMBEDDING:return ef.NUMBERS;case em.RERANKER:return ef.SORT;case em.FUNCTION:return ef.FUNCTION;case em.UNKNOWN:return ef.UNKNOWN;default:return ef.FUNCTION}}function eM(e){try{return JSON.parse(e)}catch(t){return e}}let eY=(e,t)=>{let n=e.events;if(!n)return[];let r=[];return n.forEach((n,o)=>{let i=n.attributes;if(!i)return;Object.keys(i).forEach(a=>{let l=a.toLowerCase().includes(t),s=eG(n.name,o,a);l&&r.push({span:e,section:"events",key:s,isKeyMatch:!0,matchIndex:0});let c=JSON.stringify(i[a]).toLowerCase().split(t).length-1;for(let t=0;t<c;t++)r.push({span:e,section:"events",key:s,isKeyMatch:!1,matchIndex:t})})}),r},eL=(e,t)=>{let n=[],r={inputs:null==e?void 0:e.inputs,outputs:null==e?void 0:e.outputs,attributes:null==e?void 0:e.attributes,events:null==e?void 0:e.events};return(0,i.map)(r,(r,o)=>{if("events"===o){n.push(...eY(e,t));return}eB(r).forEach(r=>{r.key.toLowerCase().includes(t)&&n.push({span:e,section:o,key:r.key,isKeyMatch:!0,matchIndex:0});let i=r.value.toLowerCase().split(t).length-1;for(let t=0;t<i;t++)n.push({span:e,section:o,key:r.key,isKeyMatch:!1,matchIndex:t})})}),n},eP=(e,t,n)=>{var r,o;if(Array.isArray(e)&&e.every(e0))return e.map(tn);let i=null!==(r=e6(t))&&void 0!==r?r:[],a=null!==(o=e6(n))&&void 0!==o?o:[];if(0===i.length||0===a.length)return;return i.concat(a)},eD=(e,t)=>{var n;if(Array.isArray(e)&&e.every(eX))return e;if(Array.isArray(null==t?void 0:t.tools)&&null!=t&&null!==(n=t.tools)&&void 0!==n&&n.every(eX))return t.tools},ek=(e,t,n,r)=>{var o,a,l,s,c,d;let u=eM(null===(o=e.attributes)||void 0===o?void 0:o["mlflow.spanType"]),p=eM(null===(a=e.attributes)||void 0===a?void 0:a["mlflow.spanInputs"]),g=eM(null===(l=e.attributes)||void 0===l?void 0:l["mlflow.spanOutputs"]),m=eP(eM(null===(s=e.attributes)||void 0===s?void 0:s["mlflow.chat.messages"]),p,g),f=eD(eM(null===(c=e.attributes)||void 0===c?void 0:c["mlflow.chat.tools"]),p),h=(0,i.mapValues)((0,i.omitBy)(e.attributes,(e,t)=>t.startsWith("mlflow.")),e=>eM(e)),v=e.events,E=(Number(e.start_time)-t)/1e3,y=(Number(null!==(d=e.end_time)&&void 0!==d?d:n)-t)/1e3;return{title:e.name,icon:(0,et.Y)(eO,{type:ew(u)}),type:u,key:e.context.span_id,start:E,end:y,children:r,inputs:p,outputs:g,attributes:h,events:v,chatMessages:m,chatTools:f}};function eF(){var e;return null!==(e=(0,R.W)("mlflow_tracing",null))&&void 0!==e?e:(0,R.W)("databricks.fe.mlflow.enableTracingUI",!1)}function eH(e){if(!e)return;if((0,i.isArray)(e)){var t;return null===(t=e.find(e=>e.key===eu))||void 0===t?void 0:t.value}return e[eu]}let eU=e=>{let t=null==e?void 0:e.info,n=null==e?void 0:e.data;if(!t||!n||!(null!=n&&n.spans))return!1;if((null==t?void 0:t.request_metadata)&&eH(t.request_metadata)||(null==t?void 0:t.tags)&&eH(t.tags))return!0;return!1},eB=e=>{if((0,i.isNil)(e))return[];if(Array.isArray(e)||(0,i.isString)(e)||(0,i.isNumber)(e)||(0,i.isBoolean)(e))return[{key:"",value:JSON.stringify(e,null,2)}];return Object.entries(e).map(e=>{let[t,n]=e;return{key:t,value:JSON.stringify(n,null,2)}})},ej=e=>{let{searchFilter:t,data:n,activeMatchBackgroundColor:r,inactiveMatchBackgroundColor:a,containsActiveMatch:l,activeMatch:s,scrollToActiveMatch:c}=e,d=RegExp(`(${(0,i.escapeRegExp)(t.trim())})`,"gi"),u=n.split(d),p=[],g=0;for(let e=0;e<u.length;e++)if(u[e].toLowerCase().includes(t.toLowerCase().trim())){let t=l&&s.matchIndex===g,n=t?r:a,i=(0,et.Y)("span",{ref:t?c:null,css:(0,o.AH)({backgroundColor:n,scrollMarginTop:50},"",""),children:u[e]},e);g++,p.push(i)}else p.push(u[e]);return p},eW=e=>e.type===em.RETRIEVER&&Array.isArray(e.outputs)&&e.outputs.length>0&&(0,i.every)(e.outputs,e=>(0,i.has)(e,"page_content")),eG=(e,t,n)=>`${e}-${t}-${n}`,ez=e=>{var t;return(null!==(t=e.events)&&void 0!==t?t:[]).filter(e=>"exception"===e.name).length},e$=e=>{var t;let n;switch(e.type){case"user":case"human":n="user";break;case"assistant":case"ai":n="assistant";break;case"system":n="system";break;case"tool":n="tool";break;case"function":n="function";break;default:return null}let r={content:e.content,role:n},o=e.tool_calls,a=null===(t=e.additional_kwargs)||void 0===t?void 0:t.tool_calls;return!(0,i.isNil)(o)&&Array.isArray(o)&&o.length>0&&o.every(e4)?r.tool_calls=(0,i.compact)(o.map(eK)):!(0,i.isNil)(a)&&Array.isArray(a)&&a.length>0&&a.every(eq)&&(r.tool_calls=a.map(te)),(0,i.isNil)(e.tool_call_id)||(r.tool_call_id=e.tool_call_id),r},eK=e=>({id:e.id,function:{arguments:JSON.stringify(e.args,null,2),name:e.name}}),eV=e=>{if((0,i.isNil)(e)||!(0,i.isNil)(e.type)&&!(0,i.isString)(e.type)||!(0,i.isNil)(e.description)&&!(0,i.isString)(e.description)||!(0,i.isNil)(e.enum)&&!Array.isArray(e.enum))return!1;return!0},eX=e=>{var t;if((0,i.isNil)(e)||"function"!==e.type||!(0,i.has)(e,"function.name"))return!1;let n=null===(t=e.function)||void 0===t?void 0:t.parameters;if(!(0,i.isNil)(n)){let e=n.required;if(!(0,i.isNil)(e)&&(!Array.isArray(e)||!e.every(i.isString)))return!1;let t=n.properties;if(!(0,i.isNil)(t)&&!Object.values(t).every(eV))return!1}return!0},eq=e=>{var t,n;return e&&(0,i.isString)(e.id)&&(0,i.isString)(null===(t=e.function)||void 0===t?void 0:t.arguments)&&(0,i.isString)(null===(n=e.function)||void 0===n?void 0:n.name)},eJ=e=>{switch(e.type){case"text":return(0,i.isString)(e.text);case"image_url":let{image_url:t}=e;if((0,i.isNil)(t))return!1;return(0,i.isString)(t.url)&&((0,i.isNil)(t.detail)||["auto","low","high"].includes(t.detail));case"input_audio":let{input_audio:n}=e;if((0,i.isNil)(n))return!1;return(0,i.isString)(n.data)&&((0,i.isNil)(n.format)||["wav","mp3"].includes(n.format));default:return!1}},eQ=e=>{if((0,i.isNil)(e)||(0,i.isString)(e))return!0;if((0,i.isArray)(e))return e.every(e=>eJ(e));return!1},eZ=e=>{if(!e0(e))return!1;return(0,i.isNil)(e.content)||(0,i.isString)(e.content)},e0=e=>{if(!e||e.tool_calls&&(!Array.isArray(e.tool_calls)||!e.tool_calls.every(eq))||!eQ(e.content))return!1;return"user"===e.role||"assistant"===e.role||"system"===e.role||"tool"===e.role},e1=e=>e&&Array.isArray(e.messages)&&e.messages.length>0&&e.messages.every(e0),e2=e=>e&&Array.isArray(e.choices)&&e.choices.length>0&&e.choices.every(e=>(0,i.has)(e,"message")&&eZ(e.message)),e3=e=>{if(!e||!(0,i.isNil)(e.content)&&!(0,i.isString)(e.content))return!1;return["human","user","assistant","ai","system","tool","function"].includes(e.type)},e4=e=>e&&(0,i.isString)(e.name)&&(0,i.has)(e,"args")&&(0,i.isString)(e.id),e5=e=>e&&e3(e.message),e7=e=>e&&eZ(e.message),e6=e=>{if(Array.isArray(e)&&e.every(e0))return e.map(tn);let t=e8(e);if(t)return t;let n=tr(e);if(n)return n;let r=e9(e);if(r)return r;let o=to(e);if(o)return o;let i=ti(e);if(i)return i;return null},e8=e=>{if(Array.isArray(e)&&1===e.length&&Array.isArray(e[0])&&e[0].length>0&&e[0].every(e3)){let t=e[0].map(e$);if(t.some(e=>null===e))return null;return t}if(Array.isArray(null==e?void 0:e.messages)&&e.messages.length>0&&e.messages.every(e3)){let t=e.messages.map(e$);if(t.some(e=>null===e))return null;return t}return null},e9=e=>{if(!Array.isArray(null==e?void 0:e.generations)||!(e.generations.length>0)||!e.generations[0].every(e5))return null;let t=e.generations[0].map(e=>e$(e.message));if(t.some(e=>null===e))return null;return t},te=e=>{var t;let n=null===(t=e.function)||void 0===t?void 0:t.arguments;try{n=JSON.stringify(JSON.parse(n),null,2)}catch(e){}return{id:e.id,function:{arguments:n,name:e.function.name}}},tt=e=>{if((0,i.isNil)(e)||(0,i.isString)(e))return e;return e.map(e=>{switch(e.type){case"text":return e.text;case"image_url":return"[image]";case"input_audio":return"[audio]"}}).join("\n")},tn=e=>{var t;return{...e,content:tt(e.content),tool_calls:null===(t=e.tool_calls)||void 0===t?void 0:t.map(te)}},tr=e=>{if(!e1(e))return null;return e.messages.map(tn)},to=e=>{if(!e2(e))return null;return e.choices.map(e=>{var t;return{...e.message,tool_calls:null===(t=e.message.tool_calls)||void 0===t?void 0:t.map(te)}})},ti=e=>{if(!e7(e))return null;return[e.message]};var ta=n(57488);function tl(e){let{ref:t,debounceTimeMs:n}=e,r=(0,l.useRef)({width:-1,height:-1}),o=(0,l.useRef)(),[i,a]=(0,l.useState)(null),s=(0,l.useCallback)(e=>{if(0===e.length)return;let t=e[0].contentRect;if(-1===r.current.width){r.current={width:t.width,height:t.height},a(r.current);return}if(t.width!==r.current.width||t.height!==r.current.height){if(r.current.width=t.width,r.current.height=t.height,!n){a({...r.current});return}clearTimeout(o.current),o.current=setTimeout(()=>{a({...r.current})},n)}},[n]),c=(0,l.useRef)();return c.current||(c.current=new ResizeObserver(s)),(0,l.useEffect)(()=>{let e="function"==typeof t?t():t.current;if(e){let t=c.current;return t.observe(e),()=>t.unobserve(e)}}),i}var ts={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},tc={name:"1endq0h",styles:"display:flex;flex:1;overflow-y:auto;flex-direction:row"},td={name:"kjqqaz",styles:"width:0;position:relative"};let tu=(0,l.forwardRef)((e,t)=>{var n;let{initialRatio:r,paneWidth:a,setPaneWidth:s,leftChild:d,leftMinWidth:u,rightChild:p,rightMinWidth:g}=e,[m,f]=(0,l.useState)(!1),h=(0,l.useRef)(null),v=null===(n=tl({ref:h}))||void 0===n?void 0:n.width,E=(null!=v?v:1/0)-g,y=(0,l.useRef)(r),{theme:_}=(0,c.wn)(),A=(0,l.useCallback)(e=>{v&&(y.current=e/v)},[v]);return(0,l.useImperativeHandle)(t,()=>({updateRatio:A})),(0,l.useEffect)(()=>{v&&s((0,i.clamp)(v*y.current,u,E))},[v,E,u,g,s]),(0,et.FD)("div",{ref:h,css:tc,children:[m&&(0,et.Y)(o.mL,{styles:ts}),(0,et.Y)(ta.ResizableBox,{axis:"x",width:a,css:(0,o.AH)({display:"flex",flex:`0 0 ${a}px`},"",""),handle:(0,et.Y)("div",{css:td,children:(0,et.Y)("div",{css:(0,o.AH)({position:"relative",width:_.spacing.sm,marginLeft:-_.spacing.xs,minHeight:"100%",cursor:"ew-resize",backgroundColor:"rgba(0,0,0,0)",zIndex:1,":hover":{backgroundColor:"rgba(0,0,0,0.1)"}},"","")})}),onResize:(e,t)=>{let{size:n}=t,r=(0,i.clamp)(n.width,u,E);s(r),v&&(y.current=r/v)},onResizeStart:()=>f(!0),onResizeStop:()=>f(!1),minConstraints:[u,1/0],maxConstraints:[E,1/0],children:d}),p]})});var tp=n(27714),tg=n(48681),tm=n(3078),tf=n(98022),th=n(80061),tv={name:"2wv1be",styles:"width:100%;box-sizing:border-box"};let tE=e=>{let{searchFilter:t,setSearchFilter:n,matchData:r,handleNextSearchMatch:i,handlePreviousSearchMatch:a}=e,[s,u]=(0,l.useState)(t),p=(0,tp.YQ)(n,350),{theme:g}=(0,c.wn)();return(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:g.spacing.sm},"",""),children:[(0,et.Y)(tg.p,{componentId:"shared.model-trace-explorer.search-input",allowClear:!0,placeholder:"Search",value:s,onClear:()=>{n(""),u("")},onChange:e=>{u(e.target.value),p(e.target.value.toLowerCase())},prefix:(0,et.Y)(eI.A,{}),css:tv}),r.match&&(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",marginLeft:g.spacing.xs,marginRight:g.spacing.sm,alignItems:"center"},"",""),children:[(0,et.FD)(tm.o.Text,{css:(0,o.AH)({whiteSpace:"nowrap",marginRight:g.spacing.sm},"",""),children:[r.currentMatchIndex+1," / ",r.totalMatches]}),(0,et.Y)(d.$n,{"data-testid":"prev-search-match",icon:(0,et.Y)(tf.A,{}),onClick:a,componentId:"shared.model-trace-explorer.prev-search-match"}),(0,et.Y)(d.$n,{"data-testid":"next-search-match",icon:(0,et.Y)(th.A,{}),onClick:i,componentId:"shared.model-trace-explorer.next-search-match"})]})]})};var ty=n(30109),t_=n(29183),tA={name:"15currb",styles:"display:flex;height:100%"},tT={name:"82a6rk",styles:"flex:1"};let tb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{min:Number.MAX_SAFE_INTEGER,max:0};return e.forEach(e=>{let{start:n,end:r,children:o}=e;n<t.min&&(t.min=n),r>t.max&&(t.max=r),tb(null!=o?o:[],t)}),t},tI=(e,t)=>{let n=[],r=e=>{if(!e)return;if(n.push(e),t.includes(e.key)){var o;null===(o=e.children)||void 0===o||o.forEach(r)}};return e.forEach(r),n},tS=e=>{let t={},n=e=>{var r;if(!e)return;t[e.key]=e,null===(r=e.children)||void 0===r||r.forEach(n)};return e.forEach(n),t},tR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,l.useState)(()=>{if(e.initialExpandAll&&e.rootNodes)return(0,i.values)(tS(e.rootNodes)).map(e=>e.key);return[]});return{expandedKeys:t,setExpandedKeys:n}},tN=e=>{switch(e.section){case"inputs":case"outputs":default:return"content";case"attributes":return"attributes";case"events":return"events"}},tx=e=>{var t;let{treeNode:n,selectedNode:r,setSelectedNode:o,setActiveTab:a}=e,[s,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(0),{filteredTreeNodes:p,matches:g}=(0,l.useMemo)(()=>{if((0,i.isNil)(n))return{filteredTreeNodes:[],matches:[]};return function e(t,n){var r,o;let i=n.toLowerCase().trim();if(""===i)return{filteredTreeNodes:[t],matches:[]};let a=null!==(r=t.children)&&void 0!==r?r:[],l=[],s=[];a.forEach(t=>{let{filteredTreeNodes:n,matches:r}=e(t,i);l.push(...n),s.push(...r)});let c=(null!==(o=t.title)&&void 0!==o?o:"").toLowerCase(),d=eL(t,i);if(0===d.length&&!c.includes(i))return{filteredTreeNodes:l,matches:s};return{filteredTreeNodes:[{...t,children:l}],matches:d.concat(s)}}(n,s)},[null==n?void 0:n.key,s]),m=(0,l.useCallback)(()=>{if(d<g.length-1){u(d+1);let e=g[d+1];o(e.span),a(tN(e))}},[d,g,o,a]),f=(0,l.useCallback)(()=>{if(d>0){u(d-1);let e=g[d-1];o(e.span),a(tN(e))}},[d,g,o,a]);return(0,l.useLayoutEffect)(()=>{if(0===p.length)return;if(0===g.length){var e;let t=tS(p);(null!==(e=null==r?void 0:r.key)&&void 0!==e?e:"")in t||o(p[0]);return}u(0),o(g[0].span),a(tN(g[0]))},[p,g,o]),{matchData:{match:null!==(t=g[d])&&void 0!==t?t:null,totalMatches:g.length,currentMatchIndex:d},searchFilter:s.toLowerCase().trim(),setSearchFilter:c,filteredTreeNodes:p,handleNextSearchMatch:m,handlePreviousSearchMatch:f}};var tC=n(70821),tO=n(99347),tw=n(28219),tM=n(36173);let tY="yellow500",tL="yellow200",tP=e=>{let{searchFilter:t,data:n,activeMatch:r,containsActiveMatch:i}=e,{theme:a}=(0,c.wn)(),s=(0,l.useCallback)(e=>{null==e||e.scrollIntoView({block:"nearest",inline:"nearest"})},[]),d=(0,l.useMemo)(()=>{if(!t)return[];return ej({data:n,searchFilter:t,activeMatchBackgroundColor:a.colors[tY],inactiveMatchBackgroundColor:a.colors[tL],containsActiveMatch:i,activeMatch:r,scrollToActiveMatch:s})},[t,n,a,i,r,s]);return(0,et.Y)("pre",{css:(0,o.AH)({whiteSpace:"pre-wrap",backgroundColor:a.colors.backgroundSecondary,padding:a.spacing.sm,fontSize:a.typography.fontSizeSm},"",""),children:d})};var tD=n(25650),tk=n(29417),tF=n(66795),tH=n(67559),tU=n(83308),tB=n(83487),tj=n(83214),tW=n(8153),tG=n(66164),tz=n(22919),t$=n(30136),tK=n(70549),tV=n(21733),tX=n(60700);let tq={name:"1fz341y",styles:"margin-right:16px;text-align:right;position:absolute;right:0;padding-top:2px;padding-right:2px"};function tJ(e){let{children:t,style:n}=e;return(0,et.Y)("div",{css:tq,style:n,children:t})}let tQ=s().createContext({});function tZ(e){let{children:t,theme:n={}}=e;return(0,et.Y)(tQ.Provider,{value:n,children:t})}function t0(e){let{theme:t="light",actions:n,children:r,style:o}=e;return(0,et.FD)(et.FK,{children:[(0,et.Y)(tJ,{style:o,children:(0,et.Y)(tZ,{theme:"duotoneDark"===t?{color:"rgba(255, 255, 255, 0.84)",hoverColor:"#8ccbffcc",backgroundColor:"rgba(140, 203, 255, 0)",hoverBackgroundColor:"rgba(140, 203, 255, 0.08)"}:void 0,children:n})}),r]})}function t1(e){e.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:BASE64|PARSE_URL|UPPER|LOWER|INITCAP|FORMAT_NUMBER|FORMAT_STRING|TRIM|UNBASE64|CONCAT|MAP|MAP_KEYS|MAP_VALUES|MAP_ENTRIES|MAP_FILTER|MAP_FROM_ARRAYS|MAP_FROM_ENTRIES|MAP_ZIP_WITH|ARRAY|AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:COPY|DESCRIBE HISTORY|DESCRIBE DETAIL|STORAGE CREDENTIALS?|URL|CACHE|UNCACHE|VACUUM|MSCK|CATALOGS?|CREDENTIALS?|FILES?|RECIPIENTS?|PROVIDERS?|TBLPROPERTIES|SHARES|VIEWS|EXTERNAL|REPAIR|REFRESH|COMMENT|LIST|PARQUET|LOCATIONS?|OPTIONS|JAR|ARCHIVE|ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR|AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/i,punctuation:/[;[\]()`,.]/}}t1.displayName="databricks-runtime-sql",t1.aliases=["sql","dbr-sql","dbsql","databricks-sql"],tj.A.registerLanguage("sql",t1),tj.A.registerLanguage("java",tz.A),tj.A.registerLanguage("python",tV.A),tj.A.registerLanguage("go",tW.A),tj.A.registerLanguage("javascript",t$.A),tj.A.registerLanguage("yaml",tX.A),tj.A.registerLanguage("json",tK.A),tj.A.registerLanguage("hcl",tG.A);let t2={light:{'code[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Source Code Pro', monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",color:"rgb(77, 77, 76)",background:"#fafafa",fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Source Code Pro', monospace",fontSize:"12px",lineHeight:"1.5em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",overflow:"auto",position:"relative",margin:"0.5em 0",padding:"1.25em 1em"},'code[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::-moz-selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"]::selection':{background:"#cceae7",color:"#263238"},'code[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},'pre[class*="language-"] ::selection':{background:"#cceae7",color:"#263238"},':not(pre) > code[class*="language-"]':{whiteSpace:"normal",borderRadius:"0.2em",padding:"0.1em"},".language-css > code":{color:"#f5871f"},".language-sass > code":{color:"#f5871f"},".language-scss > code":{color:"#f5871f"},'[class*="language-"] .namespace':{Opacity:"0.7"},atrule:{color:"#7c4dff"},"attr-name":{color:"#39adb5"},"attr-value":{color:"#f6a434"},attribute:{color:"#f6a434"},boolean:{color:"#7c4dff"},builtin:{color:"#39adb5"},cdata:{color:"#39adb5"},char:{color:"#39adb5"},class:{color:"#39adb5"},"class-name":{color:"#6182b8"},comment:{color:"#8e908c"},constant:{color:"#7c4dff"},deleted:{color:"#e53935"},doctype:{color:"#aabfc9"},entity:{color:"#e53935"},function:{color:"#4271ae"},hexcode:{color:"#f5871f"},id:{color:"#7c4dff",fontWeight:"bold"},important:{color:"#7c4dff",fontWeight:"bold"},inserted:{color:"#39adb5"},keyword:{color:"#8959a8"},number:{color:"#f5871f"},operator:{color:"#3e999f"},prolog:{color:"#aabfc9"},property:{color:"#39adb5"},"pseudo-class":{color:"#f6a434"},"pseudo-element":{color:"#f6a434"},punctuation:{color:"rgb(77, 77, 76)"},regex:{color:"#6182b8"},selector:{color:"#e53935"},string:{color:"#3ba85f"},symbol:{color:"#7c4dff"},tag:{color:"#e53935"},unit:{color:"#f5871f"},url:{color:"#e53935"},variable:{color:"#c72d4c"}},duotoneDark:{'code[class*="language-"]':{fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', 'Courier New', 'Courier', 'Source Code Pro', monospace",fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC"},'pre[class*="language-"]':{fontFamily:"'Menlo', 'Monaco', 'Consolas', 'Ubuntu Mono', 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', 'Courier New', 'Courier', 'Source Code Pro', monospace",fontSize:"14px",lineHeight:"1.375",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",background:"#2a2734",color:"#5DFAFC",padding:"1em",margin:".5em 0",overflow:"auto"},'pre > code[class*="language-"]':{fontSize:"1em"},'pre[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::-moz-selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'pre[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"]::selection':{textShadow:"none",background:"#6a51e6"},'code[class*="language-"] ::selection':{textShadow:"none",background:"#6a51e6"},':not(pre) > code[class*="language-"]':{padding:".1em",borderRadius:".3em"},comment:{color:"#6c6783"},prolog:{color:"#6c6783"},doctype:{color:"#6c6783"},cdata:{color:"#6c6783"},punctuation:{color:"#6c6783"},namespace:{Opacity:".7"},tag:{color:"#3AACE2"},operator:{color:"#3AACE2"},number:{color:"#3AACE2"},property:{color:"#5DFAFC"},function:{color:"#5DFAFC"},"tag-id":{color:"#eeebff"},selector:{color:"#eeebff"},"atrule-id":{color:"#eeebff"},"code.language-javascript":{color:"#c4b9fe"},"attr-name":{color:"#c4b9fe"},"code.language-css":{color:"#ffffff"},"code.language-scss":{color:"#ffffff"},boolean:{color:"#ffffff"},string:{color:"#ffffff"},entity:{color:"#ffffff",cursor:"help"},url:{color:"#ffffff"},".language-css .token.string":{color:"#ffffff"},".language-scss .token.string":{color:"#ffffff"},".style .token.string":{color:"#ffffff"},"attr-value":{color:"#ffffff"},keyword:{color:"#ffffff"},control:{color:"#ffffff"},directive:{color:"#ffffff"},unit:{color:"#ffffff"},statement:{color:"#ffffff"},regex:{color:"#ffffff"},atrule:{color:"#ffffff"},placeholder:{color:"#ffffff"},variable:{color:"#ffffff"},deleted:{textDecoration:"line-through"},inserted:{borderBottom:"1px dotted #eeebff",textDecoration:"none"},italic:{fontStyle:"italic"},important:{fontWeight:"bold",color:"#c4b9fe"},bold:{fontWeight:"bold"},"pre > code.highlight":{Outline:".4em solid #8a75f5",OutlineOffset:".4em"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"#2c2937"},".line-numbers .line-numbers-rows > span:before":{color:"#3c3949"},".line-highlight.line-highlight":{background:"linear-gradient(to right, rgba(224, 145, 66, 0.2) 70%, rgba(224, 145, 66, 0))"}}};function t3(e){let{theme:t="light",language:n,actions:r,style:o,children:a,...l}=e,s={border:"none",borderRadius:0,margin:0,padding:"24px",...o};return(0,et.Y)(t0,{theme:t,actions:r,children:(0,et.Y)(tj.A,{language:n,style:t2[t],customStyle:s,codeTagProps:{style:(0,i.pick)(o,"backgroundColor")},...l,children:a})})}var t4=n(80333);function t5(e){return e&&`${e} !important`}function t7(e){let{tooltipMessage:t,...n}=e,{color:r,hoverColor:i,hoverBackgroundColor:a,backgroundColor:s,borderColor:c}=(0,l.useContext)(tQ),u=(0,o.AH)({zIndex:1,color:t5(r),borderColor:t5(c),backgroundColor:t5(s),":hover":{color:t5(i),backgroundColor:t5(a)}},"","");return(0,et.Y)(t4.p,{title:t,children:(0,et.Y)(d.$n,{componentId:"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33",...n,css:u})})}var t6=n(48091),t8=n(23240),t9=n(23859);function ne(e){let{copyText:t,onClick:n,...r}=e,{actionIcon:o,tooltipMessage:i,copy:a}=function(e,t,n){let r=(0,g.tz)(),o=r.formatMessage({id:"hBAhI8",defaultMessage:"Copy"}),i=r.formatMessage({id:"g4hHzO",defaultMessage:"Copied"}),a=(0,t6.useClipboard)(),s=(0,l.useRef)(),[c,d]=(0,l.useState)(!1);return(0,l.useEffect)(()=>()=>{window.clearTimeout(s.current)},[]),{actionIcon:c?(0,et.Y)(t8.A,{}):(0,et.Y)(t9.A,{}),tooltipMessage:c?i:o,copy:()=>{a.copy(e),window.clearTimeout(s.current),d(!0),s.current=window.setTimeout(()=>{d(!1)},3e3)},copied:c,ariaLabel:o}}(t);return(0,et.Y)(t7,{tooltipMessage:i,icon:o,onClick:e=>{a(),null==n||n(e)},...r})}let nt=e=>{let t=(0,l.useMemo)(()=>nd({extensions:e.components}),[e.components]);return(0,et.Y)(tD.$,{components:t,remarkPlugins:na,children:e.children})},nn=e=>{let{codeBlock:t,codeInline:n,...r}=e,o=s().useMemo(()=>{var e;let t=/language-(\w+)/.exec(null!==(e=r.className)&&void 0!==e?e:"");return t&&t[1]?t[1]:void 0},[r.className]);if(r.inline)return s().createElement(n,r);return s().createElement(t,{...r,language:o})},nr=e=>{let{children:t}=e;return(0,et.Y)(tm.o.Text,{code:!0,children:t})};var no={name:"bjn8wh",styles:"position:relative"};let ni=s().memo(e=>{let{children:t,language:n}=e,{theme:r}=(0,c.wn)(),o=String(t).replace(/\n$/,"");return(0,et.Y)("div",{css:no,children:(0,et.Y)(t3,{actions:(0,et.Y)(ne,{componentId:"genai.util.markdown-copy-code-block",copyText:o}),theme:r.isDarkMode?"duotoneDark":"light",children:o,language:n&&nu(n)?n:"text",style:{padding:"8px 0",borderRadius:8,width:"100%",boxSizing:"border-box",maxHeight:640,display:"flex",flexDirection:"column-reverse"},showLineNumbers:!0})})}),na=[tk.A];var nl={name:"1qmr6ab",styles:"overflow:auto"},ns={name:"qneu98",styles:"height:auto;min-height:initial;display:inline-flex;min-width:100%"},nc={name:"qhxz92",styles:"max-width:100%"};let nd=e=>({a:e=>{let{href:t,children:n}=e;return(0,et.Y)(tm.o.Link,{componentId:"codegen_webapp_js_genai_util_markdown.tsx_71",href:t,disabled:null==t?void 0:t.startsWith("."),children:n,openInNewTab:!(t&&t.startsWith("#"))})},code:t=>{var n,r,o,i;return(0,et.Y)(nn,{...t,codeBlock:null!==(n=null===(r=e.extensions)||void 0===r?void 0:r.codeBlock)&&void 0!==n?n:ni,codeInline:null!==(o=null===(i=e.extensions)||void 0===i?void 0:i.codeInline)&&void 0!==o?o:nr})},p:e=>{let{children:t}=e;return(0,et.Y)(tm.o.Paragraph,{children:t})},h1:e=>{let{children:t}=e;return(0,et.Y)(tm.o.Title,{level:1,children:t})},h2:e=>{let{children:t}=e;return(0,et.Y)(tm.o.Title,{level:2,children:t})},h3:e=>{let{children:t}=e;return(0,et.Y)(tm.o.Title,{level:3,children:t})},h4:e=>{let{children:t}=e;return(0,et.Y)(tm.o.Title,{level:4,children:t})},h5:e=>{let{children:t}=e;return(0,et.Y)(tm.o.Title,{level:5,children:t})},table:e=>{let{children:t}=e;return(0,et.Y)("div",{css:nl,children:(0,et.Y)(tF.X,{scrollable:!0,css:ns,children:t})})},tr:e=>{let{children:t,isHeader:n}=e;return(0,et.Y)(tH.H,{children:t,isHeader:n})},th:e=>{let{children:t}=e;return(0,et.Y)(tU.A,{componentId:"codegen_webapp_js_genai_util_markdown.tsx_90",children:t})},td:e=>{let{children:t}=e;return(0,et.Y)(tB.n,{children:t,multiline:!0})},thead:e=>{let{children:t}=e;return(0,et.Y)(et.FK,{children:t})},tbody:e=>{let{children:t}=e;return(0,et.Y)(et.FK,{children:t})},img:e=>{let{src:t,alt:n}=e;return(0,et.Y)("img",{src:t,alt:n,css:nc})}}),nu=e=>{switch(e){case"go":case"hcl":case"java":case"javascript":case"json":case"python":case"sql":case"text":case"yaml":return!0;default:return!1}};function np(e){let{data:t,searchFilter:n,activeMatch:r,containsActiveMatch:a,renderMode:s}=e,u=!!n&&!(0,i.isNil)(r)&&t.toLowerCase().includes(n),{theme:p}=(0,c.wn)(),[m,f]=(0,l.useState)("json"===s),[h,v]=(0,l.useState)(u),E=(0,l.useRef)(null),y=(0,l.useMemo)(()=>{if("json"===s)return t;let e=JSON.parse(t);if((0,i.isString)(e))return e;return t},[t,s]),_=m||y.split("\n").length>4||y.length>300,A=(0,l.useMemo)(()=>{if(_&&!h){let e=y.split("\n").slice(0,4).join("\n");return e.length>300?e.slice(0,300):e}return y},[y,_,h]);(0,l.useEffect)(()=>{E.current&&f(E.current.scrollWidth>E.current.clientWidth)},[t]);let T=(0,l.useCallback)(e=>(0,et.Y)("pre",{...e,ref:E}),[]);if(u)return(0,et.Y)(tP,{data:t,searchFilter:n,activeMatch:r,containsActiveMatch:!r.isKeyMatch&&a});return(0,et.FD)(et.FK,{children:["markdown"===s?(0,et.Y)("div",{css:(0,o.AH)({padding:p.spacing.md,backgroundColor:p.colors.backgroundSecondary,marginBottom:-p.spacing.md},"",""),children:(0,et.Y)(nt,{children:A})}):(0,et.Y)(t3,{PreTag:T,showLineNumbers:!0,language:s,lineProps:{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"}},wrapLines:h,theme:p.isDarkMode?"duotoneDark":"light",style:{backgroundColor:p.colors.backgroundSecondary,padding:p.spacing.sm,paddingBottom:_?0:p.spacing.sm,overflow:h?"auto":"hidden",fontSize:p.typography.fontSizeSm,lineHeight:p.typography.lineHeightBase},children:A}),_&&(0,et.Y)("div",{css:(0,o.AH)({backgroundColor:p.colors.backgroundSecondary},"",""),children:(0,et.Y)(d.$n,{css:(0,o.AH)({width:"100%",padding:p.spacing.sm},"",""),componentId:h?"shared.model-trace-explorer.snippet-see-less":"shared.model-trace-explorer.snippet-see-more",icon:h?(0,et.Y)(tf.A,{}):(0,et.Y)(th.A,{}),type:"tertiary",onClick:()=>v(!h),children:h?(0,et.Y)(g.sA,{id:"AgjhWE",defaultMessage:"See less"}):(0,et.Y)(g.sA,{id:"HYQHVk",defaultMessage:"See more"})})})]})}let ng=e=>{let{title:t,searchFilter:n,isActiveMatch:r}=e,{theme:i}=(0,c.wn)(),a=(0,l.useCallback)(e=>{null==e||e.scrollIntoView({block:"nearest",inline:"nearest"})},[]),s=t.toLowerCase();if(!s.includes(n))return(0,et.Y)("div",{children:t});let d=s.indexOf(n),u=d+n.length,p=r?i.colors[tY]:i.colors[tL];return(0,et.FD)("div",{children:[t.slice(0,d),(0,et.Y)("span",{ref:r?a:null,css:(0,o.AH)({backgroundColor:p,scrollMarginTop:50},"",""),children:t.slice(d,u)}),t.slice(u)]})};function nm(e,t){if(t)return t;if(e)return ev.MARKDOWN;return ev.JSON}function nf(e){switch(e){case ev.JSON:return"JSON";case ev.TEXT:return"Text";case ev.MARKDOWN:return"Markdown"}}var nh={name:"fhxb3m",styles:"display:flex;flex-direction:row;align-items:center"},nv={name:"1c55ilo",styles:"height:min-content"};function nE(e){var t;let{title:n,tokens:r,data:a,searchFilter:s,activeMatch:d,containsActiveMatch:u,initialRenderMode:p}=e,g=(0,l.useMemo)(()=>JSON.parse(a),[a]),m=(0,i.isString)(g),{theme:f}=(0,c.wn)(),[h,v]=(0,l.useState)(nm(m,p)),E=u&&null!==(t=null==d?void 0:d.isKeyMatch)&&void 0!==t&&t;return(0,l.useEffect)(()=>{v(nm(m,p))},[m,p]),(0,et.Y)("div",{css:(0,o.AH)({position:"relative",marginBottom:f.spacing.md},"",""),children:(0,et.FD)("div",{css:(0,o.AH)({borderRadius:f.legacyBorders.borderRadiusMd,overflow:"hidden"},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${f.colors.border}`,backgroundColor:f.colors.backgroundSecondary,padding:f.spacing.xs},"",""),children:[(0,et.Y)(tm.o.Title,{css:(0,o.AH)({marginLeft:f.spacing.md-f.spacing.xs,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"",""),level:4,color:"secondary",withoutMargins:!0,children:(0,et.Y)(ng,{title:n,searchFilter:s,isActiveMatch:E})}),(0,et.FD)("div",{css:nh,children:[m&&!s&&(0,et.FD)(tw.Root,{children:[(0,et.Y)(tw.Trigger,{asChild:!0,children:(0,et.Y)(tM.v,{componentId:"shared.model-trace-explorer.snippet-render-mode-tag",css:nv,children:(0,et.FD)("div",{css:(0,o.AH)({paddingLeft:f.spacing.xs,marginRight:f.spacing.xs,cursor:"pointer"},"",""),children:[(0,et.Y)(tm.o.Text,{size:"sm",color:"secondary",children:nf(h)}),(0,et.Y)(th.A,{})]})})}),(0,et.FD)(tw.Content,{children:[(0,et.Y)(tw.RadioGroup,{componentId:"shared.model-trace-explorer.snippet-render-mode-radio",value:h,onValueChange:e=>v(e),children:Object.values(ev).map(e=>(0,et.FD)(tw.RadioItem,{value:e,children:[(0,et.Y)(tw.ItemIndicator,{}),nf(e)]},e))}),(0,et.Y)(tw.Arrow,{})]})]}),(0,et.Y)(ne,{componentId:"shared.model-trace-explorer.copy-snippet",copyText:a},"copy-snippet")]})]}),(0,et.Y)(np,{data:a,searchFilter:s,activeMatch:d,containsActiveMatch:u,renderMode:h})]})})}function ny(e){let{activeSpan:t,searchFilter:n,activeMatch:r}=e,{theme:a}=(0,c.wn)(),{attributes:l}=t,s=(0,i.keys)(l).length>0,d=!(0,i.isNil)(r)&&r.span.key===t.key;if(!s||(0,i.isNil)(l))return(0,et.Y)("div",{css:(0,o.AH)({marginTop:a.spacing.md},"",""),children:(0,et.Y)(tC.S,{description:(0,et.Y)(g.sA,{id:"B5K1Ix",defaultMessage:"No attributes found"})})});return(0,et.Y)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:a.spacing.sm,padding:a.spacing.md},"",""),children:Object.entries(l).map(e=>{let[t,o]=e;return(0,et.Y)(nE,{title:t,data:JSON.stringify(o,null,2),searchFilter:n,activeMatch:r,containsActiveMatch:d&&"attributes"===r.section&&r.key===t},t)})})}var n_=n(17061);function nA(e){let{paramName:t,paramProperties:n,isRequired:r}=e,{theme:i}=(0,c.wn)(),{type:a,description:l,enum:s}=n,d=a||l||s,u=d?{borderTopLeftRadius:i.borders.borderRadiusMd,borderTopRightRadius:i.borders.borderRadiusMd,borderBottom:`1px solid ${i.colors.border}`}:{borderRadius:i.borders.borderRadiusMd};return(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",width:"100%",borderRadius:i.borders.borderRadiusMd,border:`1px solid ${i.colors.border}`},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:i.colors.backgroundSecondary,padding:`${i.spacing.sm}px ${i.spacing.md}px`,gap:i.spacing.sm,...u},"",""),children:[(0,et.Y)(tm.o.Title,{withoutMargins:!0,style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:t}),r&&(0,et.Y)(tm.o.Text,{withoutMargins:!0,color:"error",children:(0,et.Y)(g.sA,{id:"JmNdE4",defaultMessage:"required"})})]}),d&&(0,et.FD)("div",{css:(0,o.AH)({display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto",gap:i.spacing.md,padding:`${i.spacing.sm}px ${i.spacing.md}px`},"",""),children:[a&&(0,et.FD)(et.FK,{children:[(0,et.Y)(tm.o.Text,{withoutMargins:!0,bold:!0,children:(0,et.Y)(g.sA,{id:"CbRDlp",defaultMessage:"Type"})}),(0,et.Y)(tm.o.Text,{withoutMargins:!0,code:!0,children:a})]}),l&&(0,et.FD)(et.FK,{children:[(0,et.Y)(tm.o.Text,{withoutMargins:!0,bold:!0,children:(0,et.Y)(g.sA,{id:"SLjN1/",defaultMessage:"Description"})}),(0,et.Y)(tm.o.Text,{withoutMargins:!0,children:l})]}),s&&(0,et.FD)(et.FK,{children:[(0,et.Y)(tm.o.Text,{withoutMargins:!0,bold:!0,children:(0,et.Y)(g.sA,{id:"/WK1x1",defaultMessage:"Enum Values"})}),(0,et.Y)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",gap:i.spacing.sm,flexWrap:"wrap"},"",""),children:s.map(e=>(0,et.Y)(tm.o.Text,{withoutMargins:!0,code:!0,children:e},e))})]})]})]})}function nT(e){var t,n,r;let{tool:i}=e,{theme:a}=(0,c.wn)(),[s,d]=(0,l.useState)(!1),u=i.function.description,p=null===(t=i.function.parameters)||void 0===t?void 0:t.properties,g=null!==(n=null===(r=i.function.parameters)||void 0===r?void 0:r.required)&&void 0!==n?n:[],m=u||p,f=m?{":hover":{backgroundColor:a.colors.actionIconBackgroundHover,cursor:"pointer"}}:{};return(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",width:"100%",borderRadius:a.borders.borderRadiusMd,border:`1px solid ${a.colors.border}`,marginBottom:a.spacing.md},"",""),"data-testid":"model-trace-explorer-chat-tool",children:[(0,et.FD)("div",{role:"button",css:(0,o.AH)({display:"flex",flexDirection:"row",gap:a.spacing.sm,alignItems:"center",borderBottom:m&&s?`1px solid ${a.colors.border}`:"none",padding:a.spacing.sm,...f},"",""),onClick:()=>d(!s),"data-testid":"model-trace-explorer-chat-tool-toggle",children:[m&&(s?(0,et.Y)(th.A,{}):(0,et.Y)(n_.A,{})),(0,et.Y)(tm.o.Text,{bold:!0,withoutMargins:!0,style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:i.function.name})]}),m&&s&&(0,et.FD)("div",{css:(0,o.AH)({padding:a.spacing.md},"",""),children:[u&&(0,et.Y)(tm.o.Paragraph,{style:{whiteSpace:"pre-wrap"},children:i.function.description}),p&&(0,et.Y)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:a.spacing.md},"",""),children:Object.keys(p).map(e=>(0,et.Y)(nA,{paramName:e,paramProperties:p[e],isRequired:g.includes(e)},e))})]})]})}var nb=n(22073),nI=n(99145),nS=n(39234);let nR=e=>{let t=e.isDarkMode?e.colors.tagPurple:e.colors.tagIndigo,n=e.isDarkMode?e.colors.white:e.colors.tagIndigo,r=e.colors.tagPurple,o=e.isDarkMode?"48%":"12%";return{iconColor:t,textColor:n,backgroundColor:`color-mix(in srgb, ${r} ${o}, transparent)`}};var nN={name:"12gbhjf",styles:"display:inline-flex;flex-shrink:1;overflow:hidden"};function nx(e){let{toolCall:t}=e,{theme:n}=(0,c.wn)(),{iconColor:r,textColor:i,backgroundColor:a}=(0,l.useMemo)(()=>nR(n),[n]);return(0,et.FD)("div",{children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",gap:n.spacing.xs,alignItems:"center",marginBottom:n.spacing.sm},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({display:"inline-flex",flexDirection:"row",gap:n.spacing.sm,backgroundColor:a,alignItems:"center",padding:`2px ${n.spacing.xs}px`,width:"min-content",borderRadius:n.borders.borderRadiusSm},"",""),children:[(0,et.Y)(eT.A,{css:(0,o.AH)({color:r},"","")}),(0,et.Y)(tm.o.Text,{css:(0,o.AH)({color:`${i} !important`,whiteSpace:"nowrap"},"",""),children:t.function.name})]}),(0,et.Y)(nS.m,{componentId:"test",content:t.id,children:(0,et.Y)("div",{css:nN,children:(0,et.Y)(tm.o.Text,{css:(0,o.AH)({padding:`2px ${n.spacing.xs}px`,backgroundColor:n.colors.codeBackground,"> code":{background:"none !important"},borderRadius:n.borders.borderRadiusSm,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},"",""),code:!0,color:"secondary",children:t.id})})})]}),(0,et.Y)(t3,{language:"json",theme:n.isDarkMode?"duotoneDark":"light",style:{padding:n.spacing.sm,marginBottom:n.spacing.md,fontSize:n.typography.fontSizeSm,lineHeight:n.typography.lineHeightBase},showLineNumbers:!0,children:t.function.arguments})]},t.id)}let nC=e=>{switch(e){case"system":return(0,et.Y)(nb.A,{});case"user":return(0,et.Y)(nI.A,{});case"tool":case"function":return(0,et.Y)(eN.A,{});default:return(0,et.Y)(eE.A,{})}},nO=e=>{switch(e){case"system":return(0,et.Y)(g.sA,{id:"+gqcru",defaultMessage:"System"});case"user":return(0,et.Y)(g.sA,{id:"t+aG6y",defaultMessage:"User"});case"assistant":return(0,et.Y)(g.sA,{id:"Hvznjh",defaultMessage:"Assistant"});case"tool":return(0,et.Y)(g.sA,{id:"dPn3az",defaultMessage:"Tool"});case"function":return(0,et.Y)(g.sA,{id:"5ZUAC2",defaultMessage:"Function"});default:return e}};var nw={name:"12gbhjf",styles:"display:inline-flex;flex-shrink:1;overflow:hidden"},nM={name:"12wal98",styles:"text-overflow:ellipsis;overflow:hidden;white-space:nowrap"};function nY(e){var t;let{message:n,className:r}=e,{theme:a}=(0,c.wn)(),[s,u]=(0,l.useState)(!1),p=null!==(t=n.content)&&void 0!==t?t:"",m=p.length>300,f=(0,l.useMemo)(()=>m?{":hover":{backgroundColor:a.colors.actionIconBackgroundHover,cursor:"pointer"}}:{},[a,m]),h=m&&!s?`${p.slice(0,300)}...`:p;return(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",width:"100%",borderRadius:a.borders.borderRadiusMd,border:`1px solid ${a.colors.border}`},"",""),className:r,children:[(0,et.FD)("div",{role:"button",css:(0,o.AH)({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:a.colors.backgroundSecondary,borderTopLeftRadius:a.borders.borderRadiusMd,borderTopRightRadius:a.borders.borderRadiusMd,borderBottom:`1px solid ${a.colors.border}`,padding:`${a.spacing.sm}px ${a.spacing.md}px`,gap:a.spacing.sm,...f},"",""),onClick:()=>u(!s),children:[m&&(s?(0,et.Y)(th.A,{}):(0,et.Y)(n_.A,{})),nC(n.role),(0,et.Y)(tm.o.Text,{bold:!0,children:nO(n.role)}),n.tool_call_id&&(0,et.Y)(nS.m,{componentId:"test",content:n.tool_call_id,children:(0,et.Y)("div",{css:nw,children:(0,et.Y)(tm.o.Text,{css:nM,code:!0,children:n.tool_call_id})})})]}),(0,et.FD)("div",{css:(0,o.AH)({padding:a.spacing.md,marginBottom:-a.typography.fontSizeBase},"",""),children:[!(0,i.isNil)(n.tool_calls)&&n.tool_calls.map(e=>(0,et.Y)(nx,{toolCall:e},e.id)),p&&(0,et.Y)(nt,{children:h})]}),m&&(0,et.Y)(d.$n,{componentId:s?"shared.model-trace-explorer.chat-message-see-less":"shared.model-trace-explorer.chat-message-see-more",icon:s?(0,et.Y)(tf.A,{}):(0,et.Y)(th.A,{}),type:"tertiary",onClick:()=>u(!s),css:(0,o.AH)({display:"flex",width:"100%",padding:a.spacing.md,borderTopLeftRadius:0,borderTopRightRadius:0},"",""),children:s?(0,et.Y)(g.sA,{id:"gTEFCD",defaultMessage:"See less"}):(0,et.Y)(g.sA,{id:"6fP+8o",defaultMessage:"See more"})})]})}function nL(e){let{messages:t}=e,{theme:n}=(0,c.wn)();if((0,i.isNil)(t))return null;return(0,et.Y)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:n.spacing.md},"",""),children:t.map((e,t)=>(0,et.Y)(nY,{message:e},t))})}var nP={name:"1d3w5wq",styles:"width:100%"};let nD=e=>{let{sectionKey:t,title:n,children:r,withBorder:i=!1}=e,[a,s]=(0,l.useState)(!0),{theme:u}=(0,c.wn)();return(0,et.FD)("div",{css:(0,o.AH)({marginBottom:u.spacing.md},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({alignItems:"center",display:"flex",flexDirection:"row",gap:u.spacing.xs,marginBottom:u.spacing.xs},"",""),children:[(0,et.Y)(d.$n,{size:"small",componentId:`shared.model-trace-explorer.expand-${t}`,type:"tertiary",icon:a?(0,et.Y)(th.A,{}):(0,et.Y)(n_.A,{}),onClick:()=>s(!a)}),(0,et.Y)(tm.o.Title,{withoutMargins:!0,level:4,css:nP,children:n})]}),a&&(0,et.Y)("div",{css:(0,o.AH)({border:i?`1px solid ${u.colors.border}`:"",borderRadius:i?u.legacyBorders.borderRadiusMd:"",padding:i?u.spacing.md:0,paddingTop:i?u.spacing.md:u.spacing.sm,paddingBottom:0},"",""),children:r})]})};function nk(e){let{chatMessages:t,chatTools:n}=e,{theme:r}=(0,c.wn)();return(0,et.FD)("div",{css:(0,o.AH)({overflowY:"auto",padding:r.spacing.md},"",""),"data-testid":"model-trace-explorer-chat-tab",children:[n&&(0,et.Y)(nD,{title:(0,et.Y)(g.sA,{id:"Cjq57+",defaultMessage:"Tools"}),sectionKey:"messages",children:n.map(e=>(0,et.Y)(nT,{tool:e},e.function.name))}),(0,et.Y)(nD,{title:(0,et.Y)(g.sA,{id:"AAdQxU",defaultMessage:"Messages"}),sectionKey:"messages",children:(0,et.Y)(nL,{messages:t})})]})}var nF={name:"1s4awny",styles:"display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%"},nH={name:"uqztsn",styles:"display:flex;flex-direction:row;justify-content:space-between;width:100%"};function nU(e){let{activeSpan:t,className:n,searchFilter:r,activeMatch:o}=e,a=(0,l.useMemo)(()=>eB(null==t?void 0:t.inputs),[t]),s=(0,l.useMemo)(()=>eB(null==t?void 0:t.outputs),[t]);if((0,i.isNil)(t))return null;let c=a.length>0,d=s.length>0,u=!(0,i.isNil)(o)&&o.span.key===t.key;return(0,et.FD)("div",{"data-testid":"model-trace-explorer-default-span-view",children:[c&&(0,et.Y)(nD,{withBorder:!0,sectionKey:"input",title:(0,et.Y)("div",{css:nF,children:(0,et.Y)(g.sA,{id:"/TX1Az",defaultMessage:"Inputs"})}),children:a.map((e,t)=>{let{key:n,value:i}=e;return(0,et.Y)(nE,{title:n,data:i,searchFilter:r,activeMatch:o,containsActiveMatch:u&&"inputs"===o.section&&o.key===n},n||t)})}),d&&(0,et.Y)(nD,{withBorder:!0,sectionKey:"output",title:(0,et.Y)("div",{css:nH,children:(0,et.Y)(g.sA,{id:"ZstVNI",defaultMessage:"Outputs"})}),children:s.map(e=>{let{key:t,value:n}=e;return(0,et.Y)(nE,{title:t,data:n,searchFilter:r,activeMatch:o,containsActiveMatch:u&&"outputs"===o.section&&o.key===t},t)})})]})}let nB=e=>e?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"},nj=e=>{let{itemKey:t,itemValue:n,charLimit:r=18,maxWidth:i=150,className:a}=e,{shouldTruncateKey:l,shouldTruncateValue:s}=function(e,t,n){let r=e.length+t.length,o=e.length>t.length,i=o?t.length:e.length;if(r<=n)return{shouldTruncateKey:!1,shouldTruncateValue:!1};if(i>n/2)return{shouldTruncateKey:!0,shouldTruncateValue:!0};return{shouldTruncateKey:o,shouldTruncateValue:!o}}(t,n,r);return(0,et.Y)(nS.m,{componentId:"shared.model-trace-explorer.key-value-tag.hover-tooltip",content:`${t}: ${n}`,children:(0,et.Y)(tM.v,{componentId:"shared.model-trace-explorer.key-value-tag",className:a,children:(0,et.FD)("span",{css:(0,o.AH)({maxWidth:i,display:"inline-flex"},"",""),children:[(0,et.Y)(tm.o.Text,{bold:!0,css:nB(l),size:"sm",children:t}),":\xa0",(0,et.Y)(tm.o.Text,{css:nB(s),size:"sm",children:n})]})})})};var nW={name:"1fttcpj",styles:"display:flex;flex-direction:column"};function nG(e){let{text:t,metadataTags:n,setExpanded:r,logDocumentClick:i}=e,{theme:a}=(0,c.wn)();return(0,et.FD)("div",{css:nW,children:[(0,et.Y)("div",{role:"button",onClick:()=>{r(!1),i("collapse")},css:(0,o.AH)({display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",padding:a.spacing.md,height:a.typography.lineHeightBase,boxSizing:"content-box","&:hover":{backgroundColor:a.colors.backgroundSecondary}},"",""),children:(0,et.Y)(ey.A,{})}),(0,et.Y)("div",{css:(0,o.AH)({padding:a.spacing.md,paddingBottom:0},"",""),children:(0,et.Y)(nt,{children:t})}),(0,et.Y)("div",{css:(0,o.AH)({padding:a.spacing.md,paddingTop:0},"",""),children:n.map(e=>{let{key:t,value:n}=e;return(0,et.Y)(nj,{itemKey:t,itemValue:n},t)})}),(0,et.Y)(d.$n,{css:(0,o.AH)({width:"100%",padding:a.spacing.sm},"",""),componentId:"shared.model-trace-explorer.retriever-document-collapse",icon:(0,et.Y)(tf.A,{}),type:"tertiary",onClick:()=>r(!1),children:(0,et.Y)(g.sA,{id:"AgjhWE",defaultMessage:"See less"})})]})}var nz={name:"ho1qnd",styles:"display:flex;flex-direction:row"},n$={name:"1r5gb7q",styles:"display:inline-block"},nK={name:"1bmnxg7",styles:"white-space:nowrap"};function nV(e){let{text:t,metadataTags:n,setExpanded:r,logDocumentClick:i}=e,{theme:a}=(0,c.wn)();return(0,et.FD)("div",{role:"button",onClick:()=>{r(!0),i("expand")},css:(0,o.AH)({display:"flex",flexDirection:"row",padding:a.spacing.md,gap:a.spacing.sm,alignItems:"center",justifyContent:"space-between",cursor:"pointer","&:hover":{backgroundColor:a.colors.backgroundSecondary}},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",gap:a.spacing.sm,alignItems:"center",minWidth:0,flexShrink:1},"",""),children:[(0,et.Y)(ey.A,{}),(0,et.Y)(tm.o.Text,{ellipsis:!0,size:"md",children:t})]}),(0,et.FD)("div",{css:nz,children:[n.length>0?(0,et.Y)(nj,{itemKey:n[0].key,itemValue:n[0].value}):null,n.length>1?(0,et.Y)(nS.m,{componentId:"shared.model-trace-explorer.tag-count.hover-tooltip",content:n.slice(1).map(e=>{let{key:t,value:n}=e;return(0,et.Y)("span",{css:n$,children:`${t}: ${n}`},t)}),children:(0,et.FD)(tM.v,{componentId:"shared.model-trace-explorer.tag-count",css:nK,children:["+",n.length-1]})}):null]})]})}function nX(e){let{text:t,metadata:n}=e,[r,o]=(0,l.useState)(!1),i=eB(n),a=ed(),s=M(),c=(0,l.useCallback)(e=>{W(a,s,{eventType:"component_click",eventEntity:{entityType:"component",entitySubType:"div",entityId:`shared.model-trace-explorer.retriever-document-${e}`},eventPayload:{interactionSubject:!0}})},[a,s]);return r?(0,et.Y)(nG,{text:t,metadataTags:i,setExpanded:o,logDocumentClick:c}):(0,et.Y)(nV,{text:t,metadataTags:i,setExpanded:o,logDocumentClick:c})}var nq=n(17021),nJ=n(17784),nQ=n(57477),nZ={name:"s5xdrg",styles:"display:flex;align-items:center"},n0={name:"s5xdrg",styles:"display:flex;align-items:center"};function n1(e){let{shouldRenderMarkdown:t,setShouldRenderMarkdown:n}=e,{theme:r}=(0,c.wn)();return(0,et.FD)(nq.d,{"data-testid":"model-trace-explorer-render-mode-toggle",name:"render-mode",size:"small",componentId:`shared.model-trace-explorer.toggle-markdown-rendering-${!t}`,value:t,onChange:e=>{n(e.target.value)},children:[(0,et.Y)(nq.E,{"data-testid":"model-trace-explorer-render-raw-input-button",value:!1,children:(0,et.Y)(nS.m,{componentId:"shared.model-trace-explorer.raw-input-rendering-tooltip",content:(0,et.Y)(g.sA,{id:"NMxAot",defaultMessage:"Raw input"}),children:(0,et.Y)("div",{css:nZ,children:(0,et.Y)(nJ.A,{css:(0,o.AH)({fontSize:r.typography.fontSizeLg},"","")})})})}),(0,et.Y)(nq.E,{"data-testid":"model-trace-explorer-render-default-button",value:!0,children:(0,et.Y)(nS.m,{componentId:"shared.model-trace-explorer.default-rendering-tooltip",content:(0,et.Y)(g.sA,{id:"xwe7WH",defaultMessage:"Default rendering"}),children:(0,et.Y)("div",{css:n0,children:(0,et.Y)(nQ.A,{css:(0,o.AH)({fontSize:r.typography.fontSizeLg},"","")})})})})]})}var n2={name:"1s4awny",styles:"display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%"};function n3(e){let{activeSpan:t,className:n,searchFilter:r,activeMatch:a}=e,{theme:s}=(0,c.wn)(),[d,u]=(0,l.useState)(!0),p=(0,l.useMemo)(()=>eB(t.inputs),[t]),m=t.outputs,f=p.length>0,h=!(0,i.isNil)(a)&&a.span.key===t.key,v=h&&"outputs"===a.section;return(0,et.FD)("div",{className:n,"data-testid":"model-trace-explorer-retriever-span-view",children:[f&&(0,et.Y)(nD,{sectionKey:"input",title:(0,et.Y)(g.sA,{id:"/TX1Az",defaultMessage:"Inputs"}),children:p.map((e,t)=>{let{key:n,value:o}=e;return(0,et.Y)(nE,{title:n,data:o,searchFilter:r,activeMatch:a,containsActiveMatch:h&&"inputs"===a.section&&a.key===n},n||t)})}),(0,et.Y)(nD,{sectionKey:"output",title:(0,et.FD)("div",{css:n2,children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"row",gap:s.spacing.sm},"",""),children:[(0,et.Y)(g.sA,{id:"ThYYz6",defaultMessage:"Documents"}),(0,et.Y)(tM.v,{componentId:"shared.model-trace-explorer.document-count",children:m.length})]}),!v&&(0,et.Y)(n1,{shouldRenderMarkdown:d,setShouldRenderMarkdown:u})]}),children:d&&!v?(0,et.Y)("div",{css:(0,o.AH)({border:`1px solid ${s.colors.border}`,borderRadius:s.legacyBorders.borderRadiusMd},"",""),children:m.map((e,t)=>(0,et.Y)("div",{css:(0,o.AH)({borderBottom:t!==m.length-1?`1px solid ${s.colors.border}`:""},"",""),children:(0,et.Y)(nX,{text:e.page_content,metadata:e.metadata},t)},t))}):(0,et.Y)("div",{css:(0,o.AH)({border:`1px solid ${s.colors.border}`,borderRadius:s.legacyBorders.borderRadiusMd,padding:s.spacing.md,paddingBottom:0},"",""),children:(0,et.Y)(nE,{title:"",data:JSON.stringify(m,null,2),searchFilter:r,activeMatch:a,containsActiveMatch:h&&"outputs"===a.section})})})]})}function n4(e){let{activeSpan:t,className:n,searchFilter:r,activeMatch:a}=e,{theme:l}=(0,c.wn)();if(!(0,i.isNil)(t)&&eW(t))return(0,et.Y)("div",{css:(0,o.AH)({overflowY:"auto",padding:l.spacing.md},"",""),className:n,"data-testid":"model-trace-explorer-content-tab",children:(0,et.Y)(n3,{activeSpan:t,className:n,searchFilter:r,activeMatch:a})});return(0,et.Y)("div",{css:(0,o.AH)({overflowY:"auto",padding:l.spacing.md},"",""),className:n,"data-testid":"model-trace-explorer-content-tab",children:(0,et.Y)(nU,{activeSpan:t,className:n,searchFilter:r,activeMatch:a})})}var n5=n(84260);function n7(e){let{activeSpan:t,searchFilter:n,activeMatch:r}=e,{theme:a}=(0,c.wn)(),{events:l}=t,s=!(0,i.isNil)(r)&&r.span.key===t.key;if(!Array.isArray(l)||0===l.length)return(0,et.Y)("div",{css:(0,o.AH)({marginTop:a.spacing.md},"",""),children:(0,et.Y)(tC.S,{description:(0,et.Y)(g.sA,{id:"xnr5KT",defaultMessage:"No events found"})})});return(0,et.Y)("div",{css:(0,o.AH)({padding:a.spacing.md},"",""),children:l.map((e,t)=>{let i=e.attributes,l="exception"===e.name?(0,et.FD)(et.FK,{children:[(0,et.Y)(n5.A,{css:(0,o.AH)({marginRight:a.spacing.sm},"",""),color:"danger"}),(0,et.Y)(tm.o.Text,{color:"error",bold:!0,children:"Exception"})]}):e.name;if(!i)return null;return(0,et.Y)(nD,{sectionKey:e.name,title:l,withBorder:!0,children:Object.keys(i).map(o=>{let a=eG(e.name,t,o);return(0,et.Y)(nE,{title:o,data:JSON.stringify(i[o],null,2),searchFilter:n,activeMatch:r,containsActiveMatch:s&&"events"===r.section&&r.key===a,initialRenderMode:ev.TEXT},a)})},`${e.name}-${t}`)})})}function n6(e){let{count:t}=e,{theme:n}=(0,c.wn)();return(0,et.Y)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",justifyContent:"center",borderRadius:n.typography.fontSizeBase,height:n.typography.fontSizeBase,backgroundColor:n.colors.actionDangerPrimaryBackgroundDefault,padding:n.spacing.xs,marginLeft:n.spacing.xs,boxSizing:"border-box"},"",""),children:(0,et.Y)("span",{css:(0,o.AH)({color:n.colors.actionPrimaryTextDefault,fontSize:11},"",""),children:t})})}function n8(e){let{activeSpan:t,searchFilter:n,activeMatch:r,activeTab:a,setActiveTab:l}=e,{theme:s}=(0,c.wn)(),d={flex:1,marginTop:-s.spacing.md,overflowY:"auto"};if((0,i.isNil)(t))return(0,et.Y)(tC.S,{description:"Please select a span to view more information"});let u=ez(t);return(0,et.FD)(tO.Root,{componentId:"shared.model-trace-explorer.right-pane-tabs",css:(0,o.AH)({display:"flex",flexDirection:"column",flex:1,borderLeft:`1px solid ${s.colors.border}`,minWidth:300},"",""),value:a,onValueChange:e=>l(e),children:[(0,et.FD)(tO.List,{css:(0,o.AH)({padding:`0px ${s.spacing.md}px`,boxSizing:"border-box"},"",""),children:[t.chatMessages&&(0,et.Y)(tO.Trigger,{value:"chat",children:(0,et.Y)(g.sA,{id:"BkDhmT",defaultMessage:"Chat"})}),(0,et.Y)(tO.Trigger,{value:"content",children:(0,et.Y)(g.sA,{id:"KW2dOC",defaultMessage:"Inputs / Outputs"})}),(0,et.Y)(tO.Trigger,{value:"attributes",children:"Attributes"}),(0,et.FD)(tO.Trigger,{value:"events",children:["Events ",u>0&&(0,et.Y)(n6,{count:u})]})]}),t.chatMessages&&(0,et.Y)(tO.Content,{css:d,value:"chat",children:(0,et.Y)(nk,{chatMessages:t.chatMessages,chatTools:t.chatTools})}),(0,et.Y)(tO.Content,{css:d,value:"content",children:(0,et.Y)(n4,{activeSpan:t,searchFilter:n,activeMatch:r})}),(0,et.Y)(tO.Content,{css:d,value:"attributes",children:(0,et.Y)(ny,{activeSpan:t,searchFilter:n,activeMatch:r})}),(0,et.Y)(tO.Content,{css:d,value:"events",children:(0,et.Y)(n7,{activeSpan:t,searchFilter:n,activeMatch:r})})]})}var n9=n(34531);let re=e=>{let{node:t,spanTimeFormatter:n,withTimePill:r}=e,{theme:i}=(0,c.wn)(),a=ez(t)>0;return(0,et.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",flexDirection:"row",height:i.typography.lineHeightBase},"",""),children:[(0,et.Y)(tm.o.Text,{children:t.title}),r&&(0,et.FD)(tM.v,{color:a?"coral":"default",componentId:"shared.model-trace-explorer.timeline-tree-title-time-pill",title:n(t.end-t.start),css:(0,o.AH)({margin:0,marginLeft:i.spacing.sm,fontSize:i.typography.fontSizeSm},"",""),children:[a&&(0,et.Y)(n5.A,{css:(0,o.AH)({marginRight:i.spacing.xs,fontSize:14,color:"inherit"},"","")}),(0,et.Y)("span",{css:(0,o.AH)({fontSize:i.typography.fontSizeSm},"",""),children:n(t.end-t.start)})]})]})},{createStore:rt,useStore:rn}=n(48212),rr=(0,l.createContext)(null);rr.displayName="GanttContext";let ro=()=>{let e=(0,l.useContext)(rr);if(!e)throw Error("useGanttContext must be used within a GanttContext.Provider");return e},ri=e=>rn(ro().storeRef.current,e),ra=()=>rt(e=>({highlightedEdge:void 0,setHighlightedEdge:t=>e(()=>({highlightedEdge:t}))}));var rl={name:"10vana9",styles:"position:relative;display:grid;grid-template-columns:1fr;grid-template-rows:min-content;align-items:start;height:min-content"};let rs=(0,l.forwardRef)(function(e,t){var n,r;let{children:o,start:i,end:a,style:s,numDividers:c=10,paddingLeft:d=40,paddingRight:u=8,width:p=0,...g}=e,m=(0,l.useRef)();m.current||(m.current=ra());let f=(0,l.useRef)(new Map),h=(0,l.useRef)(null),v=null!==(n=null===(r=tl({ref:h,debounceTimeMs:16}))||void 0===r?void 0:r.width)&&void 0!==n?n:p,E=Math.max(1,"function"==typeof c?Math.floor(c(v)):c),y=(0,l.useMemo)(()=>{let e=Math.max(0,v-d-u),t=e/E,n=e/(a-i);return{storeRef:m,start:i,scale:n,end:a,dividerLengthInPixels:t,dividers:function(e){let{start:t,end:n,maxWidth:r,numDividers:o,dividerLengthInPixels:i}=e;if(o<0||n<t)return[];let a=Math.max(1e3,(n-t)/o),l=[];for(let e=t,o=0;e<=n&&(!(o>0)||!(o+.9*i>=r));e+=a,o+=i)l.push(e);return l}({start:i,end:a,maxWidth:e,numDividers:E,dividerLengthInPixels:t}),nodesById:f,paddingLeft:d,paddingRight:u,numDividers:E,width:v}},[i,a,d,u,E,v]);return(0,et.Y)(rr.Provider,{value:y,children:(0,et.Y)("div",{"data-gantt-root":"",style:{...s},css:rl,ref:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{!function(e,t){if(null===e)return;if("function"==typeof e)e(t);else if("object"==typeof e)try{e.current=t}catch(n){throw Error(`Cannot assign value "${t}" to ref "${e}"`)}}(t,e)})}}(h,t),...g,children:o})})}),rc=e=>({position:"relative",display:"flex",alignItems:"center",minHeight:"32px",textAlign:"center",fontVariantNumeric:"tabular-nums",borderBottomColor:e.colors.border,borderBottomStyle:"solid",borderBottomWidth:"1px",backgroundColor:e.colors.backgroundPrimary,color:e.colors.textSecondary,whiteSpace:"nowrap",overflow:"hidden"}),rd=(0,l.forwardRef)(function(e,t){let{theme:n}=(0,c.wn)(),{paddingLeft:r,paddingRight:i}=ro();return(0,et.Y)("div",{ref:t,"data-gantt-header":"",css:(0,o.AH)({...rc(n),padding:`0px ${i}px 0px ${r}px`},"",""),...e})});var ru={name:"1v26o98",styles:"transform:translateX(-42%)"};let rp=(0,l.forwardRef)(function(e,t){let{style:n,...r}=e,{dividerLengthInPixels:o}=ro();return(0,et.Y)("div",{ref:t,"data-gantt-header-cell":"",css:ru,style:{minWidth:o,...n},...r})}),rg=e=>{let{children:t}=e,{dividers:n}=ro(),r=(0,g.tz)();if(t)return(0,et.Y)(et.FK,{children:t(n)});return(0,et.Y)(et.FK,{children:n.map(e=>(0,et.Y)(rp,{children:(0,et.Y)("span",{children:r.formatTime(new Date(e),{timeStyle:"medium"})})},e))})};var rm={name:"bjn8wh",styles:"position:relative"};let rf=(0,l.forwardRef)(function(e,t){let{...n}=e,{width:r}=ro();if(!r)return null;return(0,et.Y)("div",{ref:t,"data-gantt-body":"",css:rm,...n})}),rh=(0,l.createContext)(null);rh.displayName="GanttRowContext";let rv=()=>{let e=(0,l.useContext)(rh);if(!e)throw Error("useGanttRowContext must be used within a GanttRowContext.Provider");return e},rE=(0,l.forwardRef)(function(e,t){let{style:n,height:r=32,top:i,...a}=e,{paddingLeft:s,paddingRight:d}=ro(),u=(0,l.useMemo)(()=>({height:r,top:i}),[r,i]),{theme:p}=(0,c.wn)();return(0,et.Y)(rh.Provider,{value:u,children:(0,et.Y)("div",{ref:t,"data-gantt-row":"",css:(0,o.AH)({boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",backgroundColor:p.colors.backgroundPrimary,padding:`8px ${d}px 8px ${s}px`,minHeight:"32px",minWidth:"100%","&:nth-of-type(odd)":{backgroundColor:p.colors.backgroundSecondary}},"",""),style:{...n},...a})})});function ry(e,t){return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];let a=e&&e(n,...o);if(!n||!n.defaultPrevented)return t(n,...o);return a}}var r_={name:"4d7y4w",styles:"display:flex;align-items:center;min-width:2px;overflow:visible;min-height:16px;padding:2px;box-sizing:border-box;width:var(--gantt-cell-length);inset-inline-start:calc(var(--gantt-cell-position) + var(--gantt-cell-padding))"};let rA=(0,l.forwardRef)(function(e,t){let{as:n="div",style:r,id:o,start:i,end:a,onMouseEnter:s,onMouseLeave:c,...d}=e,{nodesById:u,paddingLeft:p}=ro(),g=ri(e=>e.setHighlightedEdge),{length:m,position:f}=function(e){let{start:t,end:n}=e,{start:r,scale:o}=ro();return{length:Math.max(n-t,0)*o,position:(t-r)*o}}({start:i,end:a}),{top:h,height:v}=rv();if((0,l.useLayoutEffect)(()=>{if(o){let e=String(o),t=u.current;return()=>{t.delete(e)}}},[o]),u.current.has(String(o))){let e=u.current.get(String(o));e.rect.x=f,e.rect.width=m,e.rect.y=h,e.rect.height=v}else u.current.set(String(o),{rect:{width:m,x:f,height:v,y:h}});return(0,et.Y)(n,{ref:t,"data-gantt-cell":"","data-gantt-cell-id":o,css:r_,style:{position:"absolute",zIndex:1,"--gantt-cell-length":`${m}px`,"--gantt-cell-position":`${f}px`,"--gantt-cell-padding":`${p}px`,...r},onMouseEnter:ry(s,()=>g(o)),onMouseLeave:ry(c,()=>g(void 0)),...d})}),rT=(0,l.forwardRef)(function(e,t){let{style:n,start:r,...i}=e,{theme:a}=(0,c.wn)(),{start:l,scale:s,paddingLeft:d}=ro(),u=(r-l)*s;return(0,et.Y)("div",{ref:t,"data-gantt-vertical-marker":"","data-gantt-vertical-marker-offset":r,style:{left:u,insetInlineStart:u,...n},"aria-hidden":"true",css:(0,o.AH)({boxSizing:"border-box",position:"absolute",top:"0",bottom:"0",zIndex:0,width:"1px",backgroundColor:a.colors.backgroundPrimary,marginLeft:d},"",""),...i})}),rb=()=>{let{dividers:e}=ro();return(0,et.Y)(et.FK,{children:e.map(e=>(0,et.Y)(rT,{start:e},e))})},rI=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return e.colors.actionTertiaryBackgroundPress;if(t)return e.colors.actionTertiaryBackgroundHover},rS=e=>`${(e/1e6).toFixed(2)} s`,rR=(e,t,n)=>{var r;let o=null===(r=e.children)||void 0===r?void 0:r.map(e=>rR(e,t,n));return{...e,children:o,title:(0,et.Y)(re,{node:e,spanTimeFormatter:t,withTimePill:n},e.key)}};var rN={name:"1jyk3dc",styles:"overflow:hidden;display:flex;flex-direction:column;flex:1"},rx={name:"zjik7",styles:"display:flex"},rC={name:"d3v9zr",styles:"overflow:hidden"},rO={name:"pa47la",styles:"height:100%;overflow-y:auto;display:flex"};let rw=e=>{let{rootNodes:t,selectedNode:n,setSelectedNode:r,expandedKeys:i=[],setExpandedKeys:a,spanTimeFormatter:s=e=>`${(e/1e6).toFixed(2)} s`,treeHeader:d,className:u,showGantt:p=!0,onNodeClick:g}=e,{theme:m,getPrefixedClassName:f}=(0,c.wn)(),h=f("tree-title"),v=f("tree"),E=f("tree-node-content-wrapper"),y=ed(),_=M(),A=(0,l.useCallback)(e=>W(y,_,{eventType:"component_click",eventEntity:{entityType:"component",entitySubType:"div",entityId:`shared.model-trace-explorer.${e.type}-span-click`},eventPayload:{interactionSubject:!0}}),[y,_]),T=(0,l.useMemo)(()=>tS(t),[t]),[b,I]=(0,l.useState)(200),[S,R]=(0,l.useState)(void 0),N=(0,l.useMemo)(()=>t.map(e=>rR(e,s,!p)),[t,p,s]),x=(0,l.useMemo)(()=>tb(t),[t]),C=(0,l.useMemo)(()=>tI(t,i),[t,i]),O=(e,t)=>Math.max(2,Math.min(t.max/1e3,Math.floor(e/100))),w=(0,l.useMemo)(()=>(0,et.Y)("div",{css:(0,o.AH)({flex:1,overflow:"auto",minHeight:"100%",height:"min-content",paddingBottom:3*m.spacing.lg,borderRight:p?`1px solid ${m.colors.border}`:void 0,boxSizing:"border-box",display:"flex",[`.${h}`]:{whiteSpace:"nowrap"},[`.${v}`]:{flex:"1 0 auto"},[`.${E} > span:first-child`]:{flexShrink:0},minWidth:100},"",""),children:(0,et.Y)(n9.P,{showLine:{showLeafIcon:!1},selectedKeys:n?[n.key]:[],dangerouslySetAntdProps:{showIcon:!0,onMouseEnter:e=>{let{node:t}=e;return R(t)},onMouseLeave:()=>R(void 0)},mode:"selectable",treeData:N,expandedKeys:i,onExpand:a,onSelect:e=>{if(0===e.length)return;let t=T[e[0]];null==r||r(t),A(t),null==g||g(t)}})}),[m.spacing.lg,m.colors.border,p,h,v,E,n,N,i,a,T,r,A,g]);return(0,et.Y)("div",{css:(0,o.AH)({height:"100%",borderRadius:m.legacyBorders.borderRadiusMd,overflow:"hidden",display:"flex"},"",""),className:u,children:(0,et.FD)("div",{css:rN,children:[(0,et.FD)("div",{css:rx,children:[(0,et.Y)("div",{css:(0,o.AH)({borderBottom:`1px solid ${m.colors.border}`,boxSizing:"border-box",marginTop:m.spacing.sm,paddingLeft:m.spacing.sm,height:24},"",""),style:{flex:p?`0 0 ${b}px`:1},children:(0,et.Y)(tm.o.Title,{withoutMargins:!0,level:4,children:d})}),p&&(0,et.Y)("div",{css:(0,o.AH)({flex:1,boxSizing:"border-box",marginTop:m.spacing.sm},"",""),children:(0,et.Y)(rs,{start:x.min,end:x.max,numDividers:e=>O(e,x),paddingLeft:25,paddingRight:75,children:(0,et.Y)(rd,{css:(0,o.AH)({minHeight:24,maxHeight:24,boxSizing:"border-box",lineHeight:"24px"},"",""),children:(0,et.Y)(rg,{children:e=>e.map(e=>(0,et.Y)(rp,{css:rC,children:(0,et.Y)(t4.p,{title:rS(e),placement:"top",children:(0,et.Y)("span",{children:rS(e)})})},e))})})})})]}),(0,et.Y)("div",{css:rO,children:p?(0,et.Y)(tu,{paneWidth:b,setPaneWidth:I,initialRatio:.67,leftChild:w,leftMinWidth:100,rightChild:(0,et.Y)("div",{css:(0,o.AH)({flex:1,minWidth:200},"",""),"data-testid":"time-marker-area",children:(0,et.Y)(rs,{start:x.min,end:x.max,numDividers:e=>O(e,x),paddingLeft:25,paddingRight:75,children:(0,et.FD)(rf,{children:[C.map((e,t)=>{let i=ez(e)>0;return(0,et.Y)(t4.p,{title:`${s(e.start)} - ${s(e.end)}`,placement:"right",dangerouslySetAntdProps:{visible:e.key===(null==S?void 0:S.key)},children:(0,et.Y)(rE,{top:t,height:24,css:(0,o.AH)({cursor:"pointer",backgroundColor:rI(m,e.key===(null==S?void 0:S.key),e===n)||"transparent","&:nth-of-type(2n+1)":{backgroundColor:rI(m,e.key===(null==S?void 0:S.key),e===n)||"transparent"}},"",""),onClick:()=>null==r?void 0:r(e),onMouseEnter:()=>R(e),onMouseLeave:()=>R(void 0),children:(0,et.Y)(rA,{id:e.key,start:e.start,end:e.end,css:(0,o.AH)({backgroundColor:m.colors.grey400},"",""),children:(0,et.FD)("div",{css:(0,o.AH)({lineHeight:m.typography.lineHeightSm,fontSize:m.typography.fontSizeSm,position:"absolute",left:"100%",marginLeft:m.spacing.xs,top:0,bottom:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"flex",flexDirection:"row",alignItems:"center"},"",""),children:[i&&(0,et.Y)(n5.A,{css:(0,o.AH)({marginRight:m.spacing.xs,fontSize:14},"",""),color:"danger"}),(0,et.Y)(tm.o.Text,{color:i?"error":"primary",children:s(e.end-e.start)})]})})})},e.key)}),(0,et.Y)(rb,{})]})})}),rightMinWidth:200}):w})]})})},rM=e=>`${Math.max(Math.round(e/1e6*100)/100,.01).toFixed(2)}s`,rY=()=>{if(window.innerWidth<=768)return{ratio:.5,showGantt:!1};if(window.innerWidth<=1280)return{ratio:.33,showGantt:!1};if(window.innerWidth<=1440)return{ratio:.4,showGantt:!0};return{ratio:.33,showGantt:!0}};var rL={name:"13ku56z",styles:"display:flex;flex-direction:column;height:100%"},rP={name:"82a6rk",styles:"flex:1"};let rD=e=>{var t,n;let{modelTrace:r,className:a,selectedSpanId:s,onSelectSpan:m}=e,{ratio:f,showGantt:h}=rY(),v=(0,l.useRef)(null),E=(0,l.useMemo)(()=>(function(e){var t,n;let r=null!==(t=null===(n=e.trace_data)||void 0===n?void 0:n.spans)&&void 0!==t?t:e.data.spans,o={},a={};r.forEach(e=>{o[e.context.span_id]=e,a[e.context.span_id]=[]}),r.forEach(e=>{var t;let n=null!==(t=e.parent_span_id)&&void 0!==t?t:e.parent_id;if(!(0,i.isNil)(n)){if(!a[n])throw Error("Tree structure is malformed!");a[n].push(e.context.span_id)}});let l=r.find(e=>{var t;return(0,i.isNil)(null!==(t=e.parent_span_id)&&void 0!==t?t:e.parent_id)});if((0,i.isNil)(l))return null;return function e(t){var n,r,i,s;let c=o[t],d=Number(null!==(n=null==l?void 0:l.start_time)&&void 0!==n?n:0),u=Number(null!==(r=null==l?void 0:l.end_time)&&void 0!==r?r:0),p=a[t].map(e);if(void 0!==c.parent_id)return ek(c,d,u,p);let g=null!==(i=c.span_type)&&void 0!==i?i:em.UNKNOWN;return{title:c.name,icon:(0,et.Y)(eO,{type:ew(g)}),type:g,key:c.context.span_id,start:Number(c.start_time)-d,end:Number(null!==(s=c.end_time)&&void 0!==s?s:u)-d,children:p,inputs:c.inputs,outputs:c.outputs,attributes:c.attributes,events:c.events}}(l.context.span_id)})(r),[r]),[y,_]=(0,l.useState)(500),[A,T]=(0,l.useState)(h),b=function e(t,n){var r;if((0,i.isNil)(n)||(0,i.isNil)(t))return;if(t.key===n)return t;for(let o of null!==(r=t.children)&&void 0!==r?r:[]){let t=e(o,n);if(t)return t}}(E,s),[S,R]=(0,l.useState)(null!==(t=null!=b?b:E)&&void 0!==t?t:void 0),[N,x]=(0,l.useState)(null!=S&&S.chatMessages?"chat":"content"),{matchData:C,searchFilter:O,setSearchFilter:w,filteredTreeNodes:M,handleNextSearchMatch:Y,handlePreviousSearchMatch:L}=tx({treeNode:E,selectedNode:S,setSelectedNode:R,setActiveTab:x}),{expandedKeys:P,setExpandedKeys:D}=tR({rootNodes:M,initialExpandAll:!0}),{theme:k}=(0,c.wn)();(0,l.useLayoutEffect)(()=>{D((0,i.values)(tS(M)).map(e=>e.key))},[M,D]);let F=A?300:280;return(0,et.Y)(ei,{id:I.MLFLOW_CONTEXT,tags:{tagTracesRequestId:null!==(n=r.info.request_id)&&void 0!==n?n:""},children:(0,et.FD)("div",{css:rL,className:a,children:[(0,et.Y)("div",{css:(0,o.AH)({padding:k.spacing.xs,borderBottom:`1px solid ${k.colors.border}`,borderTop:`1px solid ${k.colors.border}`},"",""),children:(0,et.Y)(tE,{searchFilter:O,setSearchFilter:w,matchData:C,handleNextSearchMatch:Y,handlePreviousSearchMatch:L})}),(0,et.Y)(tu,{ref:v,initialRatio:f,paneWidth:y,setPaneWidth:_,leftChild:(0,et.Y)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",flex:1,minWidth:F},"",""),children:M.length>0?(0,et.Y)(rw,{rootNodes:M,selectedNode:S,setSelectedNode:e=>{R(e),x(null!=e&&e.chatMessages?"chat":"content"),(0,i.isString)(null==e?void 0:e.key)&&(null==m||m(null==e?void 0:e.key))},spanTimeFormatter:rM,treeHeader:"Task name",css:rP,expandedKeys:P,setExpandedKeys:D,showGantt:A}):(0,et.Y)("div",{css:(0,o.AH)({flex:1,display:"flex",justifyContent:"center",paddingTop:k.spacing.lg},"",""),children:(0,et.Y)(g.sA,{id:"4pXg9j",defaultMessage:"No results found. Try using a different search term."})})}),leftMinWidth:F,rightChild:(0,et.Y)(n8,{activeSpan:S,searchFilter:O,activeMatch:C.match,activeTab:N,setActiveTab:x}),rightMinWidth:300}),(0,et.Y)("div",{css:(0,o.AH)({backgroundColor:k.colors.backgroundPrimary,position:"absolute",bottom:0,left:0,margin:k.spacing.md,zIndex:2},"",""),children:(0,et.Y)(d.$n,{componentId:`shared.model-trace-explorer.${A?"hide":"show"}-timeline`,icon:A?(0,et.Y)(u.A,{}):(0,et.Y)(p.A,{}),onClick:()=>{let e=!A;if(T(e),e){var t;let e=Math.max(y,480);_(e),null===(t=v.current)||void 0===t||t.updateRatio(e)}},children:A?(0,et.Y)(g.sA,{id:"jb5ssj",defaultMessage:"Hide timeline"}):(0,et.Y)(g.sA,{id:"KYMoeQ",defaultMessage:"Show timeline"})})})]})})};rD.Skeleton=e=>{let{label:t}=e,{theme:n}=(0,c.wn)();return(0,et.FD)("div",{css:tA,children:[(0,et.FD)("div",{css:tT,children:[(0,et.Y)("div",{css:(0,o.AH)({padding:n.spacing.sm,borderBottom:`1px solid ${n.colors.border}`},"",""),children:(0,et.Y)(ty.o,{label:t})}),(0,et.FD)("div",{css:(0,o.AH)({borderRadius:n.legacyBorders.borderRadiusMd,overflow:"hidden",display:"flex"},"",""),children:[(0,et.Y)("div",{css:(0,o.AH)({flex:1,padding:n.spacing.sm,borderRight:`1px solid ${n.colors.border}`},"",""),children:(0,et.Y)(t_.Q,{lines:5})}),(0,et.Y)("div",{css:(0,o.AH)({flex:2,padding:n.spacing.sm},"",""),children:(0,et.Y)(t_.Q,{lines:5})})]})]}),(0,et.Y)("div",{css:(0,o.AH)({padding:n.spacing.md,overflowY:"auto",flex:1},"",""),children:(0,et.Y)(t_.Q,{lines:12})})]})};var rk=n(89481),rF=n(46249),rH=n(89815);function rU(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function rB(e){return rj.apply(this,arguments)}function rj(){var e;return e=function*(e){try{let t=yield fetch(`/ajax-api/2.0/mlflow/get-trace-artifact?request_id=${e}`),n=yield t.text(),r=JSON.parse(n);if(r.spans)return{info:{request_id:e},data:r};if(r.error_code)return r.message;return"Unknown error occurred"}catch(e){if(e instanceof Error)return e.message;if("string"==typeof e)return e;return"Unknown error occurred"}},(rj=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){rU(i,r,o,a,l,"next",e)}function l(e){rU(i,r,o,a,l,"throw",e)}a(void 0)})}).apply(this,arguments)}function rW(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}let rG=(e,t)=>{let n=new URLSearchParams;return n.append("selectedTraceId",e),n.append("compareRunsMode","TRACES"),`/#/experiments/${t}?${n.toString()}`};var rz={name:"1elrbzk",styles:"width:calc(100% - 2px)"},r$={name:"inxa61",styles:"flex:1;overflow:hidden"};let rK=()=>{let e=(0,l.useMemo)(()=>new URLSearchParams(window.location.search).getAll("trace_id"),[]),t=(0,l.useMemo)(()=>new URLSearchParams(window.location.search).getAll("experiment_id"),[]),[n,r]=(0,l.useState)(e.length>0?0:null),[i,a]=(0,l.useState)(null),[s,d]=(0,l.useState)(!0),[u,p]=(0,l.useState)(null),{theme:m}=(0,c.wn)();if((0,l.useEffect)(()=>{(function(){var t,r=(t=function*(){if(null===n)return;d(!0);let t=e[n],r=yield rB(t);"string"==typeof r?p(r):a(r),d(!1)},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){rW(i,r,o,a,l,"next",e)}function l(e){rW(i,r,o,a,l,"throw",e)}a(void 0)})});return function(){return r.apply(this,arguments)}})()()},[n,e]),0===e.length||null===n)return null;if(s)return(0,et.Y)("div",{css:rz,children:(0,et.Y)(tm.o.Text,{color:"secondary",children:(0,et.Y)(g.sA,{id:"JJFZ1V",defaultMessage:"Fetching trace data..."})})});if(!i)return(0,et.Y)("div",{css:(0,o.AH)({paddingTop:m.spacing.md,width:"calc(100% - 2px)"},"",""),children:(0,et.Y)(tC.S,{image:(0,et.Y)(rk.A,{}),description:(0,et.FD)(et.FK,{children:[(0,et.Y)(tm.o.Paragraph,{children:(0,et.Y)(g.sA,{id:"UD4Z+e",defaultMessage:"An error occurred while attempting to fetch trace data (ID: {traceId}). Please ensure that the MLflow tracking server is running, and that the trace data exists. Error details:",values:{traceId:e[n]}})}),u&&(0,et.Y)(tm.o.Paragraph,{children:u})]}),title:(0,et.Y)(g.sA,{id:"md81Lo",defaultMessage:"Error"})})});return(0,et.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",border:`1px solid ${m.colors.border}`,height:"calc(100% - 2px)"},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${m.spacing.xs}px ${m.spacing.md}px`},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",gap:m.spacing.sm},"",""),children:[(0,et.Y)(tm.o.Title,{level:4,withoutMargins:!0,children:"MLflow Trace UI"}),(0,et.Y)(rF.I,{componentId:"mlflow.notebook.trace-ui-info",iconTitle:"More information",maxWidth:400,content:(0,et.Y)(g.sA,{id:"LED2z5",defaultMessage:"To disable or enable this display, call {disableFunction} or {enableFunction} and re-run the cell",values:{disableFunction:(0,et.Y)("code",{children:"mlflow.tracing.disable_notebook_display()"}),enableFunction:(0,et.Y)("code",{children:"mlflow.tracing.enable_notebook_display()"})}})}),(0,et.Y)(tm.o.Link,{componentId:"mlflow.notebook.trace-ui-learn-more-link",href:"https://mlflow.org/docs/latest/llms/tracing/index.html?ref=jupyter-notebook-widget",openInNewTab:!0,title:"Learn More",children:(0,et.Y)(g.sA,{id:"uIY1qq",defaultMessage:"Learn More"})})]}),(0,et.Y)(tm.o.Link,{componentId:"mlflow.notebook.trace-ui-see-in-mlflow-link",href:rG(e[n],t[n]),openInNewTab:!0,title:"View in MLflow UI",children:(0,et.Y)(g.sA,{id:"4NyhOm",defaultMessage:"View in MLflow UI"})})]}),e.length>1&&(0,et.Y)(rH.dK,{componentId:"mlflow.notebook.pagination",currentPageIndex:n+1,dangerouslySetAntdProps:{showQuickJumper:!0},numTotal:e.length,onChange:e=>r(e-1),pageSize:1,style:{marginBottom:m.spacing.sm,paddingLeft:m.spacing.sm,paddingRight:m.spacing.sm}}),(0,et.Y)("div",{css:r$,children:(0,et.Y)(rD,{modelTrace:i})})]})};var rV=n(88416);let rX=function(e){return e[e.FORM_FEEDBACK=0]="FORM_FEEDBACK",e[e.FORM_ERROR_REPORT=1]="FORM_ERROR_REPORT",e[e.METADATA=2]="METADATA",e}({}),rq=(0,n(26827).fH)("Feedback::OpenDrawer"),rJ=e=>{let t=e||rq,[n,r]=(0,l.useState)(t.isAvailable());return(0,l.useEffect)(()=>{let e;if(n)return;t.isAvailable()&&r(!0);let o=500,i=()=>{t.isAvailable()?r(!0):((o*=2)>5e3&&(o=5e3),e=setTimeout(i,o))};return e=setTimeout(i,o),()=>clearTimeout(e)},[n,t]),n};function rQ(e){let{"aria-describedby":t,debugRpc:n,mode:r=rX.FORM_FEEDBACK,...o}=e;if(!rJ(n))return null;return(0,et.Y)(d.$n,{componentId:"codegen_web-shared_src_fastfeedback_components_feedbacklink.tsx_54","aria-describedby":t,type:"link",icon:(0,et.Y)(rV.A,{}),onClick:()=>{(n||rq).call({...o,mode:r})},children:r===rX.FORM_ERROR_REPORT?(0,et.Y)(g.sA,{id:"URIk/E",defaultMessage:"Report error"}):(0,et.Y)(g.sA,{id:"W96Xb9",defaultMessage:"Send feedback"})})}let rZ=function(e){return e.Ready="READY",e.LogError="LOG_ERROR",e.LogEvent="LOG_EVENT",e}({}),r0=function(e){return e.UpdateTrace="UPDATE_TRACE",e}({}),r1=JSON.parse('{"2":{"path":"/static/lib/ml-model-trace-renderer/2/index.html","commit":"2447910c37f604b8b7d1102be77c4950db8fdcb0"},"current":{"path":"/static/lib/ml-model-trace-renderer/index.html"},"oss":{"path":"/static/lib/ml-model-trace-renderer/oss/index.html","commit":"fb896b03b7cdd3824840eeeafeaadcd3640cd11b"}}'),r2=e=>{var t,n,r;let o=eH(null==e||null===(t=e.info)||void 0===t?void 0:t.request_metadata);if(o)return o;return null!==(n=eH(null==e||null===(r=e.info)||void 0===r?void 0:r.tags))&&void 0!==n?n:"2"},r3=e=>{var t,n;let{modelTrace:r,height:i=700,useLatestVersion:a=!1}=e,u=(0,l.useRef)(null),[p,g]=s().useState(!0),[m,f]=s().useState(!0),E=null!==(t=null===(n=r1[a?"current":r2(r)])||void 0===n?void 0:n.path)&&void 0!==t?t:r1["2"].path,_=ed(),A=M(),{startInteraction:T}=function(){let{esComponent:e,errorBoundaryId:t}=y(),{mergeTags:n}=ec(),r=(0,l.useContext)(Q),o=Z();return(0,l.useMemo)(()=>({...r,startInteraction:(i,a,l,s)=>{let c=n({errorBoundaryId:t},{...s,esComponent:e});return r.startInteraction(i,a,l,c,{useRecordProtoFn:o})}}),[e,r,n,t,o])}(),{theme:b}=(0,c.wn)(),I=X({recordEvent:_,recordProto:A,startInteraction:T});return(0,l.useEffect)(()=>{let e=e=>{var t;let n=null===(t=u.current)||void 0===t?void 0:t.contentWindow;if(!n||e.source!==n)return;switch(e.data.type){case rZ.Ready:g(!1);break;case rZ.LogError:{let{error:t}=e.data||{};h.iT.sev2(v.Es.MlExperiments,"ModelTraceExplorerFrameRenderer/Error",t);break}case rZ.LogEvent:{let t=e.data.payload.eventDefaultPrevented;I({...e.data.payload,skip:t})}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[I]),(0,l.useEffect)(()=>{var e;let t=null===(e=u.current)||void 0===e?void 0:e.contentWindow;if(!t||p)return;t.postMessage({type:r0.UpdateTrace,traceData:r})},[r,p]),(0,et.FD)("div",{css:(0,o.AH)({height:m?i:36,borderTop:`1px solid ${b.colors.border}`},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",height:36,justifyContent:"space-between",padding:b.spacing.sm},"",""),children:[(0,et.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",gap:b.spacing.sm},"",""),children:[(0,et.Y)(d.$n,{componentId:`mlflow.notebook.trace-ui-${m?"collapse":"expand"}`,icon:m?(0,et.Y)(th.A,{}):(0,et.Y)(n_.A,{}),size:"small",onClick:()=>f(!m)}),(0,et.Y)(tm.o.Title,{level:4,withoutMargins:!0,children:"MLflow Trace UI"}),(0,et.Y)(tm.o.Link,{componentId:"mlflow.notebook.trace-ui-learn-more-link",href:"https://mlflow.org/docs/latest/llms/tracing/index.html",openInNewTab:!0,title:"Learn More",children:"Learn More"})]}),(0,et.Y)(rQ,{parentUi:v.Es.MlFlowOSS,origin:"mlflow-notebook-trace-ui"})]}),p&&(0,et.Y)("div",{css:(0,o.AH)({position:"absolute",width:"100%",height:i},"",""),children:(0,et.Y)(rD.Skeleton,{label:"Frame Skeleton"})}),(0,et.Y)("iframe",{title:"Model Trace Explorer",src:E,ref:u,css:(0,o.AH)({border:"none",width:"100%",height:"calc(100% - 36px)",display:m?"block":"none"},"","")})]})},r4=(0,l.createContext)({onSelectRow:()=>{}}),r5=()=>(0,l.useContext)(r4),r7=e=>{if((0,i.isNil)(e))return null;if(eU(e))return e;try{var t;let n=null===(t=e.spans)||void 0===t?void 0:t.map(e=>({...e,attributes:JSON.parse(e.attributes)}));if((0,i.isNil)(n))return null;return{data:{spans:n},info:{}}}catch(e){return null}},r6=e=>{let{children:t}=e,[n,r]=(0,l.useState)(null),a=r7(n),{theme:s}=(0,c.wn)();return(0,et.FD)(r4.Provider,{value:{onSelectRow:r},children:[t,!(0,i.isNil)(a)&&(0,et.Y)("div",{css:(0,o.AH)({borderTop:`1px solid ${s.colors.border}`},"",""),children:(0,et.Y)(r3,{modelTrace:a})})]})}}}]);
//# sourceMappingURL=https://sourcemaps.dev.databricks.com/ml-model-trace-renderer/js/409.f8577305.chunk.js.map